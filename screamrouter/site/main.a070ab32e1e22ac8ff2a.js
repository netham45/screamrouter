(()=>{"use strict";var e,t,n,r,a,o={1626:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(1601),a=n.n(r),o=n(6314),l=n.n(o),i=n(4417),s=n.n(i),c=new URL(n(6840),n.b),u=new URL(n(6293),n.b),d=l()(a());d.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap);"]);var m=s()(c),g=s()(u);d.push([e.id,`/* Global styles */\n\nbody {\n  font-family: 'Poppins', sans-serif;\n  line-height: 1.6;\n  color: #333;\n  background-color: #f4f4f4;\n  margin: 0;\n  padding: 0;\n  overflow-x: hidden;\n  background: transparent !important;\n}\n\n@keyframes gradientBG {\n  0% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n  100% { background-position: 0% 50%; }\n}\n\n/* Utility classes */\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 15px;\n}\n\n/* Music-themed elements */\n.music-note {\n  display: inline-block;\n  animation: float 3s ease-in-out infinite;\n  margin-right: 5px;\n}\n\n@keyframes float {\n  0% { transform: translateY(0px); }\n  50% { //transform: translateY(-10px); }\n  100% { transform: translateY(0px); }\n}\n\n.music-wave {\n  position: relative;\n  overflow: hidden;\n}\n\n.music-wave::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: -5px;\n  height: 10px;\n  background: url(${m});\n  background-size: cover;\n  z-index: -1;\n}\n\n/* Angled Cards & Containers */\n.angled-card {\n  transform: skewX(-5deg);\n  transition: all 0.3s ease;\n}\n\n.angled-card > * {\n  transform: skewX(5deg); /* Counter skew for content */\n}\n\n.angled-card:hover {\n  transform: skewX(-5deg) translateY(-5px);\n  no-box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\n}\n\n/* Buttons with dynamic angles */\n.btn {\n  display: inline-block;\n  background: linear-gradient(45deg, #3498db, #9b59b6);\n  color: #fff;\n  padding: 0.5rem 1.2rem;\n  border: none;\n  border-radius: 25px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  z-index: 1;\n  no-box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.btn::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(45deg, #9b59b6, #3498db);\n  z-index: -1;\n  transition: opacity 0.3s ease;\n  opacity: 0;\n}\n\n.btn:hover {\n  //transform: translateY(-3px);\n  no-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.btn:hover::after {\n  opacity: 1;\n}\n\n.btn-danger {\n  background: linear-gradient(45deg, #e74c3c, #c0392b);\n}\n\n.btn-danger:hover {\n  background: linear-gradient(45deg, #c0392b, #e74c3c);\n}\n\n/* Dynamic action buttons */\n.action-btn {\n  position: relative;\n  padding: 0.8rem 1.5rem;\n  border-radius: 50px;\n  background: linear-gradient(45deg, #9B59B6, #3498db);\n  color: white;\n  border: none;\n  font-weight: 500;\n  cursor: pointer;\n  no-box-shadow: 0 4px 10px rgba(0,0,0,0.1);\n  transition: all 0.3s ease;\n  overflow: hidden;\n}\n\n.action-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);\n  transition: all 0.5s ease;\n}\n\n.action-btn:hover {\n  //transform: translateY(-3px);\n  no-box-shadow: 0 6px 15px rgba(0,0,0,0.2);\n}\n\n.action-btn:hover::before {\n  left: 100%;\n}\n\n/* Form elements */\ninput[type="text"],\ninput[type="number"],\nselect {\n  width: 100%;\n  padding: 0.8rem 1rem;\n  margin-bottom: 1rem;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  transition: all 0.3s ease;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n\ninput[type="text"]:focus,\ninput[type="number"]:focus,\nselect:focus {\n  border-color: #9b59b6;\n  no-box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.2);\n  outline: none;\n}\n\n/* Tables */\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 1rem;\n  border-radius: 12px;\n  overflow: hidden;\n  no-box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\nth, td {\n  text-align: left;\n  padding: 1rem;\n  border-bottom: 1px solid #eee;\n}\n\nth {\n  background: linear-gradient(45deg, rgba(155, 89, 182, 0.2), rgba(52, 152, 219, 0.2));\n  font-weight: 600;\n  color: #333;\n}\n\ntr:nth-child(even) {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\ntr:hover {\n  background-color: rgba(155, 89, 182, 0.05);\n  transition: background-color 0.3s ease;\n}\n\n/* Modal styles */\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(5px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: #fff;\n  padding: 2rem;\n  border-radius: 16px;\n  no-box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);\n  width: auto;\n  max-width: 90%;\n  transform: translateY(20px);\n  animation: modalFadeIn 0.4s forwards;\n  position: relative;\n  overflow: hidden;\n}\n\n.modal-content::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 6px;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n}\n\n@keyframes modalFadeIn {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .container {\n    padding: 0 10px;\n  }\n  \n  table {\n    font-size: 0.9rem;\n  }\n  \n  th, td {\n    padding: 0.5rem;\n  }\n}\n\n/* Animations */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.fade-in {\n  animation: fadeIn 0.4s ease-out;\n}\n\n/* Pulse animation for active items */\n@keyframes pulse {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n}\n\n.pulse {\n  animation: pulse 2s infinite;\n}\n\n/* Error message */\n.error-message {\n  background: linear-gradient(45deg, #ff7675, #e74c3c);\n  color: white;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  font-weight: 500;\n  no-box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);\n  transform: translateX(-5px);\n}\n\n/* Success message */\n.success-message {\n  background: linear-gradient(45deg, #55efc4, #00b894);\n  color: white;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  font-weight: 500;\n  no-box-shadow: 0 4px 10px rgba(0, 184, 148, 0.3);\n  transform: translateX(-5px);\n}\n\n/* Volume slider */\ninput[type="range"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 100%;\n  height: 8px;\n  border-radius: 25px;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n  outline: none;\n  opacity: 0.8;\n  transition: opacity .2s, transform 0.3s;\n}\n\ninput[type="range"]:hover {\n  opacity: 1;\n  transform: scaleY(1.2);\n}\n\ninput[type="range"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  background: #fff;\n  no-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\ninput[type="range"]::-webkit-slider-thumb:hover {\n  no-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\ninput[type="range"]::-moz-range-thumb {\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  background: #fff;\n  no-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  transition: all 0.3s;\n  border: none;\n}\n\n/* Visualizer styles */\n.visualizer-container {\n  margin-top: 20px;\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 16px;\n  no-box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n  position: relative;\n  overflow: hidden;\n}\n\n.visualizer-container::before {\n  content: '';\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  background: linear-gradient(45deg, rgba(155, 89, 182, 0.05), rgba(52, 152, 219, 0.05));\n  z-index: -1;\n  filter: blur(10px);\n}\n\n.visualizer-container h3 {\n  margin-bottom: 15px;\n  color: #9b59b6;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n  display: inline-block;\n  position: relative;\n}\n\n.visualizer-container h3::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 0;\n  width: 50%;\n  height: 3px;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n}\n\n.visualizer-container canvas {\n  width: 100%;\n  height: auto;\n  border-radius: 8px;\n  no-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n}\n\n.visualizer-container canvas:hover {\n  transform: scale(1.02);\n}\n\n/* Button styles */\nbutton {\n  padding: 10px 20px;\n  margin: 5px;\n  border: none;\n  border-radius: 25px;\n  background: linear-gradient(45deg, #3498db, #9b59b6);\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 500;\n  position: relative;\n  overflow: hidden;\n  no-box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n}\n\nbutton::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  transition: all 0.5s ease;\n}\n\nbutton:hover {\n  //transform: translateY(-3px);\n  no-box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);\n}\n\nbutton:hover::after {\n  left: 100%;\n}\n\nbutton.delete-button {\n  background: linear-gradient(45deg, #ff7675, #e74c3c);\n}\n\nbutton.delete-button:hover {\n  background: linear-gradient(45deg, #e74c3c, #ff7675);\n}\n\nbutton.listening {\n  background: linear-gradient(45deg, #00b894, #55efc4);\n}\n\nbutton.listening:hover {\n  background: linear-gradient(45deg, #00b894, #00b894);\n}\n\n/* Music-related design elements */\n.music-icon::before {\n  content: '♪';\n  margin-right: 5px;\n  display: inline-block;\n  animation: bounce 1s infinite alternate;\n}\n\n@keyframes bounce {\n  from { transform: translateY(0); }\n  to { //transform: translateY(-5px); }\n}\n\n/* Angled section borders */\n.dashboard-item {\n  border-left: 4px solid #9b59b6;\n  position: relative;\n  padding-left: 15px;\n}\n\n.dashboard-item::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -4px;\n  width: 4px;\n  height: 100%;\n  background: linear-gradient(to bottom, #9b59b6, #3498db);\n  transform: skewY(-5deg);\n}\n\n.favorite-section h3,\n.active-source-section h3 {\n  color: #9b59b6;\n  position: relative;\n  display: inline-block;\n}\n\n.favorite-section h3::after,\n.active-source-section h3::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 0;\n  width: 70%;\n  height: 2px;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n}\n\n/* Improved flow and feel */\n.dashboard-content {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 25px;\n}\n\n.sources-column,\n.sinks-column {\n  flex: 1;\n  min-width: 300px;\n  transition: all 0.3s ease;\n}\n\n.sources-column:hover,\n.sinks-column:hover {\n  //transform: translateY(-5px);\n}\n\n/* Waveform background */\n.waveform-background {\n  position: relative;\n  overflow: hidden;\n}\n\n.waveform-background::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url(${g});\n  background-repeat: repeat-x;\n  background-size: 100% 100%;\n  opacity: 0.3;\n  z-index: -1;\n  animation: wave 10s linear infinite;\n}\n\n@keyframes wave {\n  0% { background-position-x: 0; }\n  100% { background-position-x: 1440px; }\n}\n\n/* Table hover effect */\ntr:hover {\n  background-color: rgba(155, 89, 182, 0.1);\n  transition: background-color 0.3s ease;\n}\n\n/* Favorite sources background color (light mode) */\n.favorite-sources,\n.favorite-sinks,\n.favorite-routes,\n.active-sources,\n.active-sinks,\n.active-routes {\n  background: linear-gradient(165deg, rgba(155, 89, 182, 0.08), rgba(52, 152, 219, 0.08));\n  border: 1px solid rgba(155, 89, 182, 0.2);\n  border-radius: 16px;\n  padding: 1.2rem;\n  margin-bottom: 1.5rem;\n  position: relative;\n  overflow: hidden;\n  no-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);\n}\n\n.favorite-sources::before,\n.favorite-sinks::before,\n.favorite-routes::before,\n.active-sources::before,\n.active-sinks::before,\n.active-routes::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n}\n\n/* Now playing/active sink section (light mode) */\n.status-section {\n  background: linear-gradient(165deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));\n  border: 1px solid rgba(46, 204, 113, 0.2);\n  border-radius: 16px;\n  padding: 1.2rem;\n  margin-bottom: 1.5rem;\n  position: relative;\n  overflow: hidden;\n  transform: skewY(-1deg);\n  no-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);\n}\n\n.status-section > * {\n  transform: skewY(1deg); /* Counter-skew for content */\n}\n\n.collapsible-section {\n  background-color: #fff;\n  border-radius: 16px;\n  margin-bottom: 1.5rem;\n  no-box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  transition: all 0.3s ease;\n  transform: perspective(500px) rotateX(1deg);\n}\n\n.collapsible-section:hover {\n  transform: perspective(500px) rotateX(0);\n  no-box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\n}\n\n.section-header {\n  background: linear-gradient(90deg, rgba(155, 89, 182, 0.1), rgba(52, 152, 219, 0.1));\n  padding: 0.7rem 1.2rem;\n  border-bottom: 1px solid rgba(155, 89, 182, 0.1);\n  border-radius: 16px 16px 0 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.section-content {\n  padding: 1.2rem;\n}\n\niframe {\n  border: 0px;\n  border-radius: 12px;\n  overflow: hidden;\n  no-box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n}\n\n/* Equalizer specific styling */\n.equalizer-container {\n  background: linear-gradient(165deg, rgba(155, 89, 182, 0.05), rgba(52, 152, 219, 0.05));\n  border-radius: 16px;\n  no-box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);\n  padding: 1.5rem;\n  position: relative;\n  overflow: hidden;\n}\n\n.equalizer-control {\n  margin-bottom: 1.5rem;\n  position: relative;\n}\n\n.equalizer-slider {\n  height: 150px;\n  margin: 0 8px;\n  position: relative;\n}\n\n.equalizer-slider::before {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n  no-box-shadow: 0 0 8px rgba(155, 89, 182, 0.4);\n}\n\n.eq-band-label {\n  font-size: 0.8rem;\n  color: #9b59b6;\n  font-weight: 500;\n  margin-top: 5px;\n  text-align: center;\n}\n\n/* Music player controls */\n.player-controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 15px;\n  margin: 1.5rem 0;\n}\n\n.player-controls button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: linear-gradient(45deg, #3498db, #9b59b6);\n  color: white;\n  border: none;\n  no-box-shadow: 0 4px 10px rgba(155, 89, 182, 0.3);\n  transition: all 0.3s ease;\n}\n\n.player-controls button:hover {\n  transform: scale(1.1);\n  no-box-shadow: 0 6px 12px rgba(155, 89, 182, 0.4);\n}\n\n.play-button {\n  width: 50px !important;\n  height: 50px !important;\n}\n\n.now-playing-info {\n  padding: 1rem;\n  border-radius: 12px;\n  background: linear-gradient(165deg, rgba(155, 89, 182, 0.05), rgba(52, 152, 219, 0.05));\n  display: flex;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.now-playing-album {\n  width: 60px;\n  height: 60px;\n  border-radius: 8px;\n  background: linear-gradient(45deg, #9b59b6, #3498db);\n  margin-right: 15px;\n  no-box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  position: relative;\n  overflow: hidden;\n}\n\n.now-playing-album::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 15px;\n  height: 15px;\n  background: white;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.now-playing-track {\n  flex: 1;\n}\n\n.track-name {\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 5px;\n}\n\n.track-artist {\n  font-size: 0.85rem;\n  color: #666;\n}\n\n.progress-bar {\n  height: 6px;\n  border-radius: 3px;\n  background: #e0e0e0;\n  margin: 1rem 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.progress-fill {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: linear-gradient(90deg, #9b59b6, #3498db);\n  width: 35%;\n  border-radius: 3px;\n}\n\n\n.chakra-modal__content-container, .chakra-modal__overlay {\n  pointer-events: none;\n}`,""]);const p=d},1897:e=>{e.exports='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none"><path fill="%239b59b6" fill-opacity="0.03" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,245.3C960,224,1056,160,1152,149.3C1248,139,1344,181,1392,202.7L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>'},2343:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(1601),a=n.n(r),o=n(6314),l=n.n(o)()(a());l.push([e.id,'/**\n * Dark mode styles for the application.\n */\n\n/**\n * Styles for the body element in dark mode, setting a dark background and light text color.\n */\nbody.dark-mode {\n  background-color: #1a1a1a;\n  color: #f0f0f0;\n}\n\n/**\n * Styles for the layout container in dark mode, maintaining a consistent dark background.\n */\n.dark-mode .layout {\n  background-color: #1a1a1a;\n}\n\n/**\n * Styles for the header element in dark mode, using a darker shade of blue and light text color.\n */\n.dark-mode header {\n  background-color: #2c3e50;\n}\n\n/**\n * Hover styles for navigation links in dark mode, changing background to a lighter blue and text to green.\n */\n.dark-mode nav ul li a:hover {\n  background-color: #34495e;\n  color: #2ecc71;\n}\n\n/**\n * Styles for the main content pseudo-element in dark mode, adding a subtle overlay effect.\n */\n.dark-mode main::before {\n  opacity: 0.02;\n}\n\n/**\n * Styles for the footer element in dark mode, using a darker shade of blue and light text color.\n */\n.dark-mode footer {\n  background-color: #2c3e50;\n}\n\n/**\n * Adjust colors for better contrast in status sections, using a darker background with lighter borders and text.\n */\n.dark-mode .status-section {\n  background-color: #14293e;\n  border: 1px solid #2c3e50;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n}\n\n/**\n * Styles for collapsible sections in dark mode, using a darker shade of blue and light text color.\n */\n.dark-mode .collapsible-section {\n  background-color: #2c3e50;\n  border: 1px solid #34495e;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n}\n\n/**\n * Styles for section headers in dark mode, using a lighter shade of blue and light text color.\n */\n.dark-mode .section-header {\n  background-color: #34495e;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid #4a4a4a;\n  border-radius: 8px 8px 0 0;\n}\n\n/**\n * Styles for section content in dark mode, maintaining a consistent background color and light text.\n */\n.dark-mode .section-content {\n  background-color: #2c3e50;\n  padding: 1rem;\n}\n\n/**\n * Styles for section header titles in dark mode, using green text for emphasis.\n */\n.dark-mode .section-header h3 {\n  color: #2ecc71;\n}\n\n/**\n * Styles for section subtitles in dark mode, using a lighter gray text color.\n */\n.dark-mode .section-subtitle {\n  color: #bdc3c7;\n}\n\n/**\n * Styles for expand toggle buttons in dark mode, using blue text for visibility.\n */\n.dark-mode .expand-toggle {\n  color: #3498db;\n}\n\n/**\n * Styles for paragraphs in Primary Source and now playing sections in dark mode, ensuring light text color.\n */\n.dark-mode .active-source-section p,\n.dark-mode .now-playing-section p {\n  color: #ecf0f1;\n}\n\n/**\n * Styles for buttons in dark mode, using blue background with white text for contrast.\n */\n.dark-mode button {\n  background-color: #3498db;\n  color: #f0f0f0;\n}\n\n/**\n * Styles for disabled buttons in dark mode, changing background to a darker orange and maintaining white text.\n */\n.dark-mode button.disabled {\n    background-color: #9b5814;\n    color: #f0f0f0;\n}\n\n/**\n * Styles for enabled buttons in dark mode, using green background with white text for emphasis.\n */\n.dark-mode button.enabled {\n    background-color: #149b58;\n    color: #f0f0f0;\n}\n\n/**\n * Hover styles for buttons in dark mode, changing background to a darker blue.\n */\n.dark-mode button:hover {\n  background-color: #2980b9;\n}\n\n/**\n * Styles for text inputs, number inputs, and select elements in dark mode, using a darker shade of blue with light text and borders.\n */\n.dark-mode input[type="text"],\n.dark-mode input[type="number"],\n.dark-mode select {\n  background-color: #2c3e50;\n  color: #f0f0f0;\n  border: 1px solid #4a4a4a;\n}\n\n/**\n * Styles for tables in dark mode, ensuring light text color.\n */\n.dark-mode table {\n  color: #f0f0f0;\n}\n\n/**\n * Styles for table headers in dark mode, using a darker shade of blue and light text color.\n */\n.dark-mode th {\n  background-color: #2c3e50;\n  color: #f0f0f0;\n}\n\n/**\n * Styles for table data cells in dark mode, adding a subtle border between rows.\n */\n.dark-mode td {\n  border-bottom: 1px solid #4a4a4a;\n}\n\n/**\n * Hover styles for table rows in dark mode, changing background to a lighter blue on hover.\n */\n.dark-mode tr:hover {\n  background-color: #34495e;\n}\n\n/**\n * Styles for cards in dark mode, using a darker shade of blue and light text color.\n */\n.dark-mode .card {\n  background-color: #2c3e50;\n}\n\n/**\n * Styles for headings in dark mode, using green text for emphasis.\n */\n.dark-mode h2,\n.dark-mode h3,\n.dark-mode h4 {\n  color: #2ecc71;\n}\n\n/**\n * Specific styles for level 2 headings in dark mode, adding a bottom border for separation.\n */\n.dark-mode h2 {\n  border-bottom: 2px solid #2ecc71;\n}\n\n/**\n * Styles for the dark mode toggle button, using blue background with white text and rounded corners.\n */\n.dark-mode-toggle {\n  background-color: #3498db;\n  color: #f0f0f0;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n}\n\n/**\n * Hover styles for the dark mode toggle button, changing background to a darker blue.\n */\n.dark-mode-toggle:hover {\n  background-color: #2980b9;\n}\n\n/**\n * Styles for the dark mode toggle button when in dark mode, using white background with dark text.\n */\n.dark-mode .dark-mode-toggle {\n  background-color: #f0f0f0;\n  color: #333;\n}\n\n/**\n * Hover styles for the dark mode toggle button when in dark mode, changing background to a lighter gray.\n */\n.dark-mode .dark-mode-toggle:hover {\n  background-color: #e0e0e0;\n}\n\n/**\n * Styles for favorite sections on the dashboard in dark mode, using consistent colors and borders.\n */\n.dark-mode .favorite-sources,\n.dark-mode .favorite-sinks,\n.dark-mode .favorite-routes,\n.dark-mode .active-sources,\n.dark-mode .active-sinks,\n.dark-mode .active-routes {\n  background-color: #2c3e50;\n  border: 1px solid #34495e;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n}\n\n/**\n * Styles for headings in favorite sections on the dashboard in dark mode, using green text for emphasis.\n */\n.dark-mode .favorite-sources h3,\n.dark-mode .favorite-sinks h3,\n.dark-mode .favorite-routes h3,\n.dark-mode .active-sources h3,\n.dark-mode .active-sinks h3,\n.dark-mode .active-routes h3 {\n  color: #2ecc71;\n}\n\n/**\n * Styles for the layout header in dark mode, using green text for headings.\n */\n.dark-mode .layout-header h1 {\n  color: #2ecc71;\n}\n\n/**\n * Styles for navigation links in the layout header in dark mode, ensuring light text color.\n */\n.dark-mode .layout-header nav ul li a {\n  color: #f0f0f0;\n}\n\n/**\n * Hover styles for navigation links in the layout header in dark mode, changing background to a lighter blue and text to green.\n */\n.dark-mode .layout-header nav ul li a:hover {\n  background-color: #34495e;\n  color: #2ecc71;\n}\n\n/**\n * Styles for subtext elements in dark mode, using a lighter gray text color.\n */\n.dark-mode .subtext {\n  color: #bdc3c7;\n}\n\n/**\n * Styles for control bar buttons in dark mode, using blue background with white text and rounded corners.\n */\n.dark-mode .control-bar button {\n  background-color: #3498db;\n  color: #f0f0f0;\n}\n\n/**\n * Hover styles for control bar buttons in dark mode, changing background to a darker blue.\n */\n.dark-mode .control-bar button:hover {\n  background-color: #2980b9;\n}\n\n/**\n * Styles for volume sliders in dark mode, using a lighter shade of blue and rounded corners.\n */\n.dark-mode .volume-slider {\n  background-color: #34495e;\n}\n\n/**\n * Styles for the thumb of volume sliders in dark mode (WebKit), using green color for visibility.\n */\n.dark-mode .volume-slider::-webkit-slider-thumb {\n  background-color: #2ecc71;\n}\n\n/**\n * Styles for the thumb of volume sliders in dark mode (Mozilla), using green color for visibility.\n */\n.dark-mode .volume-slider::-moz-range-thumb {\n  background-color: #2ecc71;\n}\n\n/**\n * Styles for not playing text elements in dark mode, using a lighter gray text color.\n */\n.dark-mode .not-playing {\n  color: #bdc3c7;\n}\n\n/**\n * Styles for active buttons and button-like elements in dark mode, using blue background with darker text.\n */\n.dark-mode .btn.active,\n.dark-mode button.active {\n  background-color: #008CBA;\n  color: #2c3e50;\n}\n\n/**\n * Hover styles for active buttons and button-like elements in dark mode, changing background to a lighter green.\n */\n.dark-mode .btn.active:hover,\n.dark-mode button.active:hover {\n  background-color: #27ae60;\n}\n\n/**\n * Styles for links in dark mode, using a light blue color with smooth transition effects.\n */\n.dark-mode a {\n  color: #b4d8fb;\n}\n\n/**\n * Hover styles for links in dark mode, changing text to green on hover.\n */\n.dark-mode a:hover {\n  color: #2ecc71;\n}\n\n/**\n * Styles for modal content in dark mode, using a darker shade of blue and light text color.\n */\n.dark-mode .modal-content {\n  background-color: #34495e;   \n}\n\n/**\n * Styles for expand and collapse routes buttons in dark mode, ensuring they inherit styles without additional modifications.\n */\n.dark-mode button.expand-routes, \n.dark-mode button.collapse-routes {\n  background-color: inherit !important;\n}\n',""]);const i=l},6293:e=>{e.exports='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none"><path fill="%239b59b6" fill-opacity="0.1" d="M0,224L48,208C96,192,192,160,288,154.7C384,149,480,171,576,165.3C672,160,768,128,864,117.3C960,107,1056,117,1152,138.7C1248,160,1344,192,1392,208L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>'},6656:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(1601),a=n.n(r),o=n(6314),l=n.n(o),i=n(4417),s=n.n(i),c=new URL(n(1897),n.b),u=l()(a()),d=s()(c);u.push([e.id,`/**\n * Styles for the redesigned FullMenu component.\n * This file contains all the styles for the FullMenu component and its subcomponents.\n * Updated with vibrant, music-themed styling with dynamic angles\n */\n\n/* ===== Main Layout ===== */\n.full-menu {\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;\n  display: flex;\n  flex-direction: column;\n  background-color: #f8f9fa;\n  color: #333;\n  position: relative;\n}\n\n/* Music-themed background with subtle animation */\n.full-menu::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(155, 89, 182, 0.03), rgba(52, 152, 219, 0.03));\n  background-size: 400% 400%;\n  animation: gradientBG 15s ease infinite;\n  z-index: -1;\n}\n\n@keyframes gradientBG {\n  0% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n  100% { background-position: 0% 50%; }\n}\n\n/* ===== Header Bar ===== */\n.header-bar {\n  display: flex;\n  align-items: center;\n  padding: 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #fff, #f8f8f8);\n  border-bottom: none;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n  z-index: 10;\n  position: relative;\n  transform: skewY(-1deg);\n  transform-origin: left;\n}\n\n.header-bar > * {\n  transform: skewY(1deg); /* Counter skew for content */\n}\n\n.header-bar::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background: linear-gradient(90deg, #9B59B6, #3498db);\n}\n\n.header-logo {\n  display: flex;\n  align-items: center;\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-right: 2rem;\n  position: relative;\n}\n\n.header-logo i {\n  margin-right: 0.5rem;\n  color: #9B59B6;\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n  100% { transform: scale(1); }\n}\n\n.search-bar {\n  flex: 1;\n  max-width: 400px;\n  position: relative;\n  margin-right: 1.5rem;\n}\n\n.search-bar input {\n  width: 100%;\n  padding: 0.5rem 1rem 0.5rem 2.5rem;\n  border: 2px solid #e0e0e0;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  background-color: rgba(255, 255, 255, 0.8);\n  transition: all 0.3s;\n}\n\n.search-bar input:focus {\n  outline: none;\n  border-color: #9B59B6;\n  background-color: #fff;\n  box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.1);\n  //transform: translateY(-2px);\n}\n\n.search-bar i {\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  //transform: translateY(-50%);\n  color: #9B59B6;\n}\n\n.global-controls {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n}\n\n.global-controls button {\n  background: none;\n  border: none;\n  color: #555;\n  font-size: 1.1rem;\n  padding: 0.5rem;\n  margin-left: 0.5rem;\n  cursor: pointer;\n  border-radius: 50%;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.global-controls button::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: radial-gradient(circle, rgba(155, 89, 182, 0.2) 0%, transparent 70%);\n  transition: all 0.5s ease;\n}\n\n.global-controls button:hover {\n  background-color: rgba(155, 89, 182, 0.1);\n  color: #9B59B6;\n  //transform: translateY(-2px);\n}\n\n.global-controls button:hover::after {\n  left: 0;\n}\n\n.user-settings {\n  margin-left: 1rem;\n  padding-left: 1rem;\n  border-left: 2px solid #e0e0e0;\n}\n\n/* ===== Main Content Area ===== */\n.main-content {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n/* ===== Navigation Sidebar ===== */\n.navigation-sidebar {\n  width: 250px;\n  background: linear-gradient(165deg, #fff, #f8f8f8);\n  border-right: none;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  transition: all 0.3s;\n  position: relative;\n  box-shadow: 4px 0 15px rgba(0, 0, 0, 0.03);\n  z-index: 5;\n  transform: skewX(-2deg) translateX(-5px);\n  transform-origin: top;\n  margin-right: -5px;\n}\n\n.navigation-sidebar > * {\n  transform: skewX(2deg); /* Counter skew for content */\n}\n\n.navigation-sidebar::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 3px;\n  height: 100%;\n  background: linear-gradient(to bottom, #9B59B6, #3498db);\n}\n\n.sidebar-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  border-bottom: 1px solid rgba(155, 89, 182, 0.1);\n}\n\n.sidebar-header h2 {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #9B59B6;\n  position: relative;\n}\n\n.sidebar-header h2::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 0;\n  width: 30px;\n  height: 3px;\n  background: linear-gradient(90deg, #9B59B6, #3498db);\n  border-radius: 3px;\n}\n\n.sidebar-toggle {\n  background: none;\n  border: none;\n  color: #9B59B6;\n  font-size: 1.1rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  display: none;\n}\n\n.sidebar-nav {\n  flex: 1;\n  padding: 1rem 0;\n}\n\n.nav-section {\n  margin-bottom: 1.5rem;\n}\n\n.nav-section h3 {\n  padding: 0 1rem;\n  margin: 0 0 0.5rem 0;\n  font-size: 0.8rem;\n  text-transform: uppercase;\n  color: #9B59B6;\n  letter-spacing: 0.5px;\n  position: relative;\n  display: inline-block;\n}\n\n.nav-section h3::after {\n  content: '';\n  position: absolute;\n  bottom: -3px;\n  left: 1rem;\n  width: 20px;\n  height: 2px;\n  background: linear-gradient(90deg, #9B59B6, #3498db);\n  border-radius: 2px;\n}\n\n.nav-item {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background: none;\n  border: none;\n  text-align: left;\n  font-size: 0.95rem;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  border-radius: 0 25px 25px 0;\n  margin-bottom: 2px;\n}\n\n.nav-item::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 0;\n  background: linear-gradient(90deg, rgba(155, 89, 182, 0.1), transparent);\n  transition: all 0.3s ease;\n}\n\n.nav-item i {\n  margin-right: 0.75rem;\n  width: 1.25rem;\n  text-align: center;\n  color: #9B59B6;\n  position: relative;\n  z-index: 1;\n  transition: all 0.3s;\n}\n\n.nav-item .nav-label {\n  flex: 1;\n  position: relative;\n  z-index: 1;\n}\n\n.nav-item .nav-badge {\n  background-color: rgba(155, 89, 182, 0.1);\n  color: #9B59B6;\n  font-size: 0.75rem;\n  padding: 0.1rem 0.5rem;\n  border-radius: 10px;\n  margin-left: 0.5rem;\n  position: relative;\n  z-index: 1;\n}\n\n.nav-item:hover {\n  color: #9B59B6;\n  transform: translateX(5px);\n}\n\n.nav-item:hover::before {\n  width: 100%;\n}\n\n.nav-item:hover i {\n  transform: scale(1.2);\n}\n\n.nav-item.active {\n  background: linear-gradient(90deg, rgba(155, 89, 182, 0.2), rgba(155, 89, 182, 0.05));\n  color: #9B59B6;\n  font-weight: 500;\n}\n\n.nav-item.active::before {\n  width: 100%;\n}\n\n.nav-item.active i {\n  color: #9B59B6;\n}\n\n.sidebar-footer {\n  padding: 1rem;\n  border-top: 1px solid rgba(155, 89, 182, 0.1);\n}\n\n.desktop-menu-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  padding: 0.75rem;\n  background: linear-gradient(45deg, #9B59B6, #3498db);\n  border: none;\n  border-radius: 25px;\n  color: white;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 4px 10px rgba(155, 89, 182, 0.3);\n}\n\n.desktop-menu-button::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  transition: all 0.5s ease;\n}\n\n.desktop-menu-button i {\n  margin-right: 0.5rem;\n}\n\n.desktop-menu-button:hover {\n  //transform: translateY(-3px);\n  box-shadow: 0 6px 15px rgba(155, 89, 182, 0.4);\n}\n\n.desktop-menu-button:hover::after {\n  left: 100%;\n}\n\n/* ===== Content Panel ===== */\n.content-panel {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n  z-index: 1;\n}\n\n.content-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid rgba(155, 89, 182, 0.1);\n  background-color: #fff;\n  position: relative;\n}\n\n.content-header::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 1px;\n  background: linear-gradient(90deg, #9B59B6, #3498db, transparent);\n}\n\n.breadcrumbs {\n  display: flex;\n  align-items: center;\n  font-size: 0.9rem;\n  color: #888;\n}\n\n.breadcrumbs span:last-child {\n  color: #9B59B6;\n  font-weight: 500;\n}\n\n.view-controls {\n  display: flex;\n  align-items: center;\n}\n\n.view-button {\n  background: none;\n  border: none;\n  color: #555;\n  font-size: 1rem;\n  padding: 0.4rem 0.6rem;\n  margin-left: 0.5rem;\n  cursor: pointer;\n  border-radius: 20px;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.view-button::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: radial-gradient(circle, rgba(155, 89, 182, 0.2) 0%, transparent 70%);\n  transition: all 0.5s ease;\n}\n\n.view-button:hover {\n  color: #9B59B6;\n  background-color: rgba(155, 89, 182, 0.05);\n  //transform: translateY(-2px);\n}\n\n.view-button:hover::after {\n  left: 0;\n}\n\n.view-button.active {\n  background: linear-gradient(45deg, rgba(155, 89, 182, 0.1), rgba(52, 152, 219, 0.1));\n  color: #9B59B6;\n  box-shadow: 0 2px 5px rgba(155, 89, 182, 0.1);\n}\n\n.sort-control {\n  display: flex;\n  align-items: center;\n  margin-left: 1rem;\n}\n\n.sort-control label {\n  margin-right: 0.5rem;\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.sort-control select {\n  padding: 0.4rem 0.6rem;\n  border: 1px solid #e0e0e0;\n  border-radius: 20px;\n  background-color: #fff;\n  font-size: 0.9rem;\n  color: #333;\n  transition: all 0.3s;\n}\n\n.sort-control select:focus {\n  border-color: #9B59B6;\n  box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.1);\n  outline: none;\n}\n\n.content-body {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n  background-color: #f8f9fa;\n  position: relative;\n}\n\n/* Music wave background effect */\n.content-body::before {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 150px;\n  background-image: url(${d});\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n  background-position: bottom;\n  z-index: -1;\n  opacity: 1;\n}\n\n/* ===== Card Grid ===== */\n.card-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 1.5rem;\n}\n\n/* ===== Resource Card ===== */\n.resource-card {\n  background-color: #fff;\n  border-radius: 16px;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  transition: all 0.3s;\n  display: flex;\n  flex-direction: column;\n  border: none;\n  position: relative;\n  transform: rotate(-1deg);\n}\n\n.resource-card > * {\n  transform: rotate(1deg); /* Counter-rotation for content */\n}\n\n.resource-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  background: linear-gradient(90deg, #9B59B6, #3498db);\n  z-index: 1;\n}\n\n.resource-card:hover {\n  box-shadow: 0 15px 30px rgba(155, 89, 182, 0.15);\n  transform: rotate(-1deg) translateY(-5px);\n}\n\n.resource-card.active {\n  border: none;\n  box-shadow: 0 15px 30px rgba(155, 89, 182, 0.2);\n}\n\n.resource-card.active::before {\n  height: 7px;\n  background: linear-gradient(90deg, #9B59B6, #E91E63);\n}\n\n.card-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  border-bottom: 1px solid rgba(155, 89, 182, 0.1);\n  position: relative;\n}\n\n.card-title {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 500;\n  color: #9B59B6;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  position: relative;\n  padding-left: 22px;\n}\n\n/* Music note icon for titles */\n.card-title::before {\n  content: '♪';\n  position: absolute;\n  left: 0;\n  top: 50%;\n  //transform: translateY(-50%);\n  color: #9B59B6;\n  font-size: 1.2rem;\n  animation: bounce 1s infinite alternate;\n}\n\n@keyframes bounce {\n  from { //transform: translateY(-50%); }\n  to { //transform: translateY(-60%); }\n}\n\n.card-actions {\n  display: flex;\n  align-items: center;\n}\n\n.star-button {\n  background: none;\n  border: none;\n  color: #ccc;\n  font-size: 1.1rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  transition: all 0.3s;\n}\n\n.star-button:hover {\n  color: #F1C40F;\n  transform: rotate(72deg) scale(1.2);\n}\n\n.star-button.starred {\n  color: #F1C40F;\n  animation: starPulse 1.5s infinite alternate;\n}\n\n@keyframes starPulse {\n  0% { transform: scale(1); }\n  100% { transform: scale(1.15); }\n}\n\n.star-button .filled {\n  color: #F1C40F;\n}\n\n.menu-button {\n  background: none;\n  border: none;\n  color: #888;\n  font-size: 1rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  margin-left: 0.5rem;\n  transition: all 0.3s;\n  border-radius: 50%;\n}\n\n.menu-button:hover {\n  color: #9B59B6;\n  background-color: rgba(155, 89, 182, 0.1);\n  transform: rotate(90deg);\n}\n\n.card-body {\n  padding: 1rem;\n  flex: 1;\n}\n\n.status-indicator {\n  margin-bottom: 0.75rem;\n}\n\n.status-badge {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 500;\n  transform: skewX(-5deg);\n}\n\n.status-badge > span {\n  display: inline-block;\n  transform: skewX(5deg); /* Counter-skew for text */\n}\n\n.status-badge.enabled {\n  background: linear-gradient(45deg, #2ecc71, #1abc9c);\n  color: white;\n  box-shadow: 0 2px 5px rgba(46, 204, 113, 0.3);\n}\n\n.status-badge.disabled {\n  background: linear-gradient(45deg, #e74c3c, #c0392b);\n  color: white;\n  box-shadow: 0 2px 5px rgba(231, 76, 60, 0.3);\n}\n\n.source-details,\n.sink-details,\n.route-details {\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.detail-item {\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  transition: all 0.2s;\n}\n\n.detail-item:hover {\n  transform: translateX(5px);\n}\n\n.detail-item i {\n  width: 1.25rem;\n  margin-right: 0.5rem;\n  color: #9B59B6;\n}\n\n.card-footer {\n  padding: 1rem;\n  border-top: 1px solid rgba(155, 89, 182, 0.1);\n  background: linear-gradient(165deg, rgba(155, 89, 182, 0.02), rgba(52, 152, 219, 0.02));\n}\n\n.control-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n\n.toggle-button {\n  padding: 0.5rem 0.75rem;\n  border: none;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.toggle-button::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  transition: all 0.5s ease;\n}\n\n.toggle-button.enabled {\n  background: linear-gradient(45deg, #2ecc71, #1abc9c);\n  color: white;\n  box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3);\n}\n\n.toggle-button.enabled:hover {\n  //transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(46, 204, 113, 0.4);\n}\n\n.toggle-button.disabled {\n  background: linear-gradient(45deg, #e74c3c, #c0392b);\n  color: white;\n  box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);\n}\n\n.toggle-button.disabled:hover {\n  //transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(231, 76, 60, 0.4);\n}\n\n.toggle-button:hover::after {\n  left: 100%;\n}\n\n/* Control button */\n.control-button {\n  padding: 0.5rem;\n  border: none;\n  border-radius: 50%;\n  background: linear-gradient(45deg, #3498db, #9B59B6);\n  color: white;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);\n}\n\n.control-button:hover {\n  //transform: translateY(-2px) rotate(5deg);\n  box-shadow: 0 6px 12px rgba(52, 152, 219, 0.4);\n}\n\n/* Volume slider */\n.volume-slider {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 100%;\n  height: 6px;\n  border-radius: 3px;\n  background: linear-gradient(90deg, #9B59B6, #3498db);\n  outline: none;\n  opacity: 0.8;\n  transition: all 0.3s;\n  margin: 1rem 0;\n}\n\n.volume-slider:hover {\n  opacity: 1;\n  transform: scaleY(1.2);\n}\n\n.volume-slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  background: white;\n  cursor: pointer;\n  border: 2px solid #9B59B6;\n  box-shadow: 0 2px 5px rgba(155, 89, 182, 0.3);\n  transition: all 0.3s;\n}\n\n.volume-slider::-webkit-slider-thumb:hover {\n  transform: scale(1.2);\n  box-shadow: 0 2px 8px rgba(155, 89, 182, 0.4);\n}\n\n.volume-slider::-moz-range-thumb {\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  background: white;\n  cursor: pointer;\n  border: 2px solid #9B59B6;\n  box-shadow: 0 2px 5px rgba(155, 89, 182, 0.3);\n  transition: all 0.3s;\n}\n\n/* Equalizer button */\n.equalizer-button {\n  padding: 0.5rem;\n  border: none;\n  border-radius: 50%;\n  background: linear-gradient(45deg, #FF5722, #F1C40F);\n  color: white;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 10px rgba(255, 87, 34, 0.3);\n}\n\n.equalizer-button:hover {\n  //transform: translateY(-2px) rotate(-5deg);\n  box-shadow: 0 6px 12px rgba(255, 87, 34, 0.4);\n}\n\n/* VNC button */\n.vnc-button {\n  padding: 0.5rem;\n  border: none;\n  border-radius: 50%;\n  background: linear-gradient(45deg, #1ABC9C, #2ecc71);\n  color: white;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 10px rgba(26, 188, 156, 0.3);\n}\n\n.vnc-button:hover {\n  //transform: translateY(-2px) rotate(5deg);\n  box-shadow: 0 6px 12px rgba(26, 188, 156, 0.4);\n}\n\n/* Listen button */\n.listen-button {\n  padding: 0.5rem 0.75rem;\n  border: none;\n  border-radius: 20px;\n  background: linear-gradient(45deg, #9B59B6, #8E44AD);\n  color: white;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 4px 10px rgba(155, 89, 182, 0.3);\n  position: relative;\n  overflow: hidden;\n}\n\n.listen-button i {\n  margin-right: 0.4rem;\n}\n\n.listen-button::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  transition: all 0.5s ease;\n}\n\n.listen-button:hover {\n  //transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(155, 89, 182, 0.4);\n}\n\n.listen-button:hover::after {\n  left: 100%;\n}\n\n.listen-button.active {\n  background: linear-gradient(45deg, #8E44AD, #E91E63);\n  animation: pulse 2s infinite;\n}\n\n/* Visualize button */\n.visualize-button {\n  padding: 0.5rem 0.75rem;\n  border: none;\n  border-radius: 20px;\n  background: linear-gradient(45deg, #3498db, #2980b9);\n  color: white;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);\n  position: relative;\n  overflow: hidden;\n}\n\n.visualize-button i {\n  margin-right: 0.4rem;\n}\n\n.visualize-button::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  transition: all 0.5s ease;\n}\n\n.visualize-button:hover {\n  //transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(52, 152, 219, 0.4);\n}\n\n.visualize-button:hover::after {\n  left: 100%;\n}\n\n/* Dark mode adjustments */\n.dark-mode.full-menu {\n  background-color: #1a1a2e;\n  color: #e0e0e0;\n}\n\n.dark-mode .header-bar {\n  background: linear-gradient(135deg, #232342, #1a1a2e);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n.dark-mode .search-bar input {\n  background-color: rgba(40, 40, 70, 0.5);\n  border-color: #444464;\n  color: #e0e0e0;\n}\n\n.dark-mode .search-bar input:focus {\n  background-color: rgba(50, 50, 80, 0.7);\n  border-color: #9B59B6;\n}\n\n.dark-mode .navigation-sidebar {\n  background: linear-gradient(165deg, #232342, #1a1a2e);\n  box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1);\n}\n\n.dark-mode .sidebar-header {\n  border-bottom-color: rgba(155, 89, 182, 0.2);\n}\n\n.dark-mode .nav-item {\n  color: #b0b0d0;\n}\n\n.dark-mode .nav-item:hover {\n  color: #e0e0e0;\n}\n\n.dark-mode .nav-item.active {\n  background: linear-gradient(90deg, rgba(155, 89, 182, 0.3), rgba(155, 89, 182, 0.1));\n  color: #e0e0e0;\n}\n\n.dark-mode .content-header {\n  background-color: #232342;\n  border-bottom-color: rgba(155, 89, 182, 0.2);\n}\n\n.dark-mode .breadcrumbs {\n  color: #a0a0c0;\n}\n\n.dark-mode .content-body {\n  background-color: #1a1a2e;\n}\n\n.dark-mode .resource-card {\n  background-color: #232342;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\n}\n\n.dark-mode .card-header {\n  border-bottom-color: rgba(155, 89, 182, 0.2);\n}\n\n.dark-mode .card-title {\n  color: #b392d7;\n}\n\n.dark-mode .detail-item {\n  color: #a0a0c0;\n}\n\n.dark-mode .card-footer {\n  background: linear-gradient(165deg, rgba(155, 89, 182, 0.05), rgba(52, 152, 219, 0.05));\n  border-top-color: rgba(155, 89, 182, 0.2);\n}\n\n/* Error message */\n.error-message {\n  background: linear-gradient(45deg, #ff7675, #e74c3c);\n  color: white;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  font-weight: 500;\n  box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);\n  transform: rotate(-1deg);\n}\n\n/* List view styles */\n.list-view {\n  margin-top: 1rem;\n}\n\n.list-item {\n  display: flex;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background-color: #fff;\n  border-radius: 12px;\n  margin-bottom: 0.75rem;\n  transition: all 0.3s;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.03);\n  position: relative;\n  overflow: hidden;\n  transform: skewX(-1deg);\n}\n\n.list-item > * {\n  transform: skewX(1deg);\n}\n\n.list-item::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 4px;\n  height: 100%;\n  background: linear-gradient(to bottom, #9B59B6, #3498db);\n  opacity: 0;\n  transition: all 0.3s;\n}\n\n.list-item:hover {\n  transform: skewX(-1deg) translateX(5px);\n  box-shadow: 0 6px 12px rgba(155, 89, 182, 0.1);\n}\n\n.list-item:hover::before {\n  opacity: 1;\n}\n\n.list-item.active {\n  box-shadow: 0 6px 12px rgba(155, 89, 182, 0.15);\n}\n\n.list-item.active::before {\n  opacity: 1;\n  width: 6px;\n}\n\n.dark-mode .list-item {\n  background-color: #232342;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* Dashboard specific styles */\n.dashboard-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: 1.5rem;\n}\n\n.dashboard-card {\n  background-color: #fff;\n  border-radius: 16px;\n  overflow: hidden;\n  transition: all 0.3s;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);\n  position: relative;\n  transform: perspective(500px) rotateY(1deg);\n}\n\n.dashboard-card:hover {\n  transform: perspective(500px) rotateY(1deg) translateY(-5px);\n  box-shadow: 0 15px 30px rgba(155, 89, 182, 0.15);\n}\n\n.dashboard-card-header {\n  background: linear-gradient(45deg, rgba(155, 89, 182, 0.05), rgba(52, 152, 219, 0.05));\n  padding: 1rem;\n  border-bottom: 1px solid rgba(155, 89, 182, 0.1);\n  position: relative;\n}\n\n.dashboard-card-header::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background: linear-gradient(90deg, #9B59B6, #3498db);\n}\n\n.dashboard-card-header h3 {\n  margin: 0;\n  font-size: 1.1rem;\n  color: #9B59B6;\n  display: flex;\n  align-items: center;\n}\n\n.dashboard-card-header h3 i {\n  margin-right: 0.5rem;\n  font-size: 1.2rem;\n}\n\n.dashboard-card-body {\n  padding: 1rem;\n}\n\n.dark-mode .dashboard-card {\n  background-color: #232342;\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\n}\n\n.dark-mode .dashboard-card-header {\n  background: linear-gradient(45deg, rgba(155, 89, 182, 0.1), rgba(52, 152, 219, 0.1));\n  border-bottom-color: rgba(155, 89, 182, 0.2);\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n  .navigation-sidebar {\n    position: fixed;\n    left: -250px;\n    top: 0;\n    bottom: 0;\n    z-index: 100;\n    width: 250px;\n    transform: none;\n  }\n\n  .navigation-sidebar > * {\n    transform: none;\n  }\n\n  .navigation-sidebar.open {\n    left: 0;\n  }\n\n  .sidebar-toggle {\n    display: block;\n  }\n\n  .header-bar {\n    padding: 0.5rem 1rem;\n  }\n\n  .header-logo {\n    font-size: 1.2rem;\n  }\n\n  .search-bar {\n    max-width: 200px;\n  }\n\n  .content-body {\n    padding: 1rem;\n  }\n\n  .card-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (min-width: 769px) and (max-width: 1024px) {\n  .card-grid {\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  }\n}\n\n/* Blinking animation for the active source */\n@keyframes blink {\n  0% { opacity: 1; }\n  50% { opacity: 0.6; }\n  100% { opacity: 1; }\n}\n\n.active-source-indicator {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  background-color: #2ecc71;\n  border-radius: 50%;\n  margin-right: 0.5rem;\n  animation: blink 1.5s infinite;\n  box-shadow: 0 0 5px #2ecc71;\n}\n\n/* Music visualizer wave effect for active items */\n.music-wave-effect {\n  position: relative;\n  overflow: hidden;\n}\n\n.music-wave-effect::after {\n  content: '';\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  width: 100%;\n  height: 4px;\n  background: linear-gradient(90deg, #9B59B6, #3498db, #9B59B6);\n  background-size: 200% 100%;\n  animation: waveMove 2s linear infinite;\n}\n\n@keyframes waveMove {\n  0% { background-position: 0% 0%; }\n  100% { background-position: 200% 0%; }\n}`,""]);const m=u},6840:e=>{e.exports='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none"><path fill="%239b59b6" fill-opacity="0.2" d="M0,128L48,144C96,160,192,192,288,186.7C384,181,480,139,576,149.3C672,160,768,224,864,218.7C960,213,1056,139,1152,133.3C1248,128,1344,192,1392,224L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>'},8983:(e,t,n)=>{var r=n(6540),a=n(5338),o=n(9065);const l=(0,n(3628).oY)({colors:{brand:{50:"#e6f7ef",100:"#c3ecd8",200:"#9fe0c0",300:"#7bd4a8",400:"#57c890",500:"#2ecc71",600:"#27ae60",700:"#208e4e",800:"#196f3d",900:"#11502b"},secondary:{50:"#e8f4f8",100:"#c7e5ee",200:"#a5d5e4",300:"#84c5da",400:"#62b6d0",500:"#3498db",600:"#2980b9",700:"#216897",800:"#195074",900:"#123852"},dark:{50:"#e6e8ea",100:"#c1c6cb",200:"#9ba4ab",300:"#75828c",400:"#4f606c",500:"#34495e",600:"#2c3e50",700:"#243342",800:"#1c2833",900:"#141d25"},error:{500:"#e74c3c"},music:{purple:"#8E44AD",violet:"#9B59B6",pink:"#E91E63",orange:"#FF5722",yellow:"#F1C40F",aqua:"#1ABC9C",lime:"#CDDC39"},gradients:{primary:"linear-gradient(45deg, #9B59B6, #3498db)",secondary:"linear-gradient(135deg, #FF5722, #F1C40F)",accent:"linear-gradient(225deg, #1ABC9C, #2ecc71)"}},styles:{global:e=>({body:{bg:"dark"===e.colorMode?"gray.900":"gray.50",color:"dark"===e.colorMode?"gray.100":"dark.600",transition:"background-color 0.3s ease"}})},components:{Button:{baseStyle:{fontWeight:"normal",borderRadius:"4px",transition:"all 0.3s ease",_hover:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},variants:{solid:e=>({bg:"dark"===e.colorMode?"secondary.600":"secondary.500",color:"white",_hover:{bg:"dark"===e.colorMode?"secondary.700":"secondary.600"}}),primary:e=>({bg:"dark"===e.colorMode?"brand.600":"brand.500",color:"white",_hover:{bg:"dark"===e.colorMode?"brand.700":"brand.600"}}),error:{bg:"error.500",color:"white"},ghost:e=>({bg:"transparent",color:"dark"===e.colorMode?"gray.200":"gray.700",_hover:{bg:"dark"===e.colorMode?"whiteAlpha.200":"blackAlpha.100"}}),music:{bgGradient:"linear-gradient(45deg, #9B59B6, #3498db)",color:"white",borderRadius:"25px",_hover:{bgGradient:"linear-gradient(45deg, #8E44AD, #2980b9)",transform:"scale(1.05)"}}},defaultProps:{variant:"solid"}},Heading:{baseStyle:e=>({color:"dark"===e.colorMode?"gray.100":"dark.600"})},Table:{variants:{simple:e=>({th:{bg:"dark"===e.colorMode?"gray.700":"gray.100",color:"dark"===e.colorMode?"gray.100":"dark.600",fontWeight:"bold"},tr:{_hover:{bg:"dark"===e.colorMode?"gray.600":"gray.50"}},td:{borderBottom:"1px solid",borderColor:"dark"===e.colorMode?"gray.600":"gray.200"}})},defaultProps:{variant:"simple"}},Box:{baseStyle:e=>({bg:"dark"===e.colorMode?"gray.800":"white",borderRadius:"8px",transition:"all 0.3s ease"})},Flex:{baseStyle:e=>({bg:"dark"===e.colorMode?"gray.800":"white"})},Card:{baseStyle:{container:{borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease",_hover:{boxShadow:"0 8px 16px rgba(0, 0, 0, 0.1)"}}}}},fonts:{body:"'Poppins', system-ui, sans-serif",heading:"'Poppins', system-ui, sans-serif"},config:{initialColorMode:"light",useSystemColorMode:!1},shadows:{outline:"0 0 0 3px rgba(62, 152, 199, 0.6)"},radii:{sm:"4px",md:"8px",lg:"12px",xl:"16px","2xl":"24px",full:"9999px"}});var i=n(4976),s=n(7767),c=n(1083);let u=null,d=null,m=null;const g=()=>{if(u&&u.readyState===WebSocket.OPEN)return;m&&(clearTimeout(m),m=null);const e=window.location.host,t=`${"https:"===window.location.protocol?"wss:":"ws:"}//${e}/ws/config`;console.log("Creating WebSocket connection to:",t);try{u=new WebSocket(t),u.onmessage=e=>{if(d)try{const t=JSON.parse(e.data);console.log("WebSocket update received:",t),d(t)}catch(e){console.error("Error parsing WebSocket message:",e)}},u.onclose=e=>{console.log(`WebSocket closed (code: ${e.code}, reason: ${e.reason})`),u=null,m=setTimeout((()=>{console.log("Attempting to reconnect WebSocket..."),g()}),5e3)},u.onerror=e=>{console.error("WebSocket error:",e)},u.onopen=()=>{console.log("WebSocket connected successfully")}}catch(e){console.error("Error creating WebSocket:",e),m=setTimeout((()=>{console.log("Attempting to reconnect WebSocket..."),g()}),5e3)}},p={setWebSocketHandler:async e=>{d=e,g();try{const[t,n,r]=await Promise.all([c.A.get("/sources"),c.A.get("/sinks"),c.A.get("/routes")]);e({sources:t.data,sinks:n.data,routes:r.data})}catch(e){console.error("Error fetching initial state:",e)}},getSources:()=>c.A.get("/sources"),getSinks:()=>c.A.get("/sinks"),getRoutes:()=>c.A.get("/routes"),addSource:e=>c.A.post("/sources",e),addSink:e=>c.A.post("/sinks",e),addRoute:e=>c.A.post("/routes",e),updateSource:(e,t)=>c.A.put(`/sources/${e}`,t),updateSink:(e,t)=>c.A.put(`/sinks/${e}`,t),updateRoute:(e,t)=>c.A.put(`/routes/${e}`,t),deleteSource:e=>c.A.delete(`/sources/${e}`),deleteSink:e=>c.A.delete(`/sinks/${e}`),deleteRoute:e=>c.A.delete(`/routes/${e}`),enableSource:e=>c.A.get(`/sources/${e}/enable`),disableSource:e=>c.A.get(`/sources/${e}/disable`),enableSink:e=>c.A.get(`/sinks/${e}/enable`),disableSink:e=>c.A.get(`/sinks/${e}/disable`),enableRoute:e=>c.A.get(`/routes/${e}/enable`),disableRoute:e=>c.A.get(`/routes/${e}/disable`),updateSourceVolume:(e,t)=>c.A.get(`/sources/${e}/volume/${t}`),updateSinkVolume:(e,t)=>c.A.get(`/sinks/${e}/volume/${t}`),updateRouteVolume:(e,t)=>c.A.get(`/routes/${e}/volume/${t}`),updateSourceDelay:(e,t)=>c.A.get(`/sources/${e}/delay/${t}`),updateSinkDelay:(e,t)=>c.A.get(`/sinks/${e}/delay/${t}`),updateRouteDelay:(e,t)=>c.A.get(`/routes/${e}/delay/${t}`),updateSourceTimeshift:(e,t)=>c.A.get(`/sources/${e}/timeshift/${t}`),updateSinkTimeshift:(e,t)=>c.A.get(`/sinks/${e}/timeshift/${t}`),updateRouteTimeshift:(e,t)=>c.A.get(`/routes/${e}/timeshift/${t}`),updateSourceEqualizer:(e,t)=>c.A.post(`/sources/${e}/equalizer`,t),updateSinkEqualizer:(e,t)=>c.A.post(`/sinks/${e}/equalizer`,t),updateRouteEqualizer:(e,t)=>c.A.post(`/routes/${e}/equalizer`,t),reorderSource:(e,t)=>c.A.get(`/sources/${e}/reorder/${t}`),reorderSink:(e,t)=>c.A.get(`/sinks/${e}/reorder/${t}`),reorderRoute:(e,t)=>c.A.get(`/routes/${e}/reorder/${t}`),controlSource:(e,t)=>c.A.get(`/sources/${e}/${t}`),getSinkStreamUrl:e=>`/stream/${e}/?random=${Math.random()}`,getVncUrl:e=>`/site/vnc/${e}`,saveEqualizer:(e,t)=>{const n={...t};return n.name=e,c.A.post("/equalizers/",n)},listEqualizers:()=>c.A.get("/equalizers/"),deleteEqualizer:e=>c.A.delete(`/equalizers/${e}`),updateEqualizer:(e,t,n)=>c.A.post(`/equalizers/${e}/${t}`,n),updateSourceSpeakerLayout:(e,t,n)=>c.A.post(`/api/sources/${encodeURIComponent(e)}/speaker_layout/${t}`,n),updateSinkSpeakerLayout:(e,t,n)=>c.A.post(`/api/sinks/${encodeURIComponent(e)}/speaker_layout/${t}`,n),updateRouteSpeakerLayout:(e,t,n)=>c.A.post(`/api/routes/${encodeURIComponent(e)}/speaker_layout/${t}`,n),getStats:()=>c.A.get("/api/stats"),getSettings:()=>c.A.get("/api/settings"),updateSettings:e=>c.A.post("/api/settings",e)},b="/site/static/output_silence.mp3",h=(0,r.createContext)(void 0),f=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(new Map),i=(0,r.useRef)(new Map),s=(0,r.useRef)(new Map),[c,u]=(0,r.useState)(new Map),[d,m]=(0,r.useState)(null),g=(0,r.useRef)(null),f=(0,r.useRef)(null),[E,k]=(0,r.useState)(null),[v,S]=(0,r.useState)(null),[y,x]=(0,r.useState)(null),[w,C]=(0,r.useState)(new Map),[z,T]=(0,r.useState)([]),[$,R]=(0,r.useState)([]),[_,I]=(0,r.useState)([]),[A,N]=(0,r.useState)(null),[M,U]=(0,r.useState)(!1),[P,W]=(0,r.useState)(!1),[D,L]=(0,r.useState)(null),[O,V]=(0,r.useState)(null),[q,F]=(0,r.useState)(null),[B,j]=(0,r.useState)(!1),[J,H]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(new Set),[K,Q]=(0,r.useState)(!0),[X,Z]=(0,r.useState)(new Map),ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;const r=(window.screen.width-t)/2,a=(window.screen.height-n)/2;window.open(e,"_blank",`width=${t},height=${n},left=${r},top=${a}`)},te=async()=>{console.log("Fetching initial data...");try{const[e,t,n]=await Promise.all([p.getSources(),p.getSinks(),p.getRoutes()]);T(Object.values(e.data)),R(Object.values(t.data)),I(Object.values(n.data)),console.log("Initial data fetched successfully"),j(!1),H(!0)}catch(e){console.error("Error fetching initial data:",e)}};(0,r.useEffect)((()=>{const e=localStorage.getItem("activeSource");e&&a(e),p.setWebSocketHandler((e=>{(e=>{if(console.log("Processing WebSocket update:",e),!J&&e.sources&&Object.keys(e.sources).length>0&&e.sinks&&Object.keys(e.sinks).length>0&&e.routes&&Object.keys(e.routes).length>0)return console.log("Initial data from WebSocket - using direct API data instead"),void H(!0);!J&&(e.sources||e.sinks||e.routes)&&H(!0),e.sources&&Object.keys(e.sources).length>0&&T((t=>{const n=new Map;return t.forEach((e=>{n.set(e.name,e)})),Object.entries(e.sources).forEach((e=>{let[t,r]=e;const a=!n.has(t);n.set(t,r),a?console.log(`Added new source: ${t}`):console.log(`Updated existing source: ${t}`)})),Array.from(n.values())})),e.sinks&&Object.keys(e.sinks).length>0&&R((t=>{const n=new Map;return t.forEach((e=>{n.set(e.name,e)})),Object.entries(e.sinks).forEach((e=>{let[t,r]=e;const a=!n.has(t);n.set(t,r),a?console.log(`Added new sink: ${t}`):console.log(`Updated existing sink: ${t}`)})),Array.from(n.values())})),e.routes&&Object.keys(e.routes).length>0&&I((t=>{const n=new Map;return t.forEach((e=>{n.set(e.name,e)})),Object.entries(e.routes).forEach((e=>{let[t,r]=e;const a=!n.has(t);n.set(t,r),a?console.log(`Added new route: ${t}`):console.log(`Updated existing route: ${t}`)})),Array.from(n.values())})),e.removals&&(e.removals.sources&&e.removals.sources.length>0&&T((t=>{const n=t.filter((t=>!e.removals.sources.includes(t.name)));return e.removals.sources.forEach((e=>{console.log(`Removed source: ${e}`)})),n})),e.removals.sinks&&e.removals.sinks.length>0&&R((t=>{const n=t.filter((t=>!e.removals.sinks.includes(t.name)));return e.removals.sinks.forEach((e=>{console.log(`Removed sink: ${e}`)})),n})),e.removals.routes&&e.removals.routes.length>0&&I((t=>{const n=t.filter((t=>!e.removals.routes.includes(t.name)));return e.removals.routes.forEach((e=>{console.log(`Removed route: ${e}`)})),n})))})(e)})),te();const t=setInterval((()=>{B&&(console.log("Performing full data refresh"),te())}),3e4);return()=>{clearInterval(t)}}),[B]),(0,r.useEffect)((()=>{const e=b;g.current&&(g.current.src=e,g.current.play().then((()=>{navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Imperial March",artist:"John Williams",album:"Star Wars",artwork:[{src:"https://upload.wikimedia.org/wikipedia/en/3/32/Star_Wars_-_The_Empire_Strikes_Back_%28soundtrack%29.jpg",sizes:"512x512",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",(()=>g.current?.play())),navigator.mediaSession.setActionHandler("pause",(()=>g.current?.pause())))})).catch((e=>console.error("Audio play failed",e))))}),[]),(0,r.useEffect)((()=>{const e=b;g.current&&(g.current.src=e,g.current.play().then((()=>{})).catch((e=>console.error("Audio play failed",e))))}),[]);const ne=async(e,t)=>{console.log(`[WebRTC:${e}] Cleaning up connection. Reason: ${t}`);const n=i.current.get(e);if(s.current.has(e)&&(clearInterval(s.current.get(e)),s.current.delete(e),console.log(`[WebRTC:${e}] Stopped heartbeat.`)),n){n.pc.close();try{await fetch(`/api/whep/${e}/${n.listenerId}`,{method:"DELETE"}),console.log(`[WebRTC:${e}] Sent DELETE request to WHEP endpoint.`)}catch(t){console.error(`[WebRTC:${e}] Error sending DELETE request:`,t)}}i.current.delete(e),u((t=>{const n=new Map(t);return n.delete(e),n})),v&&(v.disconnect(),S(null)),l((t=>new Map(t).set(e,!1))),e===d&&(g.current&&(g.current.pause(),g.current.srcObject=null),navigator.mediaSession&&(navigator.mediaSession.metadata=null,navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)),m(null)),console.log(`[WebRTC:${e}] Connection cleanup complete.`)},re=async e=>{if(o.get(e)||i.current.has(e))return console.log(`[WebRTC:${e}] User intent: STOP.`),void await ne(e,"User initiated stop");console.log(`[WebRTC:${e}] User intent: START.`);const t=[];i.current.forEach(((n,r)=>{r!==e&&(console.log(`[WebRTC] Found active listener on ${r}. Cleaning up before starting new stream.`),t.push(ne(r,"New stream requested")))})),t.length>0&&(console.log(`[WebRTC] Waiting for ${t.length} existing connection(s) to close.`),await Promise.all(t),console.log("[WebRTC] All existing connections closed.")),console.log(`[WebRTC:${e}] Proceeding to establish new WHEP connection.`),m(e);const n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:192.168.3.201",username:"screamrouter",credential:"screamrouter"}]}),r=[];let a=null;n.onicecandidate=t=>{if(t.candidate){const n=t.candidate.toJSON(),o={candidate:n.candidate,sdpMid:n.sdpMid};a?fetch(`/api/whep/${e}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch((t=>console.error(`[WebRTC:${e}] Error sending ICE candidate:`,t))):r.push(t.candidate)}},n.ontrack=t=>{console.log(`[WebRTC:${e}] Received remote audio track.`),u((n=>new Map(n).set(e,t.streams[0])));let n=E;if(!n)try{const e=new(window.AudioContext||window.webkitAudioContext);k(e),n=e}catch(e){return void console.error("Web Audio API is not supported in this browser",e)}"suspended"===n.state&&n.resume().catch((t=>console.error(`[WebRTC:${e}] Failed to resume AudioContext:`,t))),v&&v.disconnect();const r=n.createMediaStreamSource(t.streams[0]);r.connect(n.destination),S(r),g.current&&e===d&&(g.current.srcObject=t.streams[0],g.current.muted=!1,g.current.play().catch((e=>console.error("Media Session audio play failed",e))))},n.oniceconnectionstatechange=async()=>{if(console.log(`[WebRTC:${e}] ICE connection state changed to: ${n.iceConnectionState}`),"connected"===n.iceConnectionState){l((t=>new Map(t).set(e,!0)));const t=setInterval((async()=>{const t=i.current.get(e);if(t)try{404===(await fetch(`/api/whep/${e}/${t.listenerId}`,{method:"POST"})).status&&(console.error(`[WebRTC:${e}] Heartbeat failed: session not found. Cleaning up.`),await ne(e,"Heartbeat failed"))}catch(t){console.error(`[WebRTC:${e}] Heartbeat request error:`,t)}}),5e3);s.current.set(e,t)}else["failed","disconnected","closed"].includes(n.iceConnectionState)&&await ne(e,`ICE state changed to ${n.iceConnectionState}`)};try{n.addTransceiver("audio",{direction:"recvonly"});const t=await n.createOffer();t.sdp=t.sdp?.replace("useinbandfec=1","useinbandfec=1;stereo=1;sprop-stereo=1"),t.sdp=t.sdp?.replace("useinbandfec=0","useinbandfec=0;stereo=1;sprop-stereo=1"),await n.setLocalDescription(t);const o=await fetch(`/api/whep/${e}`,{method:"POST",headers:{"Content-Type":"application/sdp"},body:t.sdp});if(201!==o.status)throw new Error(`Failed to get answer from WHEP endpoint. Status: ${o.status}`);const l=await o.text(),s=o.headers.get("Location");if(!s)throw new Error("Location header not found in WHEP response");for(a=s.split("/").pop(),console.log(`[WebRTC:${e}] Received listenerId: ${a}.`);r.length>0;){const t=r.shift();if(t){const n=t.toJSON(),r={candidate:n.candidate,sdpMid:n.sdpMid};fetch(`/api/whep/${e}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch((t=>console.error(`[WebRTC:${e}] Error sending queued ICE candidate:`,t)))}}const c=new RTCSessionDescription({type:"answer",sdp:l});await n.setRemoteDescription(c),i.current.set(e,{pc:n,listenerId:a}),console.log(`[WebRTC:${e}] Started listening via WHEP`)}catch(t){console.error(`[WebRTC:${e}] Error during WHEP negotiation:`,t),await ne(e,"WHEP negotiation failed")}};return(0,r.useEffect)((()=>{const e=f.current;if(!e)return;const t=()=>{console.log("Silence audio paused, stopping all WebRTC sessions."),Q(!1);const e=new Set;o.forEach(((t,n)=>{t&&(e.add(n),re(n))})),Y(e),Z((t=>{const n=new Map(t);return e.forEach((e=>n.set(e,!1))),n}))},n=()=>{console.log("Silence audio playing, restarting paused WebRTC sessions."),Q(!0),G.forEach((e=>{re(e)})),Z((e=>{const t=new Map(e);return G.forEach((e=>t.set(e,!0))),t})),Y(new Set)};return e.addEventListener("pause",t),e.addEventListener("play",n),()=>{e.removeEventListener("pause",t),e.removeEventListener("play",n)}}),[o,re,G]),r.createElement(h.Provider,{value:{activeSource:n,listeningStatus:o,audioStreams:c,visualizingSink:y,playbackError:w,sources:z,sinks:$,routes:_,onToggleActiveSource:e=>{const t=n===e?null:e;a(t),localStorage.setItem("activeSource",t||"")},onTranscribeSink:e=>{window.open(`/site/transcribe/${e}/`,"Transcription")},onListenToSink:re,onVisualizeSink:e=>{e&&ee(`/site/visualizer?ip=${e.ip}`,800,600),x(e)},onPlaybackError:(e,t)=>{"NotAllowedError"===t.name&&(console.error(`[PlaybackError:${e}] Autoplay failed. Stopping WHEP connection.`,t),C((n=>new Map(n).set(e,t))),l((t=>new Map(t).set(e,!1))),re(e),ne(e,"Playback error"))},toggleEnabled:async(e,t,n)=>{try{"sources"===e?await p.updateSource(t,{enabled:!n}):"sinks"===e?await p.updateSink(t,{enabled:!n}):"routes"===e&&await p.updateRoute(t,{enabled:!n})}catch(t){console.error(`Error toggling ${e} enabled status:`,t)}},updateVolume:async(e,t,n)=>{try{"sources"===e?await p.updateSourceVolume(t,n):"sinks"===e?await p.updateSinkVolume(t,n):await p.updateRouteVolume(t,n)}catch(t){console.error(`Error updating ${e} volume:`,t)}},updateTimeshift:async(e,t,n)=>{try{"sources"===e?await p.updateSourceTimeshift(t,n):"sinks"===e?await p.updateSinkTimeshift(t,n):await p.updateRouteTimeshift(t,n)}catch(t){console.error(`Error updating ${e} timeshift:`,t)}},controlSource:async(e,t)=>{try{await p.controlSource(e,t)}catch(e){console.error("Error controlling source:",e)}},setSelectedItem:N,setShowEqualizerModal:U,setSelectedItemType:L,getRoutesForSource:e=>_.filter((t=>t.source===e)),getRoutesForSink:e=>_.filter((t=>t.sink===e)),fetchSources:async()=>{try{const e=await p.getSources();T(Object.values(e.data))}catch(e){console.error("Error fetching sources:",e)}},fetchSinks:async()=>{try{const e=await p.getSinks();R(Object.values(e.data))}catch(e){console.error("Error fetching sinks:",e)}},fetchRoutes:async()=>{try{const e=await p.getRoutes();I(Object.values(e.data))}catch(e){console.error("Error fetching routes:",e)}},setPrimarySource:e=>{T((t=>t.map((t=>({...t,is_primary:t.name===e?.name})))))},openVNCModal:e=>{e.vnc_ip&&e.vnc_port&&ee(`/site/vnc?ip=${e.vnc_ip}&port=${e.vnc_port}`,800,600)},showEqualizerModal:M,selectedEqualizerItem:O,selectedEqualizerType:q,openEqualizerModal:(e,t)=>{V(e),F(t),U(!0)},closeEqualizerModal:()=>{V(null),F(null),U(!1)},showEditModal:P,setShowEditModal:W,editItem:(e,t)=>{N(t),L(e),W(!0)},selectedItem:A,selectedItemType:D,navigateToItem:(e,t)=>{L(e);const n=("sources"===e?z:"sinks"===e?$:_).find((e=>e.name===t));n&&N(n)},refreshAppContext:te,silenceSessionAudioRef:f,isSilenceAudioPlaying:K,startedListeningSinks:X,setStartedListeningSinks:Z}},t,r.createElement("audio",{id:"silencesAudio",ref:f,src:b,style:{display:"none"},controls:!0,autoPlay:!0,loop:!0}))},E=()=>{const e=(0,r.useContext)(h);if(void 0===e)throw new Error("useAppContext must be used within an AppProvider");return e};class k{pc=null;listenerId=null;activeSinkId=null;heartbeatInterval=null;iceCandidateQueue=[];candidatePollingInterval=null;candidatePollingStartTime=0;CANDIDATE_POLLING_INTERVAL_MS=1e3;CANDIDATE_POLLING_MAX_DURATION_MS=3e4;constructor(e,t,n){this.onStatusChange=e,this.onStream=t,this.onPlaybackError=n}isListeningTo(e){return this.activeSinkId===e&&null!==this.pc}async toggleListening(e){this.isListeningTo(e)?(console.log(`[WebRTC:${e}] User intent: STOP.`),await this.stopListening()):(console.log(`[WebRTC:${e}] User intent: START.`),await this.startListening(e))}async startListening(e){this.activeSinkId&&(console.log(`[WebRTC] Found active listener on ${this.activeSinkId}. Cleaning up before starting new stream.`),await this.stopListening()),console.log(`[WebRTC:${e}] Proceeding to establish new WHEP connection.`),this.activeSinkId=e,this.pc=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:192.168.3.201",username:"screamrouter",credential:"screamrouter"}]}),this.pc.onicecandidate=e=>this.handleIceCandidate(e),this.pc.ontrack=e=>this.handleTrack(e),this.pc.oniceconnectionstatechange=()=>this.handleIceConnectionStateChange();try{this.pc.addTransceiver("audio",{direction:"recvonly"});const e=await this.pc.createOffer();e.sdp=e.sdp?.replace("useinbandfec=1","useinbandfec=1;stereo=1;sprop-stereo=1"),e.sdp=e.sdp?.replace("useinbandfec=0","useinbandfec=0;stereo=1;sprop-stereo=1"),await this.pc.setLocalDescription(e);const t=await fetch(`/api/whep/${this.activeSinkId}`,{method:"POST",headers:{"Content-Type":"application/sdp"},body:e.sdp});if(201!==t.status)throw new Error(`Failed to get answer from WHEP endpoint. Status: ${t.status}`);const n=await t.text(),r=t.headers.get("Location");if(!r)throw new Error("Location header not found in WHEP response");this.listenerId=r.split("/").pop(),console.log(`[WebRTC:${this.activeSinkId}] Received listenerId: ${this.listenerId}.`),this.processIceCandidateQueue();const a=new RTCSessionDescription({type:"answer",sdp:n});await this.pc.setRemoteDescription(a),this.startServerCandidatePolling(),console.log(`[WebRTC:${this.activeSinkId}] Started listening via WHEP`)}catch(e){console.error(`[WebRTC:${this.activeSinkId}] Error during WHEP negotiation:`,e),await this.cleanupConnection("WHEP negotiation failed")}}async stopListening(){await this.cleanupConnection("User initiated stop")}async cleanupConnection(e){if(!this.activeSinkId)return;const t=this.activeSinkId;if(console.log(`[WebRTC:${t}] Cleaning up connection. Reason: ${e}`),this.candidatePollingInterval&&(clearInterval(this.candidatePollingInterval),this.candidatePollingInterval=null,console.log(`[WebRTC:${t}] Stopped server ICE candidate polling.`)),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null,console.log(`[WebRTC:${t}] Stopped heartbeat.`)),this.pc&&(this.pc.close(),this.pc=null),this.listenerId)try{await fetch(`/api/whep/${t}/${this.listenerId}`,{method:"DELETE"}),console.log(`[WebRTC:${t}] Sent DELETE request to WHEP endpoint.`)}catch(e){console.error(`[WebRTC:${t}] Error sending DELETE request:`,e)}this.onStream(t,null),this.onStatusChange(t,!1),this.activeSinkId=null,this.listenerId=null,this.iceCandidateQueue=[],console.log(`[WebRTC:${t}] Connection cleanup complete.`)}handleIceCandidate(e){e.candidate&&(this.listenerId?this.sendIceCandidate(e.candidate):this.iceCandidateQueue.push(e.candidate))}sendIceCandidate(e){const t={candidate:e.candidate,sdpMid:e.sdpMid};fetch(`/api/whep/${this.activeSinkId}/${this.listenerId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch((e=>console.error(`[WebRTC:${this.activeSinkId}] Error sending ICE candidate:`,e)))}processIceCandidateQueue(){for(;this.iceCandidateQueue.length>0;){const e=this.iceCandidateQueue.shift();e&&this.sendIceCandidate(e)}}handleTrack(e){this.activeSinkId&&(console.log(`[WebRTC:${this.activeSinkId}] Received remote audio track.`),this.onStream(this.activeSinkId,e.streams[0]))}async handleIceConnectionStateChange(){if(!this.pc||!this.activeSinkId)return;const e=this.activeSinkId;console.log(`[WebRTC:${e}] ICE connection state changed to: ${this.pc.iceConnectionState}`),"connected"===this.pc.iceConnectionState?(this.onStatusChange(e,!0),this.startHeartbeat(e)):["failed","disconnected","closed"].includes(this.pc.iceConnectionState)&&await this.cleanupConnection(`ICE state changed to ${this.pc.iceConnectionState}`)}startHeartbeat(e){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval((async()=>{if(this.pc&&this.listenerId)try{404===(await fetch(`/api/whep/${e}/${this.listenerId}`,{method:"POST"})).status&&(console.error(`[WebRTC:${e}] Heartbeat failed: session not found. Cleaning up.`),await this.cleanupConnection("Heartbeat failed"))}catch(t){console.error(`[WebRTC:${e}] Heartbeat request error:`,t)}}),5e3)}startServerCandidatePolling(){if(!this.activeSinkId||!this.listenerId||!this.pc)return void console.warn("[WebRTC] Cannot start candidate polling: missing required data");const e=this.activeSinkId,t=this.listenerId;console.log(`[WebRTC:${e}] Starting server ICE candidate polling for listener ${t}`),this.candidatePollingStartTime=Date.now(),this.candidatePollingInterval&&clearInterval(this.candidatePollingInterval),this.candidatePollingInterval=setInterval((async()=>{if(Date.now()-this.candidatePollingStartTime>this.CANDIDATE_POLLING_MAX_DURATION_MS)return console.log(`[WebRTC:${e}] Stopping candidate polling after ${this.CANDIDATE_POLLING_MAX_DURATION_MS}ms timeout`),void(this.candidatePollingInterval&&(clearInterval(this.candidatePollingInterval),this.candidatePollingInterval=null));if("connected"===this.pc?.iceConnectionState||"completed"===this.pc?.iceConnectionState)return console.log(`[WebRTC:${e}] ICE connection established, stopping candidate polling`),void(this.candidatePollingInterval&&(clearInterval(this.candidatePollingInterval),this.candidatePollingInterval=null));try{const n=await fetch(`/api/whep/${e}/${t}/candidates`,{method:"GET",headers:{Accept:"application/json"}});if(200===n.status){const t=await n.json();if(Array.isArray(t)&&t.length>0){console.log(`[WebRTC:${e}] Received ${t.length} server ICE candidates`);for(const n of t)if(n.candidate&&void 0!==n.sdpMid)try{const t=new RTCIceCandidate({candidate:n.candidate,sdpMLineIndex:0,sdpMid:n.sdpMid});this.pc&&(await this.pc.addIceCandidate(t),console.log(`[WebRTC:${e}] Added server ICE candidate: ${n.candidate}`))}catch(t){console.error(`[WebRTC:${e}] Error adding server ICE candidate:`,t)}}}else 404!==n.status&&console.warn(`[WebRTC:${e}] Unexpected status ${n.status} when polling for candidates`)}catch(t){console.error(`[WebRTC:${e}] Error polling for server ICE candidates:`,t)}}),this.CANDIDATE_POLLING_INTERVAL_MS)}}const v=(0,r.createContext)(void 0),S=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(new Map),[o,l]=(0,r.useState)(new Map),[i,s]=(0,r.useState)(new Map),c=(0,r.useCallback)(((e,t)=>{a((n=>new Map(n).set(e,t)))}),[]),u=(0,r.useCallback)(((e,t)=>{l((n=>{const r=new Map(n);return t?r.set(e,t):r.delete(e),r}))}),[]),d=(0,r.useCallback)(((e,t)=>{s((n=>new Map(n).set(e,t)))}),[]),m=(0,r.useMemo)((()=>new k(c,u,d)),[c,u,d]),g={listeningStatus:n,audioStreams:o,playbackError:i,toggleListening:(0,r.useCallback)((e=>{m.toggleListening(e)}),[m]),isListeningTo:(0,r.useCallback)((e=>m.isListeningTo(e)),[m])};return r.createElement(v.Provider,{value:g},t)};var y=n(3840),x=n(7234),w=n(4466),C=n(6944),z=n(1175),T=n(9146);const $=e=>{let{source:t}=e;const n=(0,r.useRef)(null),[a,o]=(0,r.useState)(null),l=p.getVncUrl(t.name);(0,r.useEffect)((()=>{document.title=`ScreamRouter - ${t.name}`}),[t.name]),(0,r.useEffect)((()=>{document.body.style.overflow="hidden"}),[t.name]);const i=(0,y.dU)("gray.50","gray.900");return r.createElement(x.s,{direction:"column",height:"100vh",width:"100%",bg:i,position:"relative"},a&&r.createElement(w.F,{status:"error",mb:4},r.createElement(C._,null),r.createElement(z.X,null,a)),r.createElement(T.a,{as:"iframe",ref:n,src:l,title:`${t.name}`,flex:"1",border:"none",width:"100%",maxHeight:{base:"90%",md:"100%"},onError:e=>{console.error("Error loading VNC iframe:",e),o("Failed to load VNC connection. Please try again.")}}))};var R=n(7176),_=n(8137),I=n(1052),A=n(5187),N=n(7347),M=n.n(N),U=n(5814),P=n.n(U),W=n(937);const D=e=>{let{ip:t}=e;const{sources:n,activeSource:a,controlSource:o}=E(),[l,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(0),[m,g]=(0,r.useState)(!0),[b,h]=(0,r.useState)(!0),[f,k]=(0,r.useState)(15),[v,S]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!0),z=(0,r.useRef)(null),$=(0,r.useRef)(null),N=(0,r.useRef)(null),U=(0,r.useRef)(null),D=(0,r.useRef)(null),L=(0,r.useRef)(null),O=(0,r.useRef)({}),V=(0,r.useRef)([]),q=(0,r.useRef)([]),F=(0,r.useRef)(null),B=(0,r.useRef)(null),j=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(document.title="ScreamRouter - Visualizer",document.body.style.overflow="hidden",O.current={...P().getPresets()},O.current=Object.entries(O.current).sort(((e,t)=>{let[n]=e,[r]=t;return n.toLowerCase().localeCompare(r.toLowerCase())})).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:r}}),{}),V.current=Object.keys(O.current),d(Math.floor(Math.random()*V.current.length)),z.current){const e=window.devicePixelRatio||1,t=window.innerWidth,n=window.innerHeight;z.current.style.width=`${t}px`,z.current.style.height=`${n}px`,z.current.width=t*e,z.current.height=n*e}const e=()=>{if(z.current&&N.current){const e=window.devicePixelRatio||1,t=window.innerWidth,n=window.innerHeight;if(z.current.style.width=`${t}px`,z.current.style.height=`${n}px`,z.current.width=t*e,z.current.height=n*e,U.current){console.log(`Resizing visualizer, maintaining preset: ${B.current}`);const t=B.current?JSON.parse(JSON.stringify(O.current[B.current])):null;N.current=M().createVisualizer(U.current,z.current,{width:z.current.width,height:z.current.height,pixelRatio:e,textureRatio:2}),L.current&&N.current.connectAudio(L.current),t&&N.current.loadPreset(t,0)}else N.current.setRendererSize(z.current.width,z.current.height)}};window.addEventListener("resize",e);const t=e=>{switch(C(!0),j.current&&clearTimeout(j.current),j.current=setTimeout((()=>{C(!1)}),2e3),e.key.toLowerCase()){case"f":Q();break;case"n":G();break;case"p":Y();break;case"r":K();break;case"c":S((e=>!e));break;case"arrowleft":ne&&o(ne.name,"prevtrack");break;case"arrowright":ne&&o(ne.name,"nexttrack");break;case" ":ne&&o(ne.name,"play")}};return document.addEventListener("keydown",t),()=>{window.removeEventListener("resize",e),document.removeEventListener("keydown",t),D.current&&D.current.disconnect(),L.current&&L.current.disconnect(),U.current&&"closed"!==U.current.state&&U.current.close(),F.current&&clearInterval(F.current),document.title="ScreamRouter",document.body.style.overflow=""}}),[]),(0,r.useEffect)((()=>{if(l&&b)return F.current&&clearInterval(F.current),F.current=setInterval((()=>{m?K():G()}),1e3*f),()=>{F.current&&clearInterval(F.current)}}),[l,b,m,f]);const J=()=>{N.current&&N.current.render(),requestAnimationFrame(J)},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5.7;if(N.current&&V.current[e]){const n=V.current[e];B.current=n,console.log(`Loading preset: ${n}`),N.current.loadPreset(O.current[n],t)}},G=()=>{q.current.push(u);const e=m?Math.floor(Math.random()*V.current.length):(u+1)%V.current.length;d(e),H(e)},Y=()=>{const e=q.current.length>0?q.current.pop()||0:(u-1+V.current.length)%V.current.length;d(e),H(e)},K=()=>{q.current.push(u);const e=Math.floor(Math.random()*V.current.length);d(e),H(e)},Q=()=>{if(s)document.exitFullscreen&&document.fullscreenElement&&document.exitFullscreen().then((()=>{setTimeout((()=>{const e=new Event("resize");window.dispatchEvent(e)}),100)})).catch((e=>{console.error("Error attempting to exit fullscreen:",e)}));else{const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen().then((()=>{setTimeout((()=>{const e=new Event("resize");window.dispatchEvent(e)}),100)})).catch((e=>{console.error("Error attempting to enable fullscreen:",e)}))}c(!s),S(!1)},X=(0,y.dU)("blue.500","blue.400"),Z=(0,y.dU)("blue.600","blue.500"),ee=(0,y.dU)("white","white"),te=(0,y.dU)("rgba(255, 255, 255, 0.8)","rgba(0, 0, 0, 0.8)"),ne=n.find((e=>e.name===a&&e.vnc_ip&&e.vnc_port));return(0,r.useEffect)((()=>{if(!ne)return;let e;const t=()=>{C(!0),clearTimeout(e),e=setTimeout((()=>{C(!1)}),2e3)},n=e=>{console.log(`Key pressed: ${e.key}`),"ArrowLeft"===e.key?(console.log("Left arrow pressed - Previous track"),o(ne.name,"prevtrack")):"ArrowRight"===e.key?(console.log("Right arrow pressed - Next track"),o(ne.name,"nexttrack")):" "===e.key&&(console.log("Space pressed - Play/Pause"),o(ne.name,"play"))};return window.addEventListener("mousemove",t),window.addEventListener("keydown",n),e=setTimeout((()=>{C(!1)}),2e3),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("keydown",n),clearTimeout(e)}}),[ne,o]),r.createElement(T.a,{width:"100vw",height:"100vh",margin:0,padding:0,overflow:"hidden",bg:"black",onClick:()=>{S(!v),C(!0);const e=setTimeout((()=>{C(!1)}),2e3);return()=>clearTimeout(e)}},ne&&w&&r.createElement(x.s,{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",bg:"rgba(0, 0, 0, 0.7)",borderRadius:"md",padding:"10px",zIndex:1e3,gap:4,onClick:e=>e.stopPropagation(),opacity:1,transition:"opacity 0.3s ease-in-out"},r.createElement(R.K,{"aria-label":"Previous Track",icon:r.createElement(W.ttb,null),onClick:()=>o(ne.name,"prevtrack"),colorScheme:"blue",size:"lg"}),r.createElement(R.K,{"aria-label":"Play/Pause",icon:r.createElement(W.gSK,null),onClick:()=>o(ne.name,"play"),colorScheme:"blue",size:"lg"}),r.createElement(R.K,{"aria-label":"Next Track",icon:r.createElement(W.FH8,null),onClick:()=>o(ne.name,"nexttrack"),colorScheme:"blue",size:"lg"})),!l&&r.createElement(_.$,{onClick:()=>{const e=p.getSinkStreamUrl(t);if(!$.current||!z.current)return;$.current.src=e,$.current.play().catch((e=>{console.error("Error playing audio:",e)})),U.current=new AudioContext,N.current=M().createVisualizer(U.current,z.current,{width:z.current.width,height:z.current.height,pixelRatio:window.devicePixelRatio||1,textureRatio:2}),D.current=U.current.createMediaElementSource($.current),L.current=U.current.createDelay(),L.current.delayTime.value=.26,D.current.connect(L.current),N.current.connectAudio(L.current);const n=V.current[u];B.current=n,H(u,0),requestAnimationFrame(J),i(!0)},position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"20px 40px",fontSize:"18px",bg:X,color:ee,_hover:{bg:Z},borderRadius:"md"},"Start Visualization"),r.createElement(T.a,{as:"canvas",ref:z,id:"canvas",width:window.innerWidth,height:window.innerHeight,display:"block"}),r.createElement(T.a,{as:"audio",ref:$,id:"audio_visualizer",display:"none"}),l&&v&&w&&r.createElement(T.a,{position:"fixed",top:"10px",right:"10px",p:4,borderRadius:"md",bg:te,zIndex:1e3,onClick:e=>e.stopPropagation(),opacity:1,transition:"opacity 0.3s ease-in-out"},r.createElement(x.s,{direction:"column",gap:3},r.createElement(x.s,{align:"center",justify:"space-between"},r.createElement(I.E,{fontWeight:"bold"},"Preset:"),r.createElement(A.l,{value:u,onChange:e=>{const t=parseInt(e.target.value,10);d(t),H(t)},width:"250px",size:"sm"},V.current.map(((e,t)=>r.createElement("option",{key:e,value:t},e.length>40?`${e.substring(0,40)}...`:e))))),r.createElement(x.s,{align:"center",justify:"space-between"},r.createElement(I.E,{fontWeight:"bold"},"Cycle Presets:"),r.createElement("input",{type:"checkbox",checked:b,onChange:()=>h(!b)})),r.createElement(x.s,{align:"center",justify:"space-between"},r.createElement(I.E,{fontWeight:"bold"},"Cycle Length (seconds):"),r.createElement("input",{type:"number",value:f,onChange:e=>{k(parseInt(e.target.value,10))},min:1,max:60,style:{width:"60px"}})),r.createElement(x.s,{align:"center",justify:"space-between"},r.createElement(I.E,{fontWeight:"bold"},"Random Presets:"),r.createElement("input",{type:"checkbox",checked:m,onChange:()=>g(!m)})),r.createElement(x.s,{justify:"space-between",mt:2},r.createElement(_.$,{size:"sm",onClick:Y},"Previous"),r.createElement(_.$,{size:"sm",onClick:G},"Next"),r.createElement(_.$,{size:"sm",onClick:K},"Random")),r.createElement(_.$,{size:"sm",onClick:Q,mt:2},s?"Exit Fullscreen":"Fullscreen"),r.createElement(I.E,{fontSize:"xs",mt:2},"Keyboard shortcuts: F (fullscreen), N (next), P (prev), R (random), C (controls)"))))};var L=n(5353),O=n(8059),V=n(4178),q=n(6364),F=n(7584),B=n(6277),j=n(1570);const J={"📦Flat":{b1:1,b2:1,b3:1,b4:1,b5:1,b6:1,b7:1,b8:1,b9:1,b10:1,b11:1,b12:1,b13:1,b14:1,b15:1,b16:1,b17:1,b18:1},"📦Classical":{b1:1.2,b2:1.2,b3:1,b4:1,b5:1,b6:1,b7:.9,b8:.9,b9:.9,b10:.8,b11:.8,b12:.8,b13:.8,b14:.8,b15:.8,b16:.8,b17:.8,b18:.8},"📦Rock":{b1:1.2,b2:1.1,b3:.8,b4:.9,b5:1,b6:1.2,b7:1.4,b8:1.4,b9:1.4,b10:1.3,b11:1.2,b12:1.1,b13:1,b14:1,b15:1,b16:1.1,b17:1.2,b18:1.2},"📦Pop":{b1:.8,b2:.9,b3:1,b4:1.1,b5:1.2,b6:1.2,b7:1.1,b8:1,b9:1,b10:1,b11:1,b12:1.1,b13:1.2,b14:1.2,b15:1.1,b16:1,b17:.9,b18:.8},"📦Jazz":{b1:1.1,b2:1.1,b3:1,b4:1,b5:1,b6:1.1,b7:1.2,b8:1.2,b9:1.2,b10:1.1,b11:1,b12:.9,b13:.9,b14:.9,b15:1,b16:1.1,b17:1.1,b18:1.1},"📦Electronic":{b1:1.4,b2:1.3,b3:1.2,b4:1,b5:.8,b6:1,b7:1.2,b8:1.3,b9:1.4,b10:1.4,b11:1.3,b12:1.2,b13:1.1,b14:1,b15:1.1,b16:1.2,b17:1.3,b18:1.4}},H={...J};class G{constructor(){this.a0=this.b0=1,this.a1=this.a2=this.b1=this.b2=0}setParams(e,t,n,r){const a=Math.pow(10,Math.abs(n)/20),o=Math.tan(Math.PI*e/r);if(n>=0){const e=1/(1+1/t*o+o*o);this.b0=(1+a/t*o+o*o)*e,this.b1=2*(o*o-1)*e,this.b2=(1-a/t*o+o*o)*e,this.a1=this.b1,this.a2=(1-1/t*o+o*o)*e}else{const e=1/(1+a/t*o+o*o);this.b0=(1+1/t*o+o*o)*e,this.b1=2*(o*o-1)*e,this.b2=(1-1/t*o+o*o)*e,this.a1=this.b1,this.a2=(1-a/t*o+o*o)*e}this.a0=1}}const Y=e=>{let{item:t,type:n,onClose:a,onDataChange:o}=e;const[l,i]=(0,r.useState)(t.equalizer),[s,c]=(0,r.useState)(t.equalizer.normalization_enabled??!0),[u,d]=(0,r.useState)(null),[m,g]=(0,r.useState)("Custom"),[b,h]=(0,r.useState)({}),[f,E]=(0,r.useState)(!1),[k,v]=(0,r.useState)(""),S=(0,r.useRef)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=(await p.listEqualizers()).data.equalizers,n={};e.forEach((e=>{if(null==e.name)return;const t=`🛠️${e.name}`;n[t]=e,H[t]=e})),h(n),z(t.equalizer),console.log(H)}catch(e){console.error("Error loading equalizers:",e),d("Failed to load equalizers. Please try again.")}console.log(H)})()}),[]);const z=e=>{const t=Object.entries({...H,...b}).find((t=>{let[n,r]=t;return Object.entries(r).every((t=>{let[n,r]=t;if("name"===n)return!0;const a=e[n];return"number"==typeof a&&Math.abs(a-r)<.01}))}));g(t?t[0]:"Custom")},$=()=>{E(!1)},R=Object.entries(l).filter((e=>{let[t]=e;return t.startsWith("b")})).sort(((e,t)=>parseInt(e[0].slice(1),10)-parseInt(t[0].slice(1),10))),N=[65.406392,92.498606,130.81278,184.99721,261.62557,369.99442,523.25113,739.9884,1046.5023,1479.9768,2093.0045,2959.9536,4186.0091,5919.9072,8372.0181,11839.814,16744.036,2e4],M=(e,t)=>{let n=1;return R.forEach(((r,a)=>{let[o,l]=r;console.log(o);const i=new G;i.setParams(N[a],1.41,20*Math.log10(Math.max(l,.001)),t);const s=2*Math.PI*e/t,c=Math.pow(Math.sin(s/2),2),u=i.b0,d=i.b1,m=i.b2,g=i.a0,p=i.a1,b=i.a2,h=Math.sqrt(Math.pow(u+d+m,2)-4*(u*d+4*u*m+d*m)*c+16*u*m*c*c)/Math.sqrt(Math.pow(g+p+b,2)-4*(g*p+4*g*b+p*b)*c+16*g*b*c*c);n*=h})),20*Math.log10(n)};(0,r.useEffect)((()=>{const e=S.current;if(e){const t=e.getContext("2d");if(t){t.clearRect(0,0,e.width,e.height),t.fillStyle="#1e1e1e",t.fillRect(0,0,e.width,e.height),t.strokeStyle="rgba(255, 255, 255, 0.1)",t.lineWidth=1,[20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,24e3].forEach((n=>{const r=Math.log2(n/20)/Math.log2(1200)*e.width;t.beginPath(),t.moveTo(r,0),t.lineTo(r,e.height-20),t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.7)",t.font="10px Arial",t.textAlign="center",t.fillText(n>=1e3?n/1e3+"k":n.toString(),r,e.height-5)}));const n=12;[-12,-9,-6,-3,0,3,6,9,12].forEach((r=>{const a=e.height/2-10-r/n*((e.height-20)/2);t.beginPath(),t.moveTo(0,a),t.lineTo(e.width,a),t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.7)",t.font="10px Arial",t.textAlign="right",t.fillText(`${r} dB`,e.width-5,a+3)})),t.strokeStyle="#2ecc71",t.lineWidth=2,t.beginPath();const r=48e3,a=200;for(let o=0;o<a;o++){const l=Math.exp(Math.log(20)+(Math.log(24e3)-Math.log(20))*(o/(a-1))),i=M(l,r),s=Math.log2(l/20)/Math.log2(1200)*e.width,c=e.height/2-10-i/n*((e.height-20)/2);0===o?t.moveTo(s,c):t.lineTo(s,c)}t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.9)",t.font="12px Arial",t.textAlign="center",t.fillText("Frequency (Hz)",e.width/2,e.height-20),t.save(),t.translate(10,e.height/2),t.rotate(-Math.PI/2),t.textAlign="center",t.fillText("Gain (dB)",0,0),t.restore()}}}),[l]),(0,r.useEffect)((()=>{let e=null;return u&&(e=setTimeout((()=>{d(null)}),1e4)),()=>{e&&clearTimeout(e)}}),[u]);const U=(0,y.dU)("white","gray.800"),P=(0,y.dU)("gray.200","gray.700"),W=(0,y.dU)("gray.800","white"),D=(0,y.dU)("gray.300","gray.600"),Y=(0,y.dU)("blue.100","blue.900"),K=(0,y.dU)("blue.500","blue.300"),Q=(0,y.dU)("blue.600","blue.400");return r.createElement(T.a,{p:4,bg:U,borderWidth:"1px",borderColor:P,borderRadius:"md",maxW:"800px",mx:"auto"},r.createElement(L.D,{as:"h3",size:"md",mb:4,textAlign:"center"},t.name," ",n.replace(/s$/,"").replace(/^(.)/,(function(e){return e.toUpperCase()}))," Equalizer"),u&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),u),r.createElement(T.a,{mb:4,textAlign:"center"},r.createElement(T.a,{as:"canvas",ref:S,width:"600",height:"310",borderWidth:"1px",borderColor:D,borderRadius:"md",mx:"auto"})),r.createElement(T.a,{mb:4},r.createElement(x.s,{mb:4,alignItems:"center",justifyContent:"center",gap:2},r.createElement(I.E,{fontWeight:"medium",mr:2},"Preset:"),r.createElement(A.l,{value:m,onChange:e=>{const t=e.target.value;g(t),"Custom"!==t&&i({...H[t],...b[t]})},width:"auto",minW:"200px"},r.createElement("option",{value:"Custom"},"Custom"),Object.keys({...H,...b}).map((e=>r.createElement("option",{key:e,value:e},e)))),r.createElement(_.$,{colorScheme:"blue",size:"sm",onClick:()=>{v(""),E(!0)},ml:2},"Save"),r.createElement(_.$,{colorScheme:"red",size:"sm",onClick:async()=>{if(m in J)d("Cannot delete a hard-coded preset.");else try{d(null),await p.deleteEqualizer(m.replace("🛠️","")),h((e=>{const t={...e};return delete t[m],t})),g("Custom")}catch(e){console.error("Error deleting equalizer:",e),d("Failed to delete equalizer. Please try again.")}}},"Delete"),r.createElement(O.S,{isChecked:s,onChange:e=>c(e.target.checked),ml:4},"Normalize")),r.createElement(x.s,{justifyContent:"space-between",alignItems:"flex-end",height:"200px",position:"relative",px:4},R.map(((e,t)=>{let[n,a]=e;return r.createElement(x.s,{key:n,direction:"column",alignItems:"center",height:"100%",width:100/R.length+"%"},r.createElement(V.Ap,{id:n,orientation:"vertical",min:0,max:2,step:.1,value:a,onChange:e=>((e,t)=>{i((n=>{const r={...n,[e]:t};return z(r),r}))})(n,e),height:"180px"},r.createElement(V.hB,{bg:Y,width:"8px"},r.createElement(V.hJ,{bg:K})),r.createElement(V.OQ,{bg:Q,boxSize:"16px"})),r.createElement(I.E,{fontSize:"xs",mt:2,color:W},N[t].toFixed(0)))})),r.createElement(I.E,{position:"absolute",bottom:"-25px",right:"0",fontSize:"sm",color:W},"Hz"))),r.createElement(x.s,{justifyContent:"center",gap:4,mt:6},r.createElement(_.$,{colorScheme:"green",onClick:async()=>{try{d(null);const e={...l,normalization_enabled:s};switch(n){case"sources":await p.updateSourceEqualizer(t.name,e);break;case"sinks":await p.updateSinkEqualizer(t.name,e);break;case"routes":await p.updateRouteEqualizer(t.name,e)}}catch(e){console.error("Error updating equalizer:",e),d("Failed to update equalizer. Please try again.")}}},"Apply"),r.createElement(_.$,{variant:"outline",onClick:()=>{a(),o()}},"Close")),r.createElement(q.Z,null,f&&r.createElement(T.a,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.5)",zIndex:"9000",display:"flex",alignItems:"center",justifyContent:"center",onClick:$},r.createElement(T.a,{bg:U,borderRadius:"md",maxW:"400px",w:"90%",p:4,boxShadow:"lg",onClick:e=>e.stopPropagation(),zIndex:"9999"},r.createElement(L.D,{as:"h3",size:"md",mb:4},"Save Equalizer Preset"),r.createElement(F.MJ,{mb:4},r.createElement(B.l,null,"Preset Name"),r.createElement(j.p,{placeholder:"Enter a name for your preset",value:k,onChange:e=>v(e.target.value),autoFocus:!0})),r.createElement(x.s,{justifyContent:"flex-end"},r.createElement(_.$,{colorScheme:"blue",mr:3,onClick:async()=>{if(k)if(H[k]||b[k])d("Preset name already exists.");else try{d(null),await p.saveEqualizer(k,l),h((e=>({...e,[`🛠️${k}`]:l}))),g(`🛠️${k}`),$()}catch(e){console.error("Error saving equalizer:",e),d("Failed to save equalizer. Please try again.")}else d("Name is required.")}},"Save"),r.createElement(_.$,{onClick:$},"Cancel"))))))},K=e=>{let{ip:t}=e;const[n]=(0,i.ok)(),a=(0,s.g)(),o=n.get("ip"),l=a.ip,c=t||l||o,[u,d]=(0,r.useState)("Connecting to transcription service..."),[m,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(0),h=(0,y.dU)("gray.800","gray.100"),f=(0,y.dU)("gray.200","gray.700"),E=()=>{if(!c)return d("Error: No IP address provided"),null;const e=new WebSocket(`ws://127.0.0.1:8085/transcribe/${c}/`);return e.onopen=()=>{console.log("WebSocket connection established"),d("Connected. Waiting for transcription data..."),g(!0),b(0)},e.onmessage=e=>{console.log("WebSocket message received:",e.data);const t=e.data.replace(/\n/g,"<br/>");d(t)},e.onerror=e=>{console.error("WebSocket error:",e),d("Error connecting to transcription service. Attempting to reconnect..."),g(!1)},e.onclose=()=>{console.log("WebSocket connection closed"),d("Connection closed. Attempting to reconnect..."),g(!1)},e};return(0,r.useEffect)((()=>{document.title="ScreamRouter - Transcribe";const e=E();return()=>{e&&e.readyState===WebSocket.OPEN&&e.close()}}),[c]),(0,r.useEffect)((()=>{let e=null;return!m&&c&&(e=setTimeout((()=>{console.log(`Attempting to reconnect (attempt ${p+1})...`),b((e=>e+1));const e=E();return()=>{e&&e.readyState!==WebSocket.CLOSED&&e.close()}}),3e3)),()=>{e&&clearTimeout(e)}}),[m,p,c]),c?r.createElement(T.a,{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"left",bg:"rgba(127, 127, 127, .00)",position:"relative"},r.createElement(I.E,{fontSize:"20px",fontWeight:"bold",color:"white",sx:{"text-shadow":"-2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;"},textAlign:"left",dangerouslySetInnerHTML:{__html:u}})):r.createElement(T.a,{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bg:"rgba(127, 127, 127, .6)"},r.createElement(T.a,{p:8,maxWidth:"800px",borderWidth:1,borderRadius:"lg",boxShadow:"lg",bg:"rgba(127, 127, 127, .6)",borderColor:f},r.createElement(L.D,{as:"h2",size:"xl",mb:4,color:h},"Error"),r.createElement(I.E,{fontSize:"lg",color:h},"No IP address provided. Please specify an IP address.")))};var Q=n(9290),X=n(5958),Z=n(6756),ee=n(7486),te=n(5639),ne=n(3738),re=n(5311);const ae=e=>{let{value:t,onChange:n}=e;const[a,o]=(0,r.useState)(!1),l=(0,y.dU)("gray.100","gray.700"),i=(0,y.dU)("green.500","green.300"),s=(0,y.dU)("white","gray.200"),c=(0,y.dU)("gray.700","gray.200");return r.createElement(T.a,{width:"100%",maxWidth:"300px"},r.createElement(x.s,{direction:"column",width:"100%"},r.createElement(V.Ap,{id:"volume-slider","aria-label":"Volume slider",min:0,max:1,step:.01,value:t,onChange:n,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),mr:3,flex:"1"},r.createElement(V.hB,{bg:l},r.createElement(V.hJ,{bg:i})),r.createElement(te.m,{hasArrow:!0,bg:"green.500",color:"white",placement:"top",isOpen:a,label:`${Math.round(100*t)}%`},r.createElement(V.OQ,{boxSize:6,bg:s},r.createElement(ne.I,{as:re.M,color:"green.500"})))),r.createElement(I.E,{fontSize:"sm",width:"40px",textAlign:"right",color:c},Math.round(100*t),"%")))},oe=e=>{let{value:t,onChange:n}=e;const[a,o]=(0,r.useState)(t),[l,i]=(0,r.useState)(!1),s=(0,r.useRef)(null),c=(0,y.dU)("gray.100","gray.700"),u=(0,y.dU)("blue.500","blue.300"),d=(0,y.dU)("white","gray.200"),m=(0,y.dU)("gray.700","gray.200");(0,r.useEffect)((()=>{o(t)}),[t]);const g=(0,r.useCallback)((e=>{s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{n(e)}),300)}),[n]),p=e=>{const t=Math.abs(e);return`${Math.floor(t/60)}:${Math.round(t%60).toString().padStart(2,"0")}`};return r.createElement(T.a,{width:"100%",maxWidth:"300px"},r.createElement(x.s,{direction:"column",width:"100%"},r.createElement(V.Ap,{id:"timeshift-slider","aria-label":"Timeshift slider",min:-300,max:0,step:.1,value:-a,onChange:e=>{const t=-e;o(t),g(t)},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},r.createElement(V.hB,{bg:c},r.createElement(V.hJ,{bg:u})),r.createElement(te.m,{hasArrow:!0,bg:"blue.500",color:"white",placement:"top",isOpen:l,label:`-${p(a)}`},r.createElement(V.OQ,{bg:d}))),r.createElement(I.E,{mt:2,fontSize:"sm",color:m,alignSelf:"flex-end"},"-",p(a))))},le=()=>{const[e]=(0,i.ok)(),t=e.get("name"),n=!!t,[a,o]=(0,r.useState)(null),[l,s]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(!0),[g,b]=(0,r.useState)(!1),[h,f]=(0,r.useState)([]),[E,k]=(0,r.useState)(100),[v,S]=(0,r.useState)(0),[z,$]=(0,r.useState)(0),[R,I]=(0,r.useState)(""),[A,N]=(0,r.useState)("5900"),[M,U]=(0,r.useState)(null),[P,W]=(0,r.useState)(null),D=(0,y.dU)("white","gray.800"),O=(0,y.dU)("gray.200","gray.700"),V=(0,y.dU)("white","gray.700");return(0,r.useEffect)((()=>{(async()=>{if(t)try{const e=await p.getSources(),n=Object.values(e.data).find((e=>e.name===t));n?(o(n),s(n.name),u(n.ip||""),m(n.enabled),b(n.is_group),f(n.group_members||[]),k(n.volume||100),S(n.delay||0),$(n.timeshift||0),I(n.vnc_ip||""),N(n.vnc_port?.toString()||"5900")):U(`Source "${t}" not found.`)}catch(e){console.error("Error fetching source:",e),U("Failed to fetch source data. Please try again.")}})()}),[t]),r.createElement(Q.m,{maxW:"container.md",py:8},r.createElement(T.a,{bg:D,borderColor:O,borderWidth:"1px",borderRadius:"lg",p:6,boxShadow:"md"},r.createElement(L.D,{as:"h1",size:"lg",mb:6},n?"Edit Source":"Add Source"),M&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),M),P&&r.createElement(w.F,{status:"success",mb:4,borderRadius:"md"},r.createElement(C._,null),P),r.createElement(X.B,{spacing:4},r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Source Name"),r.createElement(j.p,{value:l,onChange:e=>s(e.target.value),bg:V})),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Source IP"),r.createElement(j.p,{value:c,onChange:e=>u(e.target.value),bg:V})),r.createElement(F.MJ,{display:"flex",alignItems:"center"},r.createElement(B.l,{htmlFor:"enabled",mb:"0"},"Enabled"),r.createElement(Z.d,{id:"enabled",isChecked:d,onChange:e=>m(e.target.checked)})),r.createElement(F.MJ,null,r.createElement(B.l,null,"Volume"),r.createElement(ae,{value:E,onChange:e=>k(e)})),r.createElement(F.MJ,null,r.createElement(B.l,null,"Delay (ms)"),r.createElement(ee.Q7,{value:v,onChange:e=>S(parseInt(e)),min:0,max:5e3,bg:V},r.createElement(ee.OO,null),r.createElement(ee.lw,null,r.createElement(ee.Q0,null),r.createElement(ee.Sh,null)))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Timeshift"),r.createElement(oe,{value:z,onChange:$})),r.createElement(L.D,{as:"h3",size:"md",mt:4,mb:2},"VNC Settings (Optional)"),r.createElement(F.MJ,null,r.createElement(B.l,null,"VNC IP"),r.createElement(j.p,{value:R,onChange:e=>I(e.target.value),bg:V,placeholder:"Leave empty if not using VNC"})),r.createElement(F.MJ,null,r.createElement(B.l,null,"VNC Port"),r.createElement(ee.Q7,{value:A,onChange:e=>N(e),min:1,max:65535,bg:V,isDisabled:!R},r.createElement(ee.OO,null),r.createElement(ee.lw,null,r.createElement(ee.Q0,null),r.createElement(ee.Sh,null))))),r.createElement(x.s,{mt:8,gap:3,justifyContent:"flex-end"},r.createElement(_.$,{colorScheme:"blue",onClick:async()=>{const e={name:l,ip:c,enabled:d,is_group:g,group_members:h,volume:E,delay:v,timeshift:z,vnc_ip:R||void 0,vnc_port:R?parseInt(A):void 0};try{n?(await p.updateSource(t,e),W(`Source "${l}" updated successfully.`)):(await p.addSource(e),W(`Source "${l}" added successfully.`)),n||(s(""),u(""),m(!0),b(!1),f([]),k(100),S(0),$(0),I(""),N("5900"))}catch(e){console.error("Error submitting source:",e),U("Failed to submit source. Please try again.")}}},n?"Update Source":"Add Source"),r.createElement(_.$,{variant:"outline",onClick:()=>{window.close()}},"Close"))))},ie=()=>{const[e]=(0,i.ok)(),t=e.get("name"),n=!!t,[a,o]=(0,r.useState)(null),[l,s]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,m]=(0,r.useState)("4010"),[g,b]=(0,r.useState)("32"),[h,f]=(0,r.useState)("48000"),[E,k]=(0,r.useState)("2"),[v,S]=(0,r.useState)("stereo"),[z,$]=(0,r.useState)(1),[R,I]=(0,r.useState)(0),[N,M]=(0,r.useState)(!1),[U,P]=(0,r.useState)("0"),[W,D]=(0,r.useState)("scream"),[V,q]=(0,r.useState)(!1),[J,H]=(0,r.useState)(null),[G,Y]=(0,r.useState)(null),K=(0,y.dU)("white","gray.800"),Z=(0,y.dU)("gray.200","gray.700"),te=(0,y.dU)("white","gray.700");return(0,r.useEffect)((()=>{(async()=>{if(t)try{const e=await p.getSinks(),n=Object.values(e.data).find((e=>e.name===t));n?(o(n),s(n.name),u(n.ip||""),m(n.port?.toString()||"4010"),b(n.bit_depth?.toString()||"32"),f(n.sample_rate?.toString()||"48000"),k(n.channels?.toString()||"2"),S(n.channel_layout||"stereo"),$(n.volume||1),I(n.delay||0),M(n.time_sync||!1),P(n.time_sync_delay?.toString()||"0"),D(n.protocol||"scream"),q(n.volume_normalization||!1)):H(`Sink "${t}" not found.`)}catch(e){console.error("Error fetching sink:",e),H("Failed to fetch sink data. Please try again.")}})()}),[t]),r.createElement(Q.m,{maxW:"container.md",py:8},r.createElement(T.a,{bg:K,borderColor:Z,borderWidth:"1px",borderRadius:"lg",p:6,boxShadow:"md"},r.createElement(L.D,{as:"h1",size:"lg",mb:6},n?"Edit Sink":"Add Sink"),J&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),J),G&&r.createElement(w.F,{status:"success",mb:4,borderRadius:"md"},r.createElement(C._,null),G),r.createElement(X.B,{spacing:4},r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Sink Name"),r.createElement(j.p,{value:l,onChange:e=>s(e.target.value),bg:te})),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Sink IP"),r.createElement(j.p,{value:c,onChange:e=>u(e.target.value),bg:te})),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Sink Port"),r.createElement(ee.Q7,{value:d,onChange:e=>m(e),min:1,max:65535,bg:te},r.createElement(ee.OO,null),r.createElement(ee.lw,null,r.createElement(ee.Q0,null),r.createElement(ee.Sh,null)))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Bit Depth"),r.createElement(A.l,{value:g,onChange:e=>b(e.target.value),bg:te},r.createElement("option",{value:"16"},"16"),r.createElement("option",{value:"24"},"24"),r.createElement("option",{value:"32"},"32"))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Sample Rate"),r.createElement(A.l,{value:h,onChange:e=>f(e.target.value),bg:te},r.createElement("option",{value:"44100"},"44100"),r.createElement("option",{value:"48000"},"48000"),r.createElement("option",{value:"88200"},"88200"),r.createElement("option",{value:"96000"},"96000"),r.createElement("option",{value:"192000"},"192000"))),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Channels"),r.createElement(ee.Q7,{value:E,onChange:e=>k(e),min:1,max:8,bg:te},r.createElement(ee.OO,null),r.createElement(ee.lw,null,r.createElement(ee.Q0,null),r.createElement(ee.Sh,null)))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Channel Layout"),r.createElement(A.l,{value:v,onChange:e=>S(e.target.value),bg:te},r.createElement("option",{value:"mono"},"Mono"),r.createElement("option",{value:"stereo"},"Stereo"),r.createElement("option",{value:"quad"},"Quad"),r.createElement("option",{value:"surround"},"Surround"),r.createElement("option",{value:"5.1"},"5.1"),r.createElement("option",{value:"7.1"},"7.1"))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Protocol"),r.createElement(A.l,{value:W,onChange:e=>D(e.target.value),bg:te},r.createElement("option",{value:"scream"},"Scream"),r.createElement("option",{value:"rtp"},"RTP"),r.createElement("option",{value:"web_receiver"},"Web Receiver"))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Volume"),r.createElement(ae,{value:z,onChange:$})),r.createElement(F.MJ,null,r.createElement(B.l,null,"Timeshift"),r.createElement(oe,{value:R,onChange:I})),r.createElement(F.MJ,null,r.createElement(x.s,{alignItems:"center"},r.createElement(O.S,{isChecked:V,onChange:e=>q(e.target.checked),mr:2}),r.createElement(B.l,{mb:0},"Volume Normalization"))),r.createElement(F.MJ,null,r.createElement(x.s,{alignItems:"center"},r.createElement(O.S,{isChecked:N,onChange:e=>M(e.target.checked),mr:2}),r.createElement(B.l,{mb:0},"Time Sync"))),r.createElement(F.MJ,null,r.createElement(B.l,null,"Time Sync Delay (ms)"),r.createElement(ee.Q7,{value:U,onChange:e=>P(e),min:0,max:5e3,bg:te,isDisabled:!N},r.createElement(ee.OO,null),r.createElement(ee.lw,null,r.createElement(ee.Q0,null),r.createElement(ee.Sh,null))))),r.createElement(x.s,{mt:8,gap:3,justifyContent:"flex-end"},r.createElement(_.$,{colorScheme:"blue",onClick:async()=>{const e={name:l,ip:c,port:parseInt(d),bit_depth:parseInt(g),sample_rate:parseInt(h),channels:parseInt(E),channel_layout:v,volume:z,delay:R,time_sync:N,time_sync_delay:parseInt(U),protocol:W,volume_normalization:V};try{n?(await p.updateSink(t,e),Y(`Sink "${l}" updated successfully.`)):(await p.addSink(e),Y(`Sink "${l}" added successfully.`)),n||(s(""),u(""),m("4010"),b("32"),f("48000"),k("2"),S("stereo"),$(1),I(0),M(!1),P("0"),D("scream"),q(!1))}catch(e){console.error("Error submitting sink:",e),H("Failed to submit sink. Please try again.")}}},n?"Update Sink":"Add Sink"),r.createElement(_.$,{variant:"outline",onClick:()=>{window.close()}},"Close"))))},se=()=>{const[e]=(0,i.ok)(),t=e.get("name"),n=e.get("source"),a=e.get("sink"),o=!!t,[l,s]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[g,b]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[E,k]=(0,r.useState)(!0),[v,S]=(0,r.useState)(100),[z,$]=(0,r.useState)(0),[R,I]=(0,r.useState)(0),[N,M]=(0,r.useState)([]),[U,P]=(0,r.useState)([]),[W,D]=(0,r.useState)(null),[O,V]=(0,r.useState)(null),q=(0,y.dU)("white","gray.800"),J=(0,y.dU)("gray.200","gray.700"),H=(0,y.dU)("white","gray.700");return(0,r.useEffect)((()=>{(async()=>{try{const[e,t]=await Promise.all([p.getSources(),p.getSinks()]);M(Object.values(e.data)),P(Object.values(t.data)),n&&!o&&Object.values(e.data).some((e=>e.name===n))&&b(n),a&&!o&&Object.values(t.data).some((e=>e.name===a))&&f(a)}catch(e){console.error("Error fetching sources and sinks:",e),D("Failed to fetch sources and sinks. Please try again.")}})()}),[n,a,o]),(0,r.useEffect)((()=>{(async()=>{if(t)try{const e=await p.getRoutes(),n=Object.values(e.data).find((e=>e.name===t));n?(s(n),u(n.name),b(n.source),f(n.sink),k(n.enabled),S(n.volume||100),$(n.delay||0),I(n.timeshift||0)):D(`Route "${t}" not found.`)}catch(e){console.error("Error fetching route:",e),D("Failed to fetch route data. Please try again.")}})()}),[t]),(0,r.useEffect)((()=>{!o&&!d&&g&&h&&u(`${g} to ${h}`)}),[g,h,d,o]),r.createElement(Q.m,{maxW:"container.md",py:8},r.createElement(T.a,{bg:q,borderColor:J,borderWidth:"1px",borderRadius:"lg",p:6,boxShadow:"md"},r.createElement(L.D,{as:"h1",size:"lg",mb:6},o?"Edit Route":"Add Route"),W&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),W),O&&r.createElement(w.F,{status:"success",mb:4,borderRadius:"md"},r.createElement(C._,null),O),r.createElement(X.B,{spacing:4},r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Route Name"),r.createElement(j.p,{value:c,onChange:e=>{u(e.target.value),m(""!==e.target.value)},bg:H})),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Source"),r.createElement(A.l,{value:g,onChange:e=>b(e.target.value),bg:H,placeholder:"Select a source"},N.map((e=>r.createElement("option",{key:e.name,value:e.name},e.name))))),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Sink"),r.createElement(A.l,{value:h,onChange:e=>f(e.target.value),bg:H,placeholder:"Select a sink"},U.map((e=>r.createElement("option",{key:e.name,value:e.name},e.name))))),r.createElement(F.MJ,{display:"flex",alignItems:"center"},r.createElement(B.l,{htmlFor:"enabled",mb:"0"},"Enabled"),r.createElement(Z.d,{id:"enabled",isChecked:E,onChange:e=>k(e.target.checked)})),r.createElement(F.MJ,null,r.createElement(B.l,null,"Volume"),r.createElement(ae,{value:v,onChange:e=>S(e)})),r.createElement(F.MJ,null,r.createElement(B.l,null,"Delay (ms)"),r.createElement(oe,{value:z,onChange:$})),r.createElement(F.MJ,null,r.createElement(B.l,null,"Timeshift"),r.createElement(oe,{value:R,onChange:I}))),r.createElement(x.s,{mt:8,gap:3,justifyContent:"flex-end"},r.createElement(_.$,{colorScheme:"blue",onClick:async()=>{if(!g)return void D("Please select a source.");if(!h)return void D("Please select a sink.");const e={name:c,source:g,sink:h,enabled:E,volume:v,delay:z,timeshift:R};try{o?(await p.updateRoute(t,e),V(`Route "${c}" updated successfully.`)):(await p.addRoute(e),V(`Route "${c}" added successfully.`)),o||(u(""),b(""),f(""),k(!0),S(100),$(0),I(0))}catch(e){console.error("Error submitting route:",e),D("Failed to submit route. Please try again.")}}},o?"Update Route":"Add Route"),r.createElement(_.$,{variant:"outline",onClick:()=>{window.close()}},"Close"))))};var ce=n(2961),ue=n(551);const de=()=>{const[e]=(0,i.ok)(),t=e.get("name"),n=e.get("type")||"source",a=!!t,[o,l]=(0,r.useState)(null),[s,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!0),[m,g]=(0,r.useState)([]),[b,h]=(0,r.useState)([]),[f,E]=(0,r.useState)(null),[k,v]=(0,r.useState)(null),S=(0,y.dU)("white","gray.800"),z=(0,y.dU)("gray.200","gray.700"),$=(0,y.dU)("white","gray.700");return(0,r.useEffect)((()=>{(async()=>{try{if("source"===n){const e=await p.getSources(),t=Object.values(e.data).filter((e=>!e.is_group));h(t)}else{const e=await p.getSinks(),t=Object.values(e.data).filter((e=>!e.is_group));h(t)}}catch(e){console.error(`Error fetching ${n}s:`,e),E(`Failed to fetch ${n}s. Please try again.`)}})()}),[n]),(0,r.useEffect)((()=>{(async()=>{if(t)try{if("source"===n){const e=await p.getSources(),n=Object.values(e.data).find((e=>e.name===t));n?(l(n),c(n.name),d(n.enabled),g(n.group_members||[])):E(`Source group "${t}" not found.`)}else{const e=await p.getSinks(),n=Object.values(e.data).find((e=>e.name===t));n?(l(n),c(n.name),d(n.enabled),g(n.group_members||[])):E(`Sink group "${t}" not found.`)}}catch(e){console.error(`Error fetching ${n} group:`,e),E(`Failed to fetch ${n} group data. Please try again.`)}})()}),[t,n]),r.createElement(Q.m,{maxW:"container.md",py:8},r.createElement(T.a,{bg:S,borderColor:z,borderWidth:"1px",borderRadius:"lg",p:6,boxShadow:"md"},r.createElement(L.D,{as:"h1",size:"lg",mb:6},a?`Edit ${n.charAt(0).toUpperCase()+n.slice(1)} Group`:`Add ${n.charAt(0).toUpperCase()+n.slice(1)} Group`),f&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),f),k&&r.createElement(w.F,{status:"success",mb:4,borderRadius:"md"},r.createElement(C._,null),k),r.createElement(X.B,{spacing:4},r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Group Name"),r.createElement(j.p,{value:s,onChange:e=>c(e.target.value),bg:$})),r.createElement(F.MJ,{display:"flex",alignItems:"center"},r.createElement(B.l,{htmlFor:"enabled",mb:"0"},"Enabled"),r.createElement(Z.d,{id:"enabled",isChecked:u,onChange:e=>d(e.target.checked)})),r.createElement(F.MJ,{isRequired:!0},r.createElement(B.l,null,"Group Members"),r.createElement(T.a,{borderWidth:"1px",borderRadius:"md",p:4,bg:$,maxH:"300px",overflowY:"auto"},r.createElement(ce.$,{colorScheme:"blue",value:m,onChange:e=>g(e)},r.createElement(ue.T,{align:"start",spacing:2},b.map((e=>r.createElement(O.S,{key:e.name,value:e.name},e.name)))))))),r.createElement(x.s,{mt:8,gap:3,justifyContent:"flex-end"},r.createElement(_.$,{colorScheme:"blue",onClick:async()=>{if(0===m.length)return void E("Please select at least one member for the group.");const e={name:s,enabled:u,is_group:!0,group_members:m};try{a?("source"===n?await p.updateSource(t,e):await p.updateSink(t,e),v(`${n.charAt(0).toUpperCase()+n.slice(1)} group "${s}" updated successfully.`)):("source"===n?await p.addSource(e):await p.addSink(e),v(`${n.charAt(0).toUpperCase()+n.slice(1)} group "${s}" added successfully.`)),a||(c(""),d(!0),g([]))}catch(e){console.error(`Error submitting ${n} group:`,e),E(`Failed to submit ${n} group. Please try again.`)}}},a?"Update Group":"Add Group"),r.createElement(_.$,{variant:"outline",onClick:()=>{window.close()}},"Close"))))};var me=n(1738),ge=n(3246),pe=n(5800),be=n(548),he=n(7998),fe=n(1994),Ee=n(9245),ke=n(6350),ve=n(4154),Se=n(2609),ye=n(9546),xe=n(770),we=n(4927),Ce=n(895),ze=n(9702),Te=n(5736);const $e=(0,r.createContext)(null),Re={r:68,g:77,b:82,a:1},_e=new class{listeners=[];constructor(){const e=localStorage.getItem("desktopMenuColor");if(e)try{const t=JSON.parse(e);t&&"object"==typeof t&&"r"in t&&"g"in t&&"b"in t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b?this.currentColor=t:this.currentColor=Re}catch{this.currentColor=Re}else this.currentColor=Re}setCurrentColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:0,g:0,b:0,a:0};if(0===e.r&&0===e.g&&0===e.b)this.currentColor=Re;else{console.log(`ColorContextManager: Setting color to RGB(${e.r}, ${e.g}, ${e.b}, ${e.a})`);const t=(e.r+e.g+e.b)/3,n=.15*t;this.currentColor={a:e.a,r:Math.round(Math.min(e.r,t+n)),g:Math.round(Math.min(e.g,t+n)),b:Math.round(Math.min(e.b,t+n))}}const t=window.matchMedia("(prefers-color-scheme: dark)").matches;this.currentColor=t?this.getDarkerColorColor(.66):this.getLighterColorColor(1.5),localStorage.setItem("desktopMenuColor",JSON.stringify(this.currentColor)),this.notifyListeners()}getCurrentColor(){return this.currentColor}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}notifyListeners(){this.listeners.forEach((e=>e(this.currentColor)))}getColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return`rgba(${this.currentColor.r}, ${this.currentColor.g}, ${this.currentColor.b}, ${e})`}getLighterColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return`rgba(${Math.min(255,Math.round(this.currentColor.r*e))}, \n            ${Math.min(255,Math.round(this.currentColor.g*e))}, \n            ${Math.min(255,Math.round(this.currentColor.b*e))},\n            ${t})`}getDarkerColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return`rgba(${Math.round(this.currentColor.r*e)}, \n            ${Math.round(this.currentColor.g*e)}, \n            ${Math.round(this.currentColor.b*e)},\n            ${t})`}getDarkerColorColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;return{r:Math.round(this.currentColor.r*e),g:Math.round(this.currentColor.g*e),b:Math.round(this.currentColor.b*e),a:this.currentColor.a}}getLighterColorColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;return{r:Math.min(Math.round(this.currentColor.r*e),255),g:Math.min(Math.round(this.currentColor.g*e),255),b:Math.min(Math.round(this.currentColor.b*e),255),a:this.currentColor.a}}},Ie=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(_e.getCurrentColor());(0,r.useEffect)((()=>_e.subscribe((e=>{a(e)}))),[]);const o={baseColor:n,setBaseColor:e=>{_e.setCurrentColor(e)},getColor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return`rgba(${n.r}, ${n.g}, ${n.b}, ${e})`},getLighterColor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return`rgba(${Math.min(255,Math.round(n.r*e))}, \n                ${Math.min(255,Math.round(n.g*e))}, \n                ${Math.min(255,Math.round(n.b*e))},\n                ${t})`},getDarkerColor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return`rgba(${Math.round(n.r*e)}, \n                ${Math.round(n.g*e)}, \n                ${Math.round(n.b*e)},\n                ${t})`},getDarkerColorColor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;return{r:Math.round(n.r*e),g:Math.round(n.g*e),b:Math.round(n.b*e)}},getLighterColorColor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;return{r:Math.min(Math.round(n.r*e),255),g:Math.min(Math.round(n.g*e),255),b:Math.min(Math.round(n.b*e),255)}}};return r.createElement($e.Provider,{value:o},t)},Ae=()=>{const e=(0,r.useContext)($e);if(!e)throw new Error("useColorContext must be used within a ColorProvider");return e},Ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;const r=(window.screen.width-t)/2,a=(window.screen.height-n)/2;window.open(e,"_blank",`width=${t},height=${n},left=${r},top=${a}`)},Me=(e,t)=>{let n;switch(e){case"sources":n=`/site/edit-source?name=${encodeURIComponent(t.name)}`;break;case"sinks":n=`/site/edit-sink?name=${encodeURIComponent(t.name)}`;break;case"routes":n=`/site/edit-route?name=${encodeURIComponent(t.name)}`;break;case"group-sink":n=`/site/edit-group?type=sink&name=${encodeURIComponent(t.name)}`;break;case"group-source":n=`/site/edit-group?type=source&name=${encodeURIComponent(t.name)}`;break;default:return}Ne(n,800,700)},Ue=e=>{let t;switch(e){case"sources":t="/site/add-source";break;case"sinks":t="/site/add-sink";break;case"routes":t="/site/add-route";break;case"group-sink":t="/site/add-group?type=sink";break;case"group-source":t="/site/add-group?type=source";break;default:return}Ne(t,800,700)},Pe=(e,t)=>{const n=`/site/add-route?${e}=${encodeURIComponent(t)}`;Ne(n,800,700)};function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},We.apply(null,arguments)}const De=e=>{let{icon:t,onClick:n,isActive:a=!0,...o}=e;const{getLighterColor:l,getDarkerColor:i}=Ae(),s=a?l(5):i(.5);return r.createElement(R.K,We({"aria-label":t,icon:(e=>{switch(e){case"star":return r.createElement(W.gt3,null);case"check":default:return r.createElement(W.CMH,null);case"x":return r.createElement(W.QCr,null);case"volume":return r.createElement(W.pPd,null);case"volume-mute":return r.createElement(W.FZ2,null);case"equalizer":return r.createElement(W.C8d,null);case"desktop":return r.createElement(W.Wqt,null);case"play":return r.createElement(W.gSK,null);case"pause":return r.createElement(W.kwt,null);case"prevtrack":return r.createElement(W.ttb,null);case"nexttrack":return r.createElement(W.FH8,null);case"headphones":return r.createElement(W.tLl,null);case"waveform":return r.createElement(W.g0N,null);case"arrow-right":return r.createElement(W.Z0P,null);case"arrow-left":return r.createElement(W.QVr,null)}})(t),size:"xs",bgColor:"transparent",border:`1px ${s}`,onClick:n,_hover:{opacity:.8},mx:0},o))},Le=e=>{let{value:t,onChange:n,maxWidth:a="100px",enabled:o}=e;const{getDarkerColor:l,getLighterColor:i}=Ae(),s=o?i(2):l(.2),c=o?i(5):l(.4),u=o?"white":i(3);return r.createElement(T.a,{width:"100%",maxWidth:a},r.createElement(V.Ap,{"aria-label":"Volume control",min:0,max:1,step:.01,value:t,onChange:n,size:"sm",isDisabled:!o,style:{width:"100%"}},r.createElement(V.hB,{bg:s,height:"6px",borderRadius:"3px"},r.createElement(V.hJ,{style:{backgroundColor:c,opacity:o?1:.5,height:"6px"}})),r.createElement(V.OQ,{boxSize:4,style:{backgroundColor:u,opacity:o?1:.5,border:o?`2px solid ${u}`:"none"}})))},Oe=(e,t)=>{const n=`recent${e.charAt(0).toUpperCase()+e.slice(1)}`;let r=JSON.parse(localStorage.getItem(n)||"[]");r=r.filter((e=>e!==t)),r.unshift(t),r.length>5&&r.pop(),localStorage.setItem(n,JSON.stringify(r))},Ve=e=>JSON.parse(localStorage.getItem(`recent${e.charAt(0).toUpperCase()+e.slice(1)}`)||"[]"),qe=e=>{let{route:t,actions:n}=e;return r.createElement(ve.D,{onClick:()=>n.toggleEnabled("routes",t.name,!t.enabled)},r.createElement(Se.z,{spacing:2},r.createElement(ne.I,{boxSize:3,viewBox:"0 0 200 200",color:t.enabled?"green.500":"red.500"},r.createElement("path",{fill:"currentColor",d:t.enabled?"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0":"M 50,50 L 150,150 M 50,150 L 150,50"})),r.createElement(I.E,{bgColor:"transparent !important"},t.name)))},Fe=e=>{let{source:t,routes:n,isStarred:a,actions:o,isSelected:l=!1}=e;const[i,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(t.ip)try{const e=await p.getSources(),n=Object.values(e.data).filter((e=>e.is_process&&e.tag&&e.tag.startsWith(t.ip)));s(n.length>0)}catch(e){console.error("Error checking for processes:",e)}})()}),[t.ip]);const{getLighterColor:c,getDarkerColor:u}=Ae(),d=c(1.25),m=n.filter((e=>e.enabled)).length,g=n.slice(0,3),b=n.slice(3),h=b.length>0;return r.createElement(be.Tr,{bg:l?d:void 0,id:`sources-${encodeURIComponent(t.name)}`,onContextMenu:e=>{e.preventDefault()},cursor:"context-menu",sx:{button:{textColor:"white",backgroundColor:u(1.15),":nth-child(1)":{backgroundColor:u(1)},":hover":{textColor:c(339),backgroundColor:u(.7)}},":hover":{textColor:c(339),backgroundColor:u(.7)},"p.chakra-menu__group__title, div p.chakra-text":{textColor:"white",backgroundColor:u(1.15)}}},r.createElement(ye.Td,null,r.createElement(xe.W,{placement:"auto",strategy:"fixed",boundary:"scrollParent",flip:!0,preventOverflow:!0},r.createElement(we.I,{as:I.E,fontWeight:"normal"},t.name),r.createElement(Ce.c,{maxH:"calc(100vh - 100px)",overflowY:"auto",overflowX:"hidden",pr:2.5,textColor:u(.01),backgroundColor:c(1.15)},r.createElement(T.a,{px:3,py:2},r.createElement(I.E,{fontSize:"sm"},m," active route",1!==m?"s":"",t.vnc_ip&&` • VNC: ${t.vnc_ip}`,0!==t.timeshift&&` • Timeshift: ${t.timeshift}s`)),r.createElement(ze.N,null),r.createElement(ve.D,{onClick:()=>o.toggleStar("sources",t.name),role:"menuitem","aria-label":a?"Remove from Favorites":"Add to Favorites"},a?"★ Remove from Favorites":"☆ Add to Favorites"),r.createElement(ve.D,{onClick:()=>o.toggleActiveSource(t.name),role:"menuitem","aria-label":t.is_primary?"Remove as Primary Source":"Set as Primary Source"},t.is_primary?"Remove as Primary Source":"Set as Primary Source"),r.createElement(ve.D,{onClick:()=>o.toggleEnabled("sources",t.name,!t.enabled)},t.enabled?"Disable":"Enable"),r.createElement(ve.D,{onClick:()=>Me("sources",t)},"Edit Settings"),r.createElement(ve.D,{onClick:()=>o.showEqualizer(!0,"sources",t)},"Equalize"),r.createElement(ve.D,{onClick:()=>o.showSpeakerLayoutPage("sources",t)},"Speaker Layout"),r.createElement(ve.D,{onClick:()=>o.confirmDelete("sources",t.name)},"Delete"),(t.vnc_ip||i)&&r.createElement(r.Fragment,null,r.createElement(ze.N,null),t.vnc_ip&&r.createElement(r.Fragment,null,r.createElement(ve.D,{onClick:()=>o.showVNC(!0,t)},"VNC"),r.createElement(ve.D,{onClick:()=>o.controlSource(t.name,"prevtrack")},"Previous Track"),r.createElement(ve.D,{onClick:()=>{o.controlSource(t.name,"play"),Oe("sources",t.name)}},"Play/Pause"),r.createElement(ve.D,{onClick:()=>o.controlSource(t.name,"nexttrack")},"Next Track")),i&&r.createElement(ve.D,{onClick:()=>{window.open(`/site/processes/${t.ip}`,"_blank")}},"View Processes")),r.createElement(ze.N,null),r.createElement(Te.r,{title:"Routes"},g.map((e=>r.createElement(qe,{key:e.name,route:e,actions:o}))),h&&r.createElement(xe.W,{placement:"right-start"},r.createElement(ve.D,{as:we.I},r.createElement(Se.z,{justify:"space-between",width:"100%"},r.createElement(I.E,null,"More Routes..."),r.createElement(ne.I,{viewBox:"0 0 24 24",boxSize:5},r.createElement("path",{fill:"currentColor",d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})))),r.createElement(Ce.c,null,b.map((e=>r.createElement(qe,{key:e.name,route:e,actions:o})))))),r.createElement(ze.N,null),r.createElement(T.a,{px:3,py:2},r.createElement(I.E,{mb:2,fontSize:"sm"},"Timeshift"),r.createElement(V.Ap,{min:-60,max:0,step:1,value:-t.timeshift||0,maxW:"95%",onChange:e=>o.updateTimeshift("sources",t.name,-e)},r.createElement(V.hB,null,r.createElement(V.hJ,null)),r.createElement(V.OQ,null)))))),r.createElement(ye.Td,null,t.vnc_ip&&r.createElement(Se.z,{spacing:1},r.createElement(De,{icon:"desktop",onClick:()=>o.showVNC(!0,t)}),r.createElement(De,{icon:"prevtrack",onClick:()=>o.controlSource(t.name,"prevtrack")}),r.createElement(De,{icon:"play",onClick:()=>{o.controlSource(t.name,"play"),Oe("sources",t.name)}}),r.createElement(De,{icon:"nexttrack",onClick:()=>o.controlSource(t.name,"nexttrack")}))),r.createElement(ye.Td,null,r.createElement(De,{icon:t.enabled?"volume":"x",isActive:t.enabled,onClick:()=>o.toggleEnabled("sources",t.name,!t.enabled)})),r.createElement(ye.Td,null,r.createElement(T.a,{position:"relative",minW:"250px"},r.createElement(Le,{maxWidth:"250px",value:t.volume,onChange:e=>o.updateVolume("sources",t.name,e),enabled:t.enabled}))))},Be=e=>{let{sources:t,routes:n,starredSources:a,activeSource:o,actions:l,selectedItem:i,showProcesses:s=!1}=e;const c="transparent",[u,d]=(0,r.useState)((()=>localStorage.getItem("sourceList_sortField")||null)),[m,g]=(0,r.useState)((()=>localStorage.getItem("sourceList_sortDirection")||"none")),p=e=>{let t="asc",n=e;u===e&&("asc"===m?t="desc":"desc"===m?(t="none",n=null):t="asc"),d(n),g(t),n?localStorage.setItem("sourceList_sortField",n):localStorage.removeItem("sourceList_sortField"),localStorage.setItem("sourceList_sortDirection",t)};let b=[...t.map((e=>({...e,is_primary:e.name===o})))].sort(((e,t)=>{if(null===u||"none"===m)return 0;let n=0;if("name"===u)n=e.name.localeCompare(t.name);else if("status"===u){const r=e.enabled;n=r===t.enabled?0:r?-1:1}else"volume"===u&&(n=e.volume-t.volume);return"asc"===m?n:-n}));return s||(b=b.filter((e=>!e.is_process))),r.createElement(T.a,{overflowX:"auto",width:"100%"},r.createElement(ge.X,{variant:"simple",size:"sm",width:"100%"},r.createElement(pe.d,{sx:{th:{borderBottom:"1px",borderColor:"rgba(0,0,0,.1)"}}},r.createElement(be.Tr,{sx:{th:{color:"#EEEEEE"}}},r.createElement(he.Th,{bg:c,cursor:"pointer",onClick:()=>p("name")},r.createElement(x.s,{align:"center"},"Name","name"===u&&"none"!==m&&r.createElement(ne.I,{as:"asc"===m?Ee.D:ke.k,ml:1,boxSize:3}))),r.createElement(he.Th,{bg:c,width:"120px"},"Actions"),r.createElement(he.Th,{bg:c,width:"40px",cursor:"pointer",onClick:()=>p("status")},r.createElement(x.s,{align:"center"},"Status","status"===u&&"none"!==m&&r.createElement(ne.I,{as:"asc"===m?Ee.D:ke.k,ml:1,boxSize:3}))),r.createElement(he.Th,{bg:c,width:"100px",cursor:"pointer",onClick:()=>p("volume")},r.createElement(x.s,{align:"center"},"Volume","volume"===u&&"none"!==m&&r.createElement(ne.I,{as:"asc"===m?Ee.D:ke.k,ml:1,boxSize:3}))))),r.createElement(fe.N,null,b.map((e=>{return r.createElement(Fe,{key:e.name,source:e,isStarred:a.includes(e.name),actions:l,isSelected:i===e.name,routes:(t=e.name,n.filter((e=>e.source===t)))});var t})))))};var je=n(1035),Je=n(3609),He=n(5444),Ge=n(5323),Ye=n(714);const Ke=e=>{let{isOpen:t,onClose:n,onConfirm:a,title:o,message:l,confirmButtonText:i="Delete",confirmColorScheme:s="red"}=e;const c=r.useRef(null);return r.createElement(je.Lt,{isOpen:t,leastDestructiveRef:c,onClose:n},r.createElement(Je.m,{bg:"rgba(0, 0, 0, 0)"},r.createElement(je.EO,{pointerEvents:"auto",position:"fixed",bottom:"30%",left:"50%",transform:"translateX(-50%)"},r.createElement(He.r,{fontSize:"lg",fontWeight:"bold"},o),r.createElement(Ge.c,null,l),r.createElement(Ye.j,null,r.createElement(_.$,{ref:c,onClick:n},"Cancel"),r.createElement(_.$,{colorScheme:s,onClick:()=>{a(),n()},ml:3},i)))))},Qe=(e,t,n,r,a,o,l)=>{const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;const r=(window.screen.width-t)/2,a=(window.screen.height-n)/2;window.open(e,"_blank",`width=${t},height=${n},left=${r},top=${a}`)};return{toggleStar:(n,r)=>{e(n,(e=>e.includes(r)?e.filter((e=>e!==r)):[...e,r]));const a=`starred${n.charAt(0).toUpperCase()+n.slice(1)}`;try{const e=JSON.parse(localStorage.getItem(a)||"[]");e.includes(r)?localStorage.setItem(a,JSON.stringify(e.filter((e=>e!==r)))):localStorage.setItem(a,JSON.stringify([...e,r]))}catch(e){console.error(`Error saving starred ${n} to localStorage:`,e),t(`Error saving starred ${n}`)}},toggleEnabled:async(e,n,r)=>{try{"sources"===e?r?await p.enableSource(n):await p.disableSource(n):"sinks"===e?r?await p.enableSink(n):await p.disableSink(n):"routes"===e&&(r?await p.enableRoute(n):await p.disableRoute(n))}catch(n){console.error(`Error toggling ${e} enabled status:`,n),t(`Error toggling ${e} enabled status`)}},updateVolume:async(e,n,r)=>{try{"sources"===e?await p.updateSourceVolume(n,r):"sinks"===e?await p.updateSinkVolume(n,r):"routes"===e&&await p.updateRouteVolume(n,r)}catch(n){console.error(`Error updating ${e} volume:`,n),t(`Error updating ${e} volume`)}},updateTimeshift:async(e,n,r)=>{try{switch(e){case"sources":await p.updateSourceTimeshift(n,r);break;case"sinks":await p.updateSinkTimeshift(n,r);break;case"routes":await p.updateRouteTimeshift(n,r)}}catch(n){console.error(`Error updating ${e} timeshift:`,n),t(`Error updating ${e} timeshift`)}},showEqualizer:(e,t,n)=>{e&&n&&i(`/site/equalizer?type=${t}&name=${encodeURIComponent(n.name)}`)},showVNC:(e,t)=>{e&&t&&t.vnc_ip&&t.vnc_port&&i(`/site/vnc?ip=${t.vnc_ip}&port=${t.vnc_port}`)},toggleActiveSource:e=>{n(e)},transcribeSink:e=>{r(e)},listenToSink:e=>{a(e)},visualizeSink:e=>{o(e)},controlSource:async(e,n)=>{try{const t="pause"===n?"play":n;await p.controlSource(e,t)}catch(e){console.error("Error controlling source:",e),t("Error controlling source")}},navigate:(e,t)=>{l(e,t)}}},Xe=()=>{const{ip:e}=(0,s.g)(),[t,n]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null),[c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[b,h]=(0,r.useState)(null),f=(0,y.dU)("white","gray.800"),k=(0,y.dU)("gray.200","gray.700"),{sources:v,sinks:S,onTranscribeSink:z,onListenToSink:$,onVisualizeSink:R,onToggleActiveSource:A}=E();(0,r.useEffect)((()=>{if(!e)return i("IP address is required"),void o(!1);console.log("Filtering processes for IP:",e);const t=v.filter((t=>t.is_process&&t.tag&&t.tag.startsWith(e)));n(t),console.log(`Found ${t.length} processes for IP ${e}`),o(!1)}),[e,v]);const N=(e,t)=>{console.log(`Navigate to ${e} ${t}`)},M=(e,t)=>{console.log(`Set starred ${e}`)},U=(e,t)=>{g(e),h(t),d(!0)},P=(0,r.useMemo)((()=>{const e=Qe(M,i,A,z,(e=>$(e&&S.find((t=>t.name===e))||null)),(e=>R(e&&S.find((t=>t.name===e))||null)),N);return e.confirmDelete=U,e}),[A,z,$,R,S]);return r.createElement(T.a,{width:"100%",height:"100vh",p:4},r.createElement(Ke,{isOpen:u,onClose:()=>d(!1),onConfirm:async()=>{if(m&&b)try{"sources"===m?await p.deleteSource(b):"sinks"===m?await p.deleteSink(b):"routes"===m&&await p.deleteRoute(b)}catch(e){console.error(`Error deleting ${m}:`,e),i(`Error deleting ${m}`)}finally{d(!1),g(null),h(null)}},title:"Delete Item",message:`Are you sure you want to delete ${b}? This action cannot be undone.`}),r.createElement(T.a,{bg:f,borderColor:k,borderWidth:"1px",borderRadius:"lg",p:6,boxShadow:"md",height:"100%",display:"flex",flexDirection:"column"},r.createElement(L.D,{as:"h1",size:"lg",mb:6},"Processes for IP: ",e),l&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),l),a?r.createElement(x.s,{justify:"center",align:"center",py:10,flex:"1"},r.createElement(me.y,{size:"xl"})):t.length>0?r.createElement(T.a,{overflowX:"auto",flex:"1"},r.createElement(Ie,null,r.createElement(Be,{sources:t,routes:[],starredSources:[],activeSource:null,actions:P,selectedItem:c,showProcesses:!0}))):r.createElement(x.s,{justify:"center",align:"center",py:10,flex:"1"},r.createElement(I.E,{color:"gray.500"},"No processes found for IP: ",e)),r.createElement(x.s,{mt:4,justifyContent:"flex-end"},r.createElement(_.$,{variant:"outline",onClick:()=>{window.close()}},"Close"))))};var Ze=n(5828),et=n(0);const tt={1:"Mono",2:"Stereo",4:"Quadraphonic",6:"5.1 Surround",8:"7.1 Surround"},nt=()=>Array(8).fill(null).map(((e,t)=>Array(8).fill(null).map(((e,n)=>t===n?1:0)))),rt=()=>{const[e]=(0,i.ok)(),{sources:t,sinks:n,routes:a,refreshAppContext:o}=E(),l=e.get("type"),s=e.get("name"),[c,u]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[g,b]=(0,r.useState)("2"),[h,f]=(0,r.useState)({}),[k,v]=(0,r.useState)(null),[S,z]=(0,r.useState)(!1),[$,R]=(0,r.useState)(null),N=[{value:"1",label:"Mono Input (1ch)"},{value:"2",label:"Stereo Input (2ch)"},{value:"4",label:"Quad Input (4ch)"},{value:"6",label:"5.1 Input (6ch)"},{value:"8",label:"7.1 Input (8ch)"}];(0,r.useEffect)((()=>{let e=null,r=null;l&&s?(r=("sources"===l?t:"sinks"===l?n:a).find((e=>e.name===s))||null,r||0===t.length&&0===n.length&&0===a.length||(e=`Item data not found for ${l}: '${s}'. Ensure the item exists.`)):e="Required URL parameters (type and name) are missing.",u(r),m(e),R(e)}),[l,s,t,n,a]),(0,r.useEffect)((()=>{if(c){const e=c.speaker_layouts||{};f(e),d&&d.startsWith("Item data not found")?R(null):R(d)}else{f({});const e=0===t.length&&0===n.length&&0===a.length;e||d?e&&R(null):R(`Item data not found for ${l}: '${s}'.`)}}),[c,d,t,n,a,l,s]);const M=r.useMemo((()=>{const e=parseInt(g,10),t=h[e];return t?{...t,matrix:t.matrix||nt()}:{auto_mode:!0,matrix:nt()}}),[g,h]),U=(0,r.useCallback)((()=>{if(!c)return void v("Cannot load default matrix: Item data is not available.");if("sinks"!==l&&"sources"!==l&&"routes"!==l)return void v("Cannot load default matrix: Invalid item type for this operation.");let e=2;const t=c;"sinks"===l?(e=t.channels||8,t.channels||console.warn(`Sink "${c.name}" channels property is undefined. Defaulting to 8.`)):"sources"===l&&t.channels&&(e=t.channels);const n=parseInt(g,10);if(isNaN(n))return void v("Cannot load default matrix: Invalid input channel selection.");const r=((e,t)=>{const n=Array(8).fill(null).map((()=>Array(8).fill(0)));switch(e){case 1:for(let e=0;e<Math.min(t,8);e++)n[0][e]=1;break;case 2:switch(t){case 1:n[0][0]=.5,n[1][0]=.5;break;case 2:n[0][0]=1,n[1][1]=1;break;case 4:n[0][0]=1,n[0][2]=1,n[1][1]=1,n[1][3]=1;break;case 6:n[0][0]=1,n[0][5]=1,n[0][3]=.5,n[0][4]=.5,n[1][1]=1,n[1][6]=1,n[1][3]=.5,n[1][4]=.5;break;case 8:n[0][0]=1,n[0][6]=1,n[0][4]=1,n[0][2]=.5,n[0][3]=.5,n[1][1]=1,n[1][7]=1,n[1][5]=1,n[1][2]=.5,n[1][3]=.5}break;case 4:switch(t){case 1:n[0][0]=.25,n[1][0]=.25,n[2][0]=.25,n[3][0]=.25;break;case 2:n[0][0]=.5,n[1][1]=.5,n[2][0]=.5,n[3][1]=.5;break;case 4:n[0][0]=1,n[1][1]=1,n[2][2]=1,n[3][3]=1;break;case 6:n[0][0]=1,n[1][1]=1,n[0][2]=.5,n[1][2]=.5,n[0][3]=.25,n[1][3]=.25,n[2][3]=.25,n[3][3]=.25,n[2][4]=1,n[3][5]=1;break;case 8:n[0][0]=1,n[1][1]=1,n[0][2]=.5,n[1][2]=.5,n[0][3]=.25,n[1][3]=.25,n[2][3]=.25,n[3][3]=.25,n[2][4]=1,n[3][5]=1,n[0][6]=.5,n[1][7]=.5,n[2][6]=.5,n[3][7]=.5}break;case 6:switch(t){case 1:n[0][0]=.2,n[1][0]=.2,n[2][0]=.2,n[4][0]=.2,n[5][0]=.2;break;case 2:n[0][0]=.33,n[1][1]=.33,n[2][0]=.33,n[2][1]=.33,n[4][0]=.33,n[5][1]=.33;break;case 4:n[0][0]=.66,n[1][1]=.66,n[2][0]=.33,n[2][1]=.33,n[4][2]=1,n[5][3]=1;break;case 6:n[0][0]=1,n[1][1]=1,n[2][2]=1,n[3][3]=1,n[4][4]=1,n[5][5]=1;break;case 8:n[0][0]=1,n[1][1]=1,n[2][2]=1,n[3][3]=1,n[4][4]=1,n[5][5]=1,n[0][6]=.5,n[1][7]=.5,n[4][6]=.5,n[5][7]=.5}break;case 8:switch(t){case 1:n[0][0]=1/7,n[1][0]=1/7,n[2][0]=1/7,n[4][0]=1/7,n[5][0]=1/7,n[6][0]=1/7,n[7][0]=1/7;break;case 2:n[0][0]=.5,n[1][1]=.5,n[2][0]=.25,n[2][1]=.25,n[4][0]=.125,n[5][1]=.125,n[6][0]=.125,n[7][1]=.125;break;case 4:n[0][0]=.5,n[1][1]=.5,n[2][0]=.25,n[2][1]=.25,n[4][2]=.66,n[5][3]=.66,n[6][0]=.25,n[7][1]=.25,n[6][2]=.33,n[7][3]=.33;break;case 6:n[0][0]=.66,n[1][1]=.66,n[2][2]=1,n[3][3]=1,n[4][4]=.66,n[5][5]=.66,n[6][0]=.33,n[7][1]=.33,n[6][4]=.33,n[7][5]=.33;break;case 8:n[0][0]=1,n[1][1]=1,n[2][2]=1,n[3][3]=1,n[4][4]=1,n[5][5]=1,n[6][6]=1,n[7][7]=1}}return n})(n,e),a={auto_mode:!1,matrix:r};f((e=>({...e,[n]:a}))),v(null)}),[c,l,g,f,v]),P=(0,y.dU)("white","gray.800"),W=(0,y.dU)("white","gray.600"),D=(0,y.dU)("gray.800","white"),V=(0,y.dU)("gray.200","gray.700"),q=["FL","FR","C","LFE","BL","BR","SL","SR"],J="sinks"===l&&c&&!c.is_group,H=J?c.channels:8;if($)return r.createElement(T.a,{p:5,bg:P,borderRadius:"lg",boxShadow:"xl",color:D,maxW:"600px",w:"100%",m:"auto",mt:"10%"},r.createElement(w.F,{status:"error",borderRadius:"md"},r.createElement(C._,null),$),r.createElement(_.$,{onClick:()=>window.close(),mt:4,colorScheme:"blue"},"Close"));if(!c)return r.createElement(T.a,{p:5,bg:P,borderRadius:"lg",boxShadow:"xl",color:D,maxW:"600px",w:"100%",m:"auto",mt:"10%"},r.createElement(I.E,null,"Loading speaker layout data for ",s||"item","..."));const G=M.matrix&&8===M.matrix.length?M.matrix:nt(),Y=J?tt[c.channels]||`${c.channels}-channel`:null;return r.createElement(T.a,{p:5,bg:P,borderRadius:"lg",boxShadow:"xl",color:D,maxW:"600px",w:"100%",m:"auto",mt:5},r.createElement(L.D,{size:"md",mb:2,textAlign:"center"},"Speaker Layout: ",c.name),J&&Y&&r.createElement(I.E,{fontSize:"sm",textAlign:"center",mb:1,color:"gray.500"},"Output Mode: ",Y," (",H," channels)"),r.createElement(F.MJ,{mb:4},r.createElement(B.l,{htmlFor:"inputChannelKeySelect",fontWeight:"semibold"},"Input Channel Configuration:"),r.createElement(A.l,{id:"inputChannelKeySelect",value:g,onChange:e=>b(e.target.value),bg:W,borderColor:V},N.map((e=>r.createElement("option",{key:e.value,value:e.value},e.label))))),k&&r.createElement(w.F,{status:"error",mb:4,borderRadius:"md"},r.createElement(C._,null),k),r.createElement(F.MJ,{display:"flex",alignItems:"center",mb:4},r.createElement(B.l,{htmlFor:"autoModeCheckbox",mb:"0",mr:3,fontWeight:"semibold"},"Auto Mode (for selected input):"),r.createElement(O.S,{id:"autoModeCheckbox",isChecked:M.auto_mode,onChange:e=>{const t=e.target.checked,n=parseInt(g,10);f((e=>{const r=e[n]||{auto_mode:!t,matrix:nt()};return{...e,[n]:{...r,auto_mode:t,matrix:t?nt():r.matrix&&8===r.matrix.length?r.matrix:nt()}}}))},colorScheme:"blue",size:"lg"})),r.createElement(T.a,{opacity:M.auto_mode?.5:1,pointerEvents:M.auto_mode?"none":"auto"},r.createElement(I.E,{mb:1,fontSize:"sm",fontWeight:"medium"},"Matrix for ",N.find((e=>e.value===g))?.label||"Selected Input",":"),r.createElement(I.E,{mb:3,fontSize:"xs",fontStyle:"italic"},"(Values 0-100, where 100 = 1.0 gain)"),r.createElement(I.E,{textAlign:"center",fontWeight:"semibold",mb:1,fontSize:"sm"},"Output Channels →"),r.createElement(Ze.x,{templateColumns:"50px repeat(8, 1fr)",gap:1,alignItems:"center",mb:1},r.createElement(et.E,{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},r.createElement(I.E,{fontSize:"xs",fontWeight:"bold"},"Inputs")),q.map(((e,t)=>r.createElement(et.E,{key:`col-label-${t}`,textAlign:"center",opacity:J&&t>=H?.5:1},r.createElement(te.m,{label:`Output: ${e}`,placement:"top",isDisabled:Boolean(J&&t>=H)},r.createElement(I.E,{fontSize:"xs",fontWeight:"bold"},e.substring(0,2))))))),G.map(((e,t)=>r.createElement(Ze.x,{templateColumns:"50px repeat(8, 1fr)",gap:1,alignItems:"center",key:`matrix-row-${t}`,mb:1},r.createElement(et.E,{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},r.createElement(te.m,{label:`Input: ${q[t]}`,placement:"left"},r.createElement(I.E,{fontSize:"xs",fontWeight:"bold"},q[t].substring(0,2)))),e.map(((e,n)=>{const a=!!(J&&n>=H);return r.createElement(et.E,{key:`cell-${t}-${n}`},r.createElement(j.p,{type:"number",value:Math.round(100*(e||0)),onChange:e=>((e,t,n)=>{const r=parseFloat(n),a=Math.max(0,Math.min(100,Number.isNaN(r)?0:r))/100,o=parseInt(g,10);f((n=>{const r=n[o]||{auto_mode:!0,matrix:nt()},l=(r.matrix&&8===r.matrix.length?r.matrix:nt()).map(((n,r)=>n.map(((n,o)=>r===e&&o===t?a:n))));return{...n,[o]:{...r,auto_mode:!1,matrix:l}}}))})(t,n,e.target.value),min:0,max:100,step:1,size:"sm",textAlign:"center",isDisabled:M.auto_mode||a,bg:a?"gray.600":W,borderColor:V,_hover:{borderColor:a?V:"blue.400"},_focus:{borderColor:a?V:"blue.500",boxShadow:a?"none":"0 0 0 1px var(--chakra-colors-blue-500)"},title:a?`Output channel ${q[n]} not available for this sink`:""}))})))))),r.createElement(x.s,{mt:6,justifyContent:"space-between",alignItems:"center"},r.createElement(x.s,{gap:2},r.createElement(_.$,{onClick:()=>{const e=parseInt(g,10);f((t=>({...t,[e]:{auto_mode:!0,matrix:nt()}})))},variant:"outline",size:"sm",isDisabled:S||!c},"Reset Current to Auto"),r.createElement(_.$,{onClick:U,variant:"outline",colorScheme:"teal",size:"sm",isDisabled:S||!c||!g},"Load Default")),r.createElement(x.s,{gap:3},r.createElement(_.$,{onClick:()=>window.close(),variant:"ghost",size:"sm",isDisabled:S},"Close"),r.createElement(_.$,{colorScheme:"blue",onClick:async()=>{if(c&&l){z(!0),v(null);try{const e={speaker_layouts:h};switch(l){case"sources":await p.updateSource(c.name,e);break;case"sinks":await p.updateSink(c.name,e);break;case"routes":await p.updateRoute(c.name,e);break;default:return v(`Invalid item type for update: ${l}`),void z(!1)}"function"==typeof o&&o(),console.log("Speaker layouts applied via general update. App context refreshed.")}catch(e){v("Failed to apply speaker layouts using general update. Please try again."),console.error(e)}finally{z(!1)}}else v("Cannot apply changes: Item data or type is missing.")},isLoading:S,size:"sm",isDisabled:!c},"Apply All Layouts"))))};var at=n(2468),ot=n(9637),lt=n(2280),it=n(1678),st=n(913),ct=n(3411),ut=n(1488),dt=n(9822);const mt=()=>{const[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[i,s]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),d=(0,at.d)(),{isOpen:m,onToggle:g}=(0,ot.j)();(0,r.useEffect)((()=>{(async()=>{try{const[e,n]=await Promise.all([p.getStats(),p.getSettings()]);t(e.data),a(n.data),l(JSON.parse(JSON.stringify(n.data)))}catch(e){u("Failed to fetch data. Please try again later."),console.error(e)}finally{s(!1)}})();const e=setInterval((()=>{p.getStats().then((e=>t(e.data))).catch((e=>console.error("Failed to fetch stats",e)))}),2e3);return()=>clearInterval(e)}),[]);const b=(e,t,r)=>{n&&a((n=>{if(!n)return null;const a={...n};return a[e][t]=r,a}))};if(i)return r.createElement(T.a,{textAlign:"center",mt:"20"},r.createElement(me.y,{size:"xl"}),r.createElement(I.E,{mt:4},"Loading Stats..."));if(c)return r.createElement(w.F,{status:"error",mt:"10"},r.createElement(C._,null),c);if(!e)return r.createElement(I.E,null,"No stats available.");const h=function(e,t,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!n)return null;const i=n[e][t];return r.createElement(F.MJ,null,r.createElement(B.l,null,a),l?r.createElement(Z.d,{isChecked:Boolean(i),onChange:n=>b(e,t,n.target.checked)}):r.createElement(ee.Q7,{value:i,onChange:n=>b(e,t,parseFloat(n)),step:o},r.createElement(ee.OO,null),r.createElement(ee.lw,null,r.createElement(ee.Q0,null),r.createElement(ee.Sh,null))))};return r.createElement(T.a,{p:5},r.createElement(L.D,{as:"h1",mb:6,textAlign:"center"},"Audio Engine Statistics"),r.createElement(lt.Z,{mb:6},r.createElement(it.a,null,r.createElement(L.D,{size:"md"},"Global Stats")),r.createElement(st.b,null,r.createElement(ct.r,{columns:{base:1,md:2},spacing:5},r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Timeshift Buffer Total Size:"),r.createElement(I.E,null,e.global_stats.timeshift_buffer_total_size?.toLocaleString()??"N/A")),r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Packets Added to Timeshift/sec:"),r.createElement(I.E,null,e.global_stats.packets_added_to_timeshift_per_second?.toFixed(2)??"N/A"))))),r.createElement(lt.Z,{mb:6},r.createElement(it.a,null,r.createElement(L.D,{size:"md"},"Source Input Stream Stats")),r.createElement(st.b,null,r.createElement(ut.K,null,r.createElement(ge.X,{variant:"simple"},r.createElement(pe.d,null,r.createElement(be.Tr,null,r.createElement(he.Th,null,"Stream Tag"),r.createElement(he.Th,{isNumeric:!0},"Jitter (ms)"),r.createElement(he.Th,{isNumeric:!0},"Packets/sec"),r.createElement(he.Th,{isNumeric:!0},"Late Packets"),r.createElement(he.Th,{isNumeric:!0},"Lagging Events"),r.createElement(he.Th,{isNumeric:!0},"TM Underruns"),r.createElement(he.Th,{isNumeric:!0},"TM Discards"),r.createElement(he.Th,{isNumeric:!0},"Arrival Error (ms)"),r.createElement(he.Th,{isNumeric:!0},"Anchor Drift (ms)"),r.createElement(he.Th,{isNumeric:!0},"Target Buffer (ms)"),r.createElement(he.Th,{isNumeric:!0},"Available Chunks"),r.createElement(he.Th,{isNumeric:!0},"Buffer Fill %"),r.createElement(he.Th,{isNumeric:!0},"Total Packets"))),r.createElement(fe.N,null,Object.entries(e.stream_stats).map((e=>{let[t,n]=e;return r.createElement(be.Tr,{key:t},r.createElement(ye.Td,null,t),r.createElement(ye.Td,{isNumeric:!0},n.jitter_estimate_ms?.toFixed(2)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.packets_per_second?.toFixed(2)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.timeshift_buffer_late_packets?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.timeshift_buffer_lagging_events?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.tm_buffer_underruns?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.tm_packets_discarded?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.last_arrival_time_error_ms?.toFixed(2)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.total_anchor_adjustment_ms?.toFixed(4)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.target_buffer_level_ms?.toFixed(0)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.timeshift_buffer_size?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.buffer_target_fill_percentage?.toFixed(2)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},n.total_packets_in_stream?.toLocaleString()??"N/A"))}))))))),r.createElement(lt.Z,{mb:6},r.createElement(it.a,null,r.createElement(L.D,{size:"md"},"Source Input Stream Processor Stats")),r.createElement(st.b,null,r.createElement(ut.K,null,r.createElement(ge.X,{variant:"simple"},r.createElement(pe.d,null,r.createElement(be.Tr,null,r.createElement(he.Th,null,"Instance ID"),r.createElement(he.Th,null,"Source Tag"),r.createElement(he.Th,{isNumeric:!0},"Input Queue"),r.createElement(he.Th,{isNumeric:!0},"Output Queue"),r.createElement(he.Th,{isNumeric:!0},"Processed/sec"),r.createElement(he.Th,{isNumeric:!0},"Reconfigurations"))),r.createElement(fe.N,null,e.source_stats.map((e=>r.createElement(be.Tr,{key:e.instance_id},r.createElement(ye.Td,null,e.instance_id),r.createElement(ye.Td,null,e.source_tag),r.createElement(ye.Td,{isNumeric:!0},e.input_queue_size?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},e.output_queue_size?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},e.packets_processed_per_second?.toFixed(2)??"N/A"),r.createElement(ye.Td,{isNumeric:!0},e.reconfigurations?.toLocaleString()??"N/A"))))))))),r.createElement(lt.Z,{mb:6},r.createElement(it.a,null,r.createElement(L.D,{size:"md"},"Sink Stats")),r.createElement(st.b,null,e.sink_stats.map((e=>r.createElement(T.a,{key:e.sink_id,mb:4,p:4,borderWidth:"1px",borderRadius:"md"},r.createElement(L.D,{size:"sm",mb:2},e.sink_id),r.createElement(Se.z,{spacing:10,mb:4},r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Active Streams:"),r.createElement(I.E,null,e.active_input_streams?.toLocaleString()??"N/A")),r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Total Streams:"),r.createElement(I.E,null,e.total_input_streams?.toLocaleString()??"N/A")),r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Mixed/sec:"),r.createElement(I.E,null,e.packets_mixed_per_second?.toFixed(2)??"N/A")),r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Buffer Underruns:"),r.createElement(I.E,null,e.sink_buffer_underruns?.toLocaleString()??"N/A")),r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"Buffer Overflows:"),r.createElement(I.E,null,e.sink_buffer_overflows?.toLocaleString()??"N/A")),r.createElement(ue.T,{align:"start"},r.createElement(I.E,{fontWeight:"bold"},"MP3 Overflows:"),r.createElement(I.E,null,e.mp3_buffer_overflows?.toLocaleString()??"N/A"))),e.webrtc_listeners&&e.webrtc_listeners.length>0&&r.createElement(r.Fragment,null,r.createElement(L.D,{size:"xs",mb:2},"WebRTC Listeners"),r.createElement(ut.K,null,r.createElement(ge.X,{variant:"simple",size:"sm"},r.createElement(pe.d,null,r.createElement(be.Tr,null,r.createElement(he.Th,null,"Listener ID"),r.createElement(he.Th,null,"State"),r.createElement(he.Th,{isNumeric:!0},"PCM Buffer"),r.createElement(he.Th,{isNumeric:!0},"Sent/sec"))),r.createElement(fe.N,null,e.webrtc_listeners.map((e=>r.createElement(be.Tr,{key:e.listener_id},r.createElement(ye.Td,null,e.listener_id),r.createElement(ye.Td,null,e.connection_state),r.createElement(ye.Td,{isNumeric:!0},e.pcm_buffer_size?.toLocaleString()??"N/A"),r.createElement(ye.Td,{isNumeric:!0},e.packets_sent_per_second?.toFixed(2)??"N/A"))))))))))))),r.createElement(lt.Z,null,r.createElement(it.a,null,r.createElement(Se.z,{justify:"space-between"},r.createElement(L.D,{size:"md"},"Audio Engine Tuning"),r.createElement(_.$,{onClick:g},m?"Hide":"Show"))),r.createElement(dt.S,{in:m,animateOpacity:!0},r.createElement(st.b,null,n&&r.createElement(ue.T,{spacing:6,align:"stretch"},r.createElement(T.a,null,r.createElement(L.D,{size:"sm",mb:4},"Timeshift Tuning"),r.createElement(ct.r,{columns:{base:1,md:3},spacing:4},h("timeshift_tuning","cleanup_interval_ms","Cleanup Interval (ms)"),h("timeshift_tuning","reanchor_interval_sec","Re-anchor Interval (s)"),h("timeshift_tuning","jitter_smoothing_factor","Jitter Smoothing Factor",.1),h("timeshift_tuning","jitter_safety_margin_multiplier","Jitter Safety Margin",.1),h("timeshift_tuning","late_packet_threshold_ms","Late Packet Threshold (ms)",1),h("timeshift_tuning","target_buffer_level_ms","Target Buffer Level (ms)"),h("timeshift_tuning","proportional_gain_kp","Proportional Gain (Kp)",1e-4),h("timeshift_tuning","min_playback_rate","Min Playback Rate",.01),h("timeshift_tuning","max_playback_rate","Max Playback Rate",.01),h("timeshift_tuning","loop_max_sleep_ms","Loop Max Sleep (ms)"))),r.createElement(T.a,null,r.createElement(L.D,{size:"sm",mb:4},"Mixer Tuning"),r.createElement(ct.r,{columns:{base:1,md:3},spacing:4},h("mixer_tuning","grace_period_timeout_ms","Grace Period Timeout (ms)"),h("mixer_tuning","grace_period_poll_interval_ms","Grace Period Poll (ms)"),h("mixer_tuning","mp3_bitrate_kbps","MP3 Bitrate (kbps)"),h("mixer_tuning","mp3_vbr_enabled","MP3 VBR Enabled",1,!0),h("mixer_tuning","mp3_output_queue_max_size","MP3 Output Queue Max Size"))),r.createElement(T.a,null,r.createElement(L.D,{size:"sm",mb:4},"Source Processor Tuning"),r.createElement(ct.r,{columns:{base:1,md:3},spacing:4},h("source_processor_tuning","command_loop_sleep_ms","Command Loop Sleep (ms)"))),r.createElement(T.a,null,r.createElement(L.D,{size:"sm",mb:4},"Processor Tuning"),r.createElement(ct.r,{columns:{base:1,md:3},spacing:4},h("processor_tuning","oversampling_factor","Oversampling Factor"),h("processor_tuning","volume_smoothing_factor","Volume Smoothing Factor",.001),h("processor_tuning","dc_filter_cutoff_hz","DC Filter Cutoff (Hz)",1),h("processor_tuning","soft_clip_threshold","Soft Clip Threshold",.1),h("processor_tuning","soft_clip_knee","Soft Clip Knee",.1),h("processor_tuning","normalization_target_rms","Normalization Target RMS",.1),h("processor_tuning","normalization_attack_smoothing","Normalization Attack Smoothing",.01),h("processor_tuning","normalization_decay_smoothing","Normalization Decay Smoothing",.01),h("processor_tuning","dither_noise_shaping_factor","Dither Noise Shaping Factor",.01))),r.createElement(Se.z,{justify:"flex-end",spacing:4},r.createElement(_.$,{onClick:()=>{o&&a(JSON.parse(JSON.stringify(o)))}},"Reset"),r.createElement(_.$,{colorScheme:"blue",onClick:async()=>{if(n)try{await p.updateSettings(n),d({title:"Settings saved.",description:"Your audio engine settings have been updated.",status:"success",duration:5e3,isClosable:!0}),l(JSON.parse(JSON.stringify(n)))}catch(e){d({title:"Error saving settings.",description:"There was an issue saving your settings.",status:"error",duration:5e3,isClosable:!0}),console.error(e)}}},"Save")))))))};var gt=n(2818);const pt=()=>{const{sinkName:e}=(0,s.g)(),{onListenToSink:t,listeningStatus:n,playbackError:a,silenceSessionAudioRef:o,isSilenceAudioPlaying:l,startedListeningSinks:i,setStartedListeningSinks:c}=E(),u=e&&n.get(e)||!1,d=e&&i.get(e)||!1,[m,g]=(0,r.useState)("disconnected"),p=(0,r.useRef)(null),b=(0,r.useRef)(0),h=(0,r.useRef)(t);return(0,r.useEffect)((()=>{h.current=t})),(0,r.useEffect)((()=>{e&&(document.title=u?`Listening to ${e}`:`Not listening to ${e}`,u&&(g("connected"),b.current=0))}),[u,e]),(0,r.useEffect)((()=>{e&&a.has(e)&&c((t=>new Map(t).set(e,!1)))}),[a,e]),(0,r.useEffect)((()=>{l||e&&c((t=>new Map(t).set(e,!1)))}),[l,e,c]),(0,r.useEffect)((()=>{const t=()=>{"visible"===document.visibilityState&&d&&!u&&e&&l&&(console.log("Page is visible again, trying to reconnect."),h.current(e))};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}),[d,u,e,l]),(0,r.useEffect)((()=>{e&&c((t=>new Map(t).set(e,!0)))}),[e]),(0,r.useEffect)((()=>{if(d&&!u&&e){g(b.current>0?"reconnecting":"connecting"),p.current&&clearTimeout(p.current);const t=Math.min(1e3*2**b.current,3e4);return console.log(`Attempting to connect in ${t}ms`),p.current=setTimeout((()=>{h.current(e),b.current++}),t),()=>{p.current&&clearTimeout(p.current)}}d||(g("disconnected"),p.current&&clearTimeout(p.current))}),[d,u,e]),e?r.createElement(gt.o,{height:"100vh",bg:"gray.800",color:"white"},r.createElement(ue.T,{spacing:8},r.createElement(T.a,{textAlign:"center"},r.createElement(L.D,{as:"h1",size:"2xl",mb:4},"ScreamRouter Listener"),d?r.createElement(ue.T,null,r.createElement(I.E,{fontSize:"xl"},"connected"===m?"Listening to":"Attempting to listen to"),r.createElement(I.E,{fontSize:"3xl",fontWeight:"bold"},e),"disconnected"!==m&&r.createElement(me.y,{size:"xl",color:"green.300",mt:4})):r.createElement(ue.T,null,r.createElement(I.E,{fontSize:"xl"},"Not listening to"),r.createElement(I.E,{fontSize:"3xl",fontWeight:"bold"},e))),r.createElement(_.$,{colorScheme:u?"red":"green",onClick:()=>{u?(e&&c((t=>new Map(t).set(e,!1))),o.current?.pause(),e&&t(e),b.current=0,p.current&&clearTimeout(p.current)):(o.current?.play(),e&&c((t=>new Map(t).set(e,!0))),e&&t(e))},size:"lg",px:10,py:6},d?"Stop Listening":`Listen to ${e}`),r.createElement(I.E,null,"connecting"===m&&"Connecting...","connected"===m&&"Connected","reconnecting"===m&&"Reconnecting...","disconnected"===m&&!d&&"Ready to listen","disconnected"===m&&d&&"Disconnected"))):r.createElement(gt.o,{height:"100vh",bg:"gray.800",color:"white"},r.createElement(L.D,null,"No sink specified."))};var bt=n(5790);const ht=e=>{let{route:t,actions:n}=e;return r.createElement(ve.D,{onClick:()=>n.toggleEnabled("routes",t.name,!t.enabled)},r.createElement(Se.z,{spacing:2},r.createElement(ne.I,{boxSize:3,viewBox:"0 0 200 200",color:t.enabled?"green.500":"red.500"},r.createElement("path",{fill:"currentColor",d:t.enabled?"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0":"M 50,50 L 150,150 M 50,150 L 150,50"})),r.createElement(I.E,{bgColor:"transparent !important"},t.name)))},ft=e=>{let{sink:t,routes:n,isStarred:a,actions:o,isSelected:l=!1,isListening:i,visualizingSink:s}=e;const[c,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(t.ip)try{const e=await p.getSources(),n=Object.values(e.data).filter((e=>e.is_process&&e.tag&&e.tag.startsWith(t.ip)));u(n.length>0)}catch(e){console.error("Error checking for processes:",e)}})()}),[t.ip]);const{getLighterColor:d,getDarkerColor:m}=Ae(),g=d(1.25),b=n.filter((e=>e.enabled)).length,h=Boolean(t.port),f=n.slice(0,3),E=n.slice(3),k=E.length>0;return r.createElement(be.Tr,{bg:l?g:void 0,id:`sinks-${encodeURIComponent(t.name)}`,onContextMenu:e=>{e.preventDefault()},cursor:"context-menu",sx:{button:{textColor:"white",backgroundColor:m(1.15),":hover":{textColor:d(339),backgroundColor:m(.7)}},":hover":{textColor:d(339),backgroundColor:m(.7)},"p.chakra-menu__group__title, div p.chakra-text":{textColor:"white",backgroundColor:m(1.15)}}},r.createElement(ye.Td,null,r.createElement(xe.W,{placement:"auto",strategy:"fixed",boundary:"scrollParent",flip:!0,preventOverflow:!0},r.createElement(we.I,{as:I.E,fontWeight:"normal"},t.name),r.createElement(Ce.c,{maxH:"calc(100vh - 100px)",overflowY:"auto",overflowX:"hidden",pr:2.5,textColor:m(.01),backgroundColor:d(1.15)},r.createElement(T.a,{px:3,py:2},r.createElement(I.E,{fontSize:"sm"},b," active route",1!==b?"s":"",h&&" • Real Device",0!==t.timeshift&&` • Timeshift: ${t.timeshift}s`)),r.createElement(ze.N,null),r.createElement(ve.D,{onClick:()=>o.toggleStar("sinks",t.name),role:"menuitem","aria-label":a?"Remove from Favorites":"Add to Favorites"},a?"★ Remove from Favorites":"☆ Add to Favorites"),r.createElement(ve.D,{onClick:()=>{o.toggleEnabled("sinks",t.name,!t.enabled),Oe("sinks",t.name)}},t.enabled?"Disable":"Enable"),r.createElement(ve.D,{onClick:()=>Me("sinks",t)},"Edit Settings"),r.createElement(ve.D,{onClick:()=>o.showEqualizer(!0,"sinks",t)},"Equalize"),r.createElement(ve.D,{onClick:()=>o.showSpeakerLayoutPage("sinks",t)},"Speaker Layout"),r.createElement(ve.D,{onClick:()=>o.confirmDelete("sinks",t.name)},"Delete"),h&&r.createElement(r.Fragment,null,r.createElement(ze.N,null),r.createElement(ve.D,{onClick:()=>o.transcribeSink(t.ip)},"Transcribe"),r.createElement(ve.D,{onClick:()=>o.visualizeSink(s===t.name?null:t.name),_active:{bg:s===t.name?"blue.500":void 0}},"Visualize"),r.createElement(ve.D,{onClick:()=>window.open(`/site/listen/${t.name}`,"_blank"),_active:{bg:i?"blue.500":void 0}},i?"Stop Listening":"Listen"),c&&r.createElement(ve.D,{onClick:()=>{window.open(`/site/processes/${t.ip}`,"_blank")}},"View Processes")),r.createElement(ze.N,null),r.createElement(Te.r,{title:"Routes"},f.map((e=>r.createElement(ht,{key:e.name,route:e,actions:o}))),k&&r.createElement(xe.W,{placement:"right-start"},r.createElement(ve.D,{as:we.I},r.createElement(Se.z,{justify:"space-between",width:"100%"},r.createElement(I.E,null,"More Routes..."),r.createElement(ne.I,{viewBox:"0 0 24 24",boxSize:5},r.createElement("path",{fill:"currentColor",d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})))),r.createElement(Ce.c,null,E.map((e=>r.createElement(ht,{key:e.name,route:e,actions:o})))))),r.createElement(ze.N,null),r.createElement(T.a,{px:3,py:2},r.createElement(I.E,{mb:2,fontSize:"sm"},"Timeshift"),r.createElement(V.Ap,{min:-60,max:0,step:1,value:-t.timeshift||0,maxW:"95%",onChange:e=>o.updateTimeshift("sinks",t.name,-e)},r.createElement(V.hB,null,r.createElement(V.hJ,null)),r.createElement(V.OQ,null)))))),r.createElement(ye.Td,null,r.createElement(De,{icon:t.enabled?"volume":"x",isActive:t.enabled,onClick:()=>{o.toggleEnabled("sinks",t.name,!t.enabled),Oe("sinks",t.name)}})),r.createElement(ye.Td,null,r.createElement(T.a,{position:"relative",minW:"250px"},r.createElement(Le,{maxWidth:"250px",value:t.volume,onChange:e=>o.updateVolume("sinks",t.name,e),enabled:t.enabled}))))},Et=e=>{let{sinks:t,routes:n,starredSinks:a,listeningStatus:o,visualizingSink:l,actions:i,selectedItem:s}=e;const c="transparent",[u,d]=(0,r.useState)((()=>localStorage.getItem("sinkList_sortField")||null)),[m,g]=(0,r.useState)((()=>localStorage.getItem("sinkList_sortDirection")||"none")),p=e=>{let t="asc",n=e;u===e&&("asc"===m?t="desc":"desc"===m?(t="none",n=null):t="asc"),d(n),g(t),n?localStorage.setItem("sinkList_sortField",n):localStorage.removeItem("sinkList_sortField"),localStorage.setItem("sinkList_sortDirection",t)},b=[...t].sort(((e,t)=>{if(null===u||"none"===m)return 0;let n=0;if("name"===u)n=e.name.localeCompare(t.name);else if("status"===u){const r=e.enabled;n=r===t.enabled?0:r?-1:1}else"volume"===u&&(n=e.volume-t.volume);return"asc"===m?n:-n}));return r.createElement(T.a,{overflowX:"auto",width:"100%"},r.createElement(ge.X,{variant:"simple",size:"sm",width:"100%"},r.createElement(pe.d,{sx:{th:{borderBottom:"1px",borderColor:"rgba(0,0,0,.1)"}}},r.createElement(be.Tr,{sx:{th:{color:"#EEEEEE"}}},r.createElement(he.Th,{bg:c,cursor:"pointer",onClick:()=>p("name")},r.createElement(x.s,{align:"center"},"Name","name"===u&&"none"!==m&&r.createElement(ne.I,{as:"asc"===m?Ee.D:ke.k,ml:1,boxSize:3}))),r.createElement(he.Th,{bg:c,width:"40px",cursor:"pointer",onClick:()=>p("status")},r.createElement(x.s,{align:"center"},"Status","status"===u&&"none"!==m&&r.createElement(ne.I,{as:"asc"===m?Ee.D:ke.k,ml:1,boxSize:3}))),r.createElement(he.Th,{bg:c,width:"100px",cursor:"pointer",onClick:()=>p("volume")},r.createElement(x.s,{align:"center"},"Volume","volume"===u&&"none"!==m&&r.createElement(ne.I,{as:"asc"===m?Ee.D:ke.k,ml:1,boxSize:3}))))),r.createElement(fe.N,null,b.map((e=>{return r.createElement(ft,{key:e.name,sink:e,routes:(t=e.name,n.filter((e=>e.sink===t))),isStarred:a.includes(e.name),isListening:o.get(e.name)||!1,visualizingSink:l,actions:i,isSelected:s===e.name});var t})))))},kt=e=>{let{route:t,isStarred:n,actions:a,isSelected:o=!1}=e;const{getLighterColor:l,getDarkerColor:i}=Ae(),s=l(1.25);return r.createElement(be.Tr,{bg:o?s:void 0,id:`routes-${encodeURIComponent(t.name)}`,onContextMenu:e=>{e.preventDefault()},cursor:"context-menu",sx:{button:{textColor:"white",backgroundColor:i(1.15),":hover":{textColor:l(339),backgroundColor:i(.7)}},":hover":{textColor:l(339),backgroundColor:i(.7)},"p.chakra-menu__group__title, div p.chakra-text":{textColor:"white",backgroundColor:i(1.15)}}},r.createElement(ye.Td,null,r.createElement(xe.W,{placement:"auto",strategy:"fixed",boundary:"scrollParent",flip:!0,preventOverflow:!0},r.createElement(we.I,{as:I.E,fontWeight:"normal"},t.name),r.createElement(Ce.c,{maxH:"calc(100vh - 100px)",overflowY:"auto",overflowX:"hidden",pr:2.5,textColor:i(.01),backgroundColor:l(1.15)},r.createElement(T.a,{px:3,py:2},r.createElement(I.E,{fontSize:"sm"},t.source," → ",t.sink,0!==t.timeshift&&` • Timeshift: ${t.timeshift}s`)),r.createElement(ze.N,null),r.createElement(ve.D,{onClick:()=>a.toggleStar("routes",t.name),role:"menuitem","aria-label":n?"Remove from Favorites":"Add to Favorites"},n?"★ Remove from Favorites":"☆ Add to Favorites"),r.createElement(ve.D,{onClick:()=>{a.toggleEnabled("routes",t.name,!t.enabled),Oe("routes",t.name)}},t.enabled?"Disable":"Enable"),r.createElement(ve.D,{onClick:()=>Me("routes",t)},"Edit Settings"),r.createElement(ve.D,{onClick:()=>a.showEqualizer(!0,"routes",t)},"Equalize"),r.createElement(ve.D,{onClick:()=>a.showSpeakerLayoutPage("routes",t)},"Speaker Layout"),r.createElement(ve.D,{onClick:()=>a.confirmDelete("routes",t.name)},"Delete"),r.createElement(ze.N,null),r.createElement(Te.r,{title:"Source"},r.createElement(ve.D,{onClick:()=>a.toggleEnabled("sources",t.source,!t.enabled)},r.createElement(Se.z,{spacing:2},r.createElement(ne.I,{boxSize:3,viewBox:"0 0 200 200",color:t.enabled?"green.500":"red.500"},r.createElement("path",{fill:"currentColor",d:t.enabled?"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0":"M 50,50 L 150,150 M 50,150 L 150,50"})),r.createElement(I.E,{bgColor:"transparent !important"},t.source)))),r.createElement(Te.r,{title:"Sink"},r.createElement(ve.D,{onClick:()=>a.toggleEnabled("sinks",t.sink,!t.enabled)},r.createElement(Se.z,{spacing:2},r.createElement(ne.I,{boxSize:3,viewBox:"0 0 200 200",color:t.enabled?"green.500":"red.500"},r.createElement("path",{fill:"currentColor",d:t.enabled?"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0":"M 50,50 L 150,150 M 50,150 L 150,50"})),r.createElement(I.E,{bgColor:"transparent !important"},t.sink)))),r.createElement(ze.N,null),r.createElement(T.a,{px:3,py:2},r.createElement(I.E,{mb:2,fontSize:"sm"},"Timeshift"),r.createElement(V.Ap,{min:-60,max:0,step:1,value:-t.timeshift||0,maxW:"95%",onChange:e=>a.updateTimeshift("routes",t.name,-e)},r.createElement(V.hB,null,r.createElement(V.hJ,null)),r.createElement(V.OQ,null)))))),r.createElement(ye.Td,null,r.createElement(De,{icon:t.enabled?"volume":"x",isActive:t.enabled,onClick:()=>{a.toggleEnabled("routes",t.name,!t.enabled),Oe("routes",t.name)}})),r.createElement(ye.Td,null,r.createElement(T.a,{position:"relative",minW:"250px"},r.createElement(Le,{maxWidth:"250px",value:t.volume,onChange:e=>a.updateVolume("routes",t.name,e),enabled:t.enabled}))))},vt=e=>{let{routes:t,starredRoutes:n,actions:a,selectedItem:o}=e;const l="transparent",[i,s]=(0,r.useState)((()=>localStorage.getItem("routeList_sortField")||null)),[c,u]=(0,r.useState)((()=>localStorage.getItem("routeList_sortDirection")||"none")),d=e=>{let t="asc",n=e;i===e&&("asc"===c?t="desc":"desc"===c?(t="none",n=null):t="asc"),s(n),u(t),n?localStorage.setItem("routeList_sortField",n):localStorage.removeItem("routeList_sortField"),localStorage.setItem("routeList_sortDirection",t)},m=[...t].sort(((e,t)=>{if(null===i||"none"===c)return 0;let n=0;if("name"===i)n=e.name.localeCompare(t.name);else if("status"===i){const r=e.enabled;n=r===t.enabled?0:r?-1:1}else"volume"===i&&(n=e.volume-t.volume);return"asc"===c?n:-n}));return r.createElement(T.a,{overflowX:"auto",width:"100%"},r.createElement(ge.X,{variant:"simple",size:"sm",width:"100%"},r.createElement(pe.d,{sx:{th:{borderBottom:"1px",borderColor:"rgba(0,0,0,.1)"}}},r.createElement(be.Tr,{sx:{th:{color:"#EEEEEE"}}},r.createElement(he.Th,{bg:l,cursor:"pointer",onClick:()=>d("name")},r.createElement(x.s,{align:"center"},"Name","name"===i&&"none"!==c&&r.createElement(ne.I,{as:"asc"===c?Ee.D:ke.k,ml:1,boxSize:3}))),r.createElement(he.Th,{bg:l,width:"40px",cursor:"pointer",onClick:()=>d("status")},r.createElement(x.s,{align:"center"},"Status","status"===i&&"none"!==c&&r.createElement(ne.I,{as:"asc"===c?Ee.D:ke.k,ml:1,boxSize:3}))),r.createElement(he.Th,{bg:l,width:"100px",cursor:"pointer",onClick:()=>d("volume")},r.createElement(x.s,{align:"center"},"Volume","volume"===i&&"none"!==c&&r.createElement(ne.I,{as:"asc"===c?Ee.D:ke.k,ml:1,boxSize:3}))))),r.createElement(fe.N,null,m.map((e=>r.createElement(kt,{key:e.name,route:e,isStarred:n.includes(e.name),actions:a,isSelected:o===e.name}))))))};let St=function(e){return e[e.Main=0]="Main",e[e.Sources=1]="Sources",e[e.Sinks=2]="Sinks",e[e.Routes=3]="Routes",e[e.AllSources=4]="AllSources",e[e.AllSinks=5]="AllSinks",e[e.AllRoutes=6]="AllRoutes",e[e.NowListening=7]="NowListening",e[e.RecentlyUsed=8]="RecentlyUsed",e}({});const yt=()=>{const{sources:e,sinks:t,routes:n,activeSource:a,listeningStatus:o,visualizingSink:l,onTranscribeSink:i,onListenToSink:s,onVisualizeSink:c,onToggleActiveSource:u}=E(),[d,m]=(0,r.useState)((()=>{const e=localStorage.getItem("currentMenu");return e?parseInt(e,10):St.Main})),[g,b]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[k,v]=(0,r.useState)([]),[S,y]=(0,r.useState)(null),[z,$]=(0,r.useState)(null),[R,I]=(0,r.useState)(!1),[A,N]=(0,r.useState)(null),[M,U]=(0,r.useState)(null),P=r.useRef(null),[W,D]=(0,r.useState)(0);(0,r.useEffect)((()=>_e.subscribe((()=>{D((e=>e+1))}))),[]);const O=_e.getDarkerColor(.9,.9),V=_e.getDarkerColor(.88,.9),q=_e.getDarkerColor(.7),F=_e.getDarkerColor(.5),B="#EEEEEE",j="#EEE";(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("starredSources")||"[]"),t=JSON.parse(localStorage.getItem("starredSinks")||"[]"),n=JSON.parse(localStorage.getItem("starredRoutes")||"[]");b(e),f(t),v(n)}),[a]),(0,r.useEffect)((()=>{const e=e=>{if("starredSources"===e.key||"starredSinks"===e.key||"starredRoutes"===e.key){const t=e.key,n=JSON.parse(e.newValue||"[]");"starredSources"===t?b(n):"starredSinks"===t?f(n):"starredRoutes"===t&&v(n)}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[]),(0,r.useEffect)((()=>{localStorage.setItem("currentMenu",d.toString())}),[d]),(0,r.useEffect)((()=>{if(S&&P.current){const e=document.getElementById(`${St[d].toLowerCase()}-${S}`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}),[S,d]);const J=(e,t)=>{let n;switch(e){case"sources":n=St.AllSources;break;case"sinks":n=St.AllSinks;break;case"routes":n=St.AllRoutes;break;default:n=St.Main}m(n),y(t)},H=(e,t)=>{"sources"===e?b(t):"sinks"===e?f(t):"routes"===e&&v(t)},G=(0,r.useMemo)((()=>Qe(H,$,u,(e=>i(e)),(e=>{e&&s(e)}),(e=>c(e&&t.find((t=>t.name===e))||null)),J)),[u,i,s,c,t,J]);G.showSpeakerLayoutPage=(e,t)=>{try{const n=`/site/speaker-layout-standalone?type=${e}&name=${encodeURIComponent(t.name)}`,r="width=650,height=750,menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=yes,status=no",a=window.open(n,"_blank",r);a?a.focus():$("Failed to open new window. Please check your browser pop-up blocker settings.")}catch(e){console.error("Error opening speaker layout window:",e),$("Could not open speaker layout page. See console for details.")}};const Y=()=>{const e=E(),t=Ve("routes");return(e.routes||[]).filter((e=>t.includes(e.name)))},K=()=>{const e=E(),t=Ve("sinks");return(e.sinks||[]).filter((e=>t.includes(e.name)))},Q=()=>{const e=E(),t=Ve("sources");return(e.sources||[]).filter((e=>t.includes(e.name)))};return G.confirmDelete=(e,t)=>{N(e),U(t),I(!0)},r.createElement(x.s,{direction:"column",height:"950px",maxHeight:"950px",justifyContent:"flex-end",alignContent:"flex-end"},r.createElement(Ke,{isOpen:R,onClose:()=>I(!1),onConfirm:async()=>{if(A&&M)try{"sources"===A?await p.deleteSource(M):"sinks"===A?await p.deleteSink(M):"routes"===A&&await p.deleteRoute(M),"sources"===A&&g.includes(M)?H("sources",(e=>e.filter((e=>e!==M)))):"sinks"===A&&h.includes(M)?H("sinks",(e=>e.filter((e=>e!==M)))):"routes"===A&&k.includes(M)&&H("routes",(e=>e.filter((e=>e!==M))))}catch(e){console.error(`Error deleting ${A}:`,e),$(`Error deleting ${A}`)}finally{I(!1),N(null),U(null)}},title:"Delete Item",message:`Are you sure you want to delete ${M}? This action cannot be undone.`}),r.createElement(T.a,{onClick:e=>{if(R){const t=document.querySelector('[role="alertdialog"]');t&&!t.contains(e.target)&&(I(!1),e.stopPropagation())}},style:{backgroundColor:"rgba(0,0,0,0);",borderWidth:"0px",borderColor:V,borderStyle:"solid",borderRadius:"4px",color:"#EEEEEE",fontWeight:"lighter",fontFamily:"Segoe UI"},pb:3,pr:3,marginLeft:"30%",width:"70%",maxW:"70%",maxH:"950px",display:"flex",flexDirection:"column",className:"desktop-menu",justifySelf:"flex-end"},z&&r.createElement(w.F,{status:"error",mb:2,borderRadius:"md",size:"sm"},r.createElement(C._,null),z),r.createElement(T.a,{flex:"1",overflow:"auto",ref:P,style:{borderWidth:"1px",borderStyle:"solid",borderColor:"rgba(128, 128, 128, .5)",borderTopWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"0px",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",padding:"4px"},sx:{td:{"padding-bottom":"0","padding-top":"0",border:"0"}},backgroundColor:O},(()=>{const i=e.find((e=>e.name===a));switch(d){case St.Sources:return r.createElement(Be,{sources:e.filter((e=>g.includes(e.name))),routes:n,starredSources:g,activeSource:a,actions:G,selectedItem:S});case St.Sinks:return r.createElement(Et,{sinks:t.filter((e=>h.includes(e.name))),routes:n,starredSinks:h,listeningStatus:o,visualizingSink:l?.name||null,actions:G,selectedItem:S});case St.Routes:return r.createElement(vt,{routes:n.filter((e=>k.includes(e.name))),starredRoutes:k,actions:G,selectedItem:S});case St.AllSources:return r.createElement(Be,{sources:e,routes:n,starredSources:g,activeSource:a,actions:G,selectedItem:S});case St.AllSinks:return r.createElement(Et,{sinks:t,routes:n,starredSinks:h,listeningStatus:o,visualizingSink:l?.name||null,actions:G,selectedItem:S});case St.AllRoutes:return r.createElement(vt,{routes:n,starredRoutes:k,actions:G,selectedItem:S});case St.NowListening:return r.createElement(Et,{sinks:t.filter((e=>o.get(e.name))),routes:n,starredSinks:h,listeningStatus:o,visualizingSink:l?.name||null,actions:G,selectedItem:S});case St.RecentlyUsed:return r.createElement(T.a,{pl:2,pt:2},r.createElement(L.D,{size:"md",mb:3},"Recently Used"),r.createElement(L.D,{size:"x-sm",mb:3},"Sources"),r.createElement(Be,{sources:Q(),routes:n,starredSources:g,activeSource:a,actions:G,selectedItem:S}),r.createElement(L.D,{size:"x-sm",mt:5,mb:3},"Sinks"),r.createElement(Et,{routes:n,sinks:K(),listeningStatus:o,visualizingSink:l?.name||null,starredSinks:h,actions:G,selectedItem:S}),r.createElement(L.D,{size:"x-sm",mt:5,mb:3},"Routes"),r.createElement(vt,{routes:Y(),starredRoutes:k,actions:G,selectedItem:S}));default:return r.createElement(Be,{sources:i?[i]:[],routes:n,starredSources:g,activeSource:a,actions:G,selectedItem:S})}})()),r.createElement(x.s,{as:"nav",p:1,style:{backgroundColor:V,border:"solid",borderColor:"rgba(128, 128, 128, .5)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px",borderTopWidth:"0px",borderLeftWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px",padding:"4px"},wrap:"wrap",gap:1,width:"100%"},r.createElement(Se.z,{width:"100%",justify:"space-evenly"},r.createElement(bt.e,{variant:"outline",isAttached:!0,spacing:0,size:"sm"},r.createElement(_.$,{style:{backgroundColor:d===St.Main?q:F,color:d===St.Main?B:j},onClick:()=>m(St.Main),_hover:{opacity:.8},size:"xs"},"Primary"),r.createElement(_.$,{style:{backgroundColor:d===St.Sources?q:F,color:d===St.Sources?B:j},onClick:()=>m(St.Sources),_hover:{opacity:.8},size:"xs"},"★ Sources"),r.createElement(_.$,{style:{backgroundColor:d===St.Sinks?q:F,color:d===St.Sinks?B:j},onClick:()=>m(St.Sinks),_hover:{opacity:.8},size:"xs"},"★ Sinks"),r.createElement(_.$,{style:{backgroundColor:d===St.Routes?q:F,color:d===St.Routes?B:j},onClick:()=>m(St.Routes),_hover:{opacity:.8},size:"xs"},"★ Routes"),r.createElement(_.$,{style:{backgroundColor:d===St.AllSources?q:F,color:d===St.AllSources?B:j},onClick:()=>m(St.AllSources),_hover:{opacity:.8},size:"xs"},"All Sources"),r.createElement(_.$,{style:{backgroundColor:d===St.AllSinks?q:F,color:d===St.AllSinks?B:j},onClick:()=>m(St.AllSinks),_hover:{opacity:.8},size:"xs"},"All Sinks"),r.createElement(_.$,{style:{backgroundColor:d===St.AllRoutes?q:F,color:d===St.AllRoutes?B:j},onClick:()=>m(St.AllRoutes),_hover:{opacity:.8},size:"xs"},"All Routes"),r.createElement(_.$,{style:{backgroundColor:F,color:j},onClick:()=>{window.open("/site/","FullView")},_hover:{opacity:.8},size:"xs"},"Full View"),r.createElement(_.$,{style:{backgroundColor:d===St.RecentlyUsed?q:F,color:d===St.RecentlyUsed?B:j},onClick:()=>m(St.RecentlyUsed),_hover:{opacity:.8},size:"xs"},"Recently Used"))))))},xt=(e,t,n,r,a,o,l,i,s,c,u,d)=>({toggleEnabled:async(n,r)=>{try{const t="sources"===n?await p.getSources():"sinks"===n?await p.getSinks():await p.getRoutes(),a=Object.values(t.data).find((e=>e.name===r));if(!a)throw new Error(`${n} not found`);const o="sources"===n?p.updateSource:"sinks"===n?p.updateSink:p.updateRoute;await o(r,{enabled:!a.enabled}),e()}catch(e){console.error(`Error toggling ${n} status:`,e),t(`Failed to update ${n} status. Please try again.`)}},deleteItem:async(n,r)=>{try{const t="sources"===n?p.deleteSource:"sinks"===n?p.deleteSink:p.deleteRoute;await t(r),e()}catch(e){console.error(`Error deleting ${n}:`,e),t(`Failed to delete ${n}. Please try again.`)}},updateVolume:async(n,r,a)=>{try{const t="sources"===n?p.updateSourceVolume:"sinks"===n?p.updateSinkVolume:p.updateRouteVolume;await t(r,a),e()}catch(e){console.error(`Error updating ${n} volume:`,e),t(`Failed to update ${n} volume. Please try again.`)}},updateTimeshift:async(n,r,a)=>{try{const t="sources"===n?p.updateSourceTimeshift:"sinks"===n?p.updateSinkTimeshift:p.updateRouteTimeshift;await t(r,a),e()}catch(e){console.error(`Error updating ${n} timeshift:`,e),t(`Failed to update ${n} timeshift. Please try again.`)}},toggleStar:(e,t)=>{n(e,(n=>{const r=n.includes(t)?n.filter((e=>e!==t)):[...n,t];return localStorage.setItem(`starred${e.charAt(0).toUpperCase()+e.slice(1)}`,JSON.stringify(r)),r}))},editItem:(e,t)=>{Me(e,t)},showEqualizer:(e,t,n)=>{a(n),o(t),r(e,t,n)},showVNC:(e,t)=>{a(t),l(e,t)},controlSource:async(n,r)=>{try{await p.controlSource(n,r),e()}catch(e){console.error("Error controlling source:",e),t("Failed to control source. Please try again.")}},toggleActiveSource:e=>{i((t=>t===e?null:e))},listenToSink:s,visualizeSink:c,navigateToItem:d});var wt=n(6419),Ct=n(4459),zt=n(7593),Tt=n(8772),$t=n(7701),Rt=n(332),_t=n(9296),It=n(457),At=n(536),Nt=n(8129),Mt=n(4983),Ut=n(879),Pt=n(9378),Wt=n(954),Dt=n(6466);const Lt=e=>{let{sources:t,sinks:n,routes:a,navigate:o}=e;const[l,i]=(0,r.useState)(""),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)([]),m=(0,r.useRef)(null),g=(0,r.useRef)(null),p=(0,y.dU)("white","gray.800"),b=(0,y.dU)("gray.100","gray.700"),h=(0,y.dU)("gray.800","gray.200"),f=(0,y.dU)("gray.600","gray.400"),E=(0,y.dU)("gray.200","gray.400");return(0,Rt.j)({ref:g,handler:()=>c(!1)}),r.createElement(T.a,{width:"100%",maxW:"400px",position:"relative",ref:g},r.createElement(_t.A,{isOpen:s&&u.length>0,autoFocus:!1,placement:"bottom-start",closeOnBlur:!1,isLazy:!0},r.createElement(It.W,null,r.createElement(At.M,null,r.createElement(Nt.W,{pointerEvents:"none"},r.createElement(Dt.W,{color:E})),r.createElement(j.p,{ref:m,placeholder:"Search sources, sinks, routes...",value:l,onChange:e=>{const r=e.target.value;i(r),(e=>{if(!e.trim())return void d([]);const r=e.toLowerCase(),o=[],l=new Set;t.forEach((e=>{const t=e.name.toLowerCase().includes(r),n=e.ip?.toLowerCase().includes(r);if((t||n)&&(o.push({id:`source-${e.name}`,name:e.name,type:e.is_group?"group-source":"sources",enabled:e.enabled,volume:e.volume,ip:e.ip,isGroup:e.is_group}),l.add(`source-${e.name}`)),e.is_group&&e.group_members&&!l.has(`source-${e.name}`)){const t=e.group_members.find((e=>e.toLowerCase().includes(r)));t&&(o.push({id:`source-group-${e.name}`,name:e.name,type:"group-source",enabled:e.enabled,volume:e.volume,ip:e.ip,isGroup:!0,matchedMember:t}),l.add(`source-${e.name}`))}})),n.forEach((e=>{const t=e.name.toLowerCase().includes(r),n=e.ip?.toLowerCase().includes(r);if((t||n)&&(o.push({id:`sink-${e.name}`,name:e.name,type:e.is_group?"group-sink":"sinks",enabled:e.enabled,volume:e.volume,ip:e.ip,isGroup:e.is_group}),l.add(`sink-${e.name}`)),e.is_group&&e.group_members&&!l.has(`sink-${e.name}`)){const t=e.group_members.find((e=>e.toLowerCase().includes(r)));t&&(o.push({id:`sink-group-${e.name}`,name:e.name,type:"group-sink",enabled:e.enabled,volume:e.volume,ip:e.ip,isGroup:!0,matchedMember:t}),l.add(`sink-${e.name}`))}})),a.forEach((e=>{const t=e.name.toLowerCase().includes(r),n=e.source.toLowerCase().includes(r),a=e.sink.toLowerCase().includes(r);(t||n||a)&&o.push({id:`route-${e.name}`,name:e.name,type:"routes",enabled:e.enabled,volume:e.volume})})),d(o)})(r),c(!0)},onFocus:()=>{l&&u.length>0&&c(!0)},borderRadius:"md",_placeholder:{color:"gray.300"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px var(--chakra-colors-blue-400)"}}))),r.createElement(q.Z,null,r.createElement(Mt.h,{width:"400px",maxH:"400px",overflowY:"auto",bg:p,borderColor:"gray.200",boxShadow:"lg",_dark:{borderColor:"gray.600"}},r.createElement(Ut.e,{p:0},r.createElement(ue.T,{spacing:0,align:"stretch",divider:r.createElement(Pt.c,null)},u.map((e=>{return r.createElement(T.a,{key:e.id,p:3,cursor:"pointer",_hover:{bg:b},onClick:()=>(e=>{o(e.type,e.name),c(!1),i(""),d([]),m.current&&m.current.blur()})(e)},r.createElement(x.s,{justifyContent:"space-between",alignItems:"center",mb:1},r.createElement(Se.z,null,r.createElement(Wt.E,{colorScheme:(n=e.type,"sources"===n?"green":"sinks"===n?"blue":"routes"===n?"red":"group-source"===n||"group-sink"===n?"purple":"gray")},(e=>"sources"===e?"Source":"sinks"===e?"Sink":"routes"===e?"Route":"group-source"===e?"Source Group":"group-sink"===e?"Sink Group":e)(e.type)),r.createElement(Wt.E,{colorScheme:e.enabled?"green":"red"},e.enabled?"Enabled":"Disabled")),void 0!==e.volume&&r.createElement(I.E,{fontSize:"sm",color:f},"Vol: ",void 0===(t=e.volume)?"100%":`${Math.round(t)}%`)),r.createElement(I.E,{fontWeight:"bold",color:h},e.name),e.ip&&r.createElement(I.E,{fontSize:"sm",color:f},"IP: ",e.ip),e.matchedMember&&r.createElement(x.s,{alignItems:"center",mt:1},r.createElement(Wt.E,{colorScheme:"orange",size:"sm",mr:1},"Member match"),r.createElement(I.E,{fontSize:"sm",color:f},"Contains: ",r.createElement(I.E,{as:"span",fontWeight:"bold"},e.matchedMember))));var t,n}))))))))},Ot=e=>{let{value:t,onChange:n,showLabel:a=!0}=e;const[o,l]=(0,r.useState)(!1),i=(0,y.dU)("gray.100","gray.700"),s=(0,y.dU)("green.500","green.300"),c=(0,y.dU)("white","gray.200"),u=(0,y.dU)("gray.700","gray.200");return r.createElement(T.a,{width:"100%",maxWidth:"300px"},r.createElement(x.s,{direction:"column",width:"100%"},r.createElement(V.Ap,{id:"volume-slider","aria-label":"Volume slider",min:0,max:1,step:.01,value:t,onChange:n,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),mr:3,flex:"1"},r.createElement(V.hB,{bg:i},r.createElement(V.hJ,{bg:s})),r.createElement(te.m,{hasArrow:!0,bg:"green.500",color:"white",placement:"top",isOpen:o,label:`${Math.round(100*t)}%`},r.createElement(V.OQ,{boxSize:6,bg:c},r.createElement(ne.I,{as:re.M,color:"green.500"})))),a&&r.createElement(I.E,{fontSize:"sm",width:"40px",textAlign:"right",color:u},Math.round(100*t),"%")))},Vt=e=>{let{isDarkMode:t,sources:n,sinks:a,routes:o,navigate:l,toggleSidebar:i,activeSource:s,controlSource:c,updateVolume:u}=e;const{toggleColorMode:d}=(0,y.G6)(),m=(0,y.dU)("blue.500","blue.700"),g=(0,y.dU)("white","white"),p=(0,y.dU)("blue.600","blue.800"),b=s?n.find((e=>e.name===s)):null;return r.createElement(x.s,{as:"header",align:"center",justify:"space-between",py:3,px:5,bg:m,color:g,boxShadow:"md"},r.createElement(x.s,{align:"center"},r.createElement(R.K,{"aria-label":"Open menu",icon:r.createElement(wt.R,null),variant:"ghost",color:"white",_hover:{bg:p},display:{base:"flex",md:"none"},mr:2,onClick:i}),r.createElement(T.a,{mr:2,fontSize:"xl"},r.createElement("i",{className:"fas fa-broadcast-tower"})),r.createElement(I.E,{fontSize:"xl",fontWeight:"bold"},"ScreamRouter")),r.createElement(T.a,{flex:"1",mx:6,display:"flex",alignItems:"center"},r.createElement(Lt,{sources:n,sinks:a,routes:o,navigate:l}),s&&r.createElement(r.Fragment,null,c&&r.createElement(Se.z,{spacing:1,mr:4},r.createElement(te.m,{label:"Previous Track"},r.createElement(R.K,{"aria-label":"Previous Track",icon:r.createElement(W.ttb,null),size:"sm",colorScheme:"purple",variant:"ghost",color:"white",_hover:{bg:p},onClick:()=>c(s,"prevtrack"),isDisabled:!s})),r.createElement(te.m,{label:"Play/Pause"},r.createElement(R.K,{"aria-label":"Play/Pause",icon:r.createElement(W.gSK,null),size:"sm",colorScheme:"purple",variant:"ghost",color:"white",_hover:{bg:p},onClick:()=>c(s,"play"),isDisabled:!s})),r.createElement(te.m,{label:"Next Track"},r.createElement(R.K,{"aria-label":"Next Track",icon:r.createElement(W.FH8,null),size:"sm",colorScheme:"purple",variant:"ghost",color:"white",_hover:{bg:p},onClick:()=>c(s,"nexttrack"),isDisabled:!s}))),u&&b&&r.createElement(T.a,{mr:4,width:"150px"},r.createElement(Ot,{showLabel:!1,value:b.volume||0,onChange:e=>{u&&u("sources",s,e)}})))),r.createElement(Se.z,{spacing:2},r.createElement(R.K,{"aria-label":"Refresh",icon:r.createElement(Ct.H,null),variant:"ghost",color:"white",_hover:{bg:p}}),r.createElement(R.K,{"aria-label":"Settings",icon:r.createElement(zt.Z,null),variant:"ghost",color:"white",_hover:{bg:p}}),r.createElement(R.K,{"aria-label":"Toggle color mode",icon:t?r.createElement(Tt.g,null):r.createElement($t.r,null),variant:"ghost",color:"white",_hover:{bg:p},onClick:d})))};var qt=n(5486);const Ft=e=>{let{icon:t,label:n,isActive:a=!1,badge:o,onClick:l}=e;const i=(0,y.dU)("blue.100","blue.700"),s=(0,y.dU)("gray.100","gray.700"),c=(0,y.dU)("blue.700","white"),u=(0,y.dU)("gray.700","gray.200"),d=(0,y.dU)("blue.500","blue.300"),m=(0,y.dU)("white","gray.800");return r.createElement(_.$,{variant:"ghost",justifyContent:"flex-start",alignItems:"center",width:"100%",py:3,px:4,borderRadius:"md",fontWeight:"normal",bg:a?i:"transparent",color:a?c:u,_hover:{bg:a?i:s},onClick:l,"aria-current":a?"page":void 0,leftIcon:r.createElement("i",{className:`fas fa-${t}`,"aria-hidden":"true"})},r.createElement(x.s,{width:"100%",justify:"space-between",align:"center"},r.createElement(I.E,null,n),void 0!==o&&r.createElement(Wt.E,{ml:2,borderRadius:"full",px:2,bg:d,color:m},o)))},Bt=e=>{let{currentCategory:t,setCurrentCategory:n,sources:a,sinks:o,routes:l,starredSources:i,starredSinks:s,starredRoutes:c,sidebarOpen:u,toggleSidebar:d}=e;const m=(0,y.dU)("white","gray.800"),g=(0,y.dU)("gray.200","gray.700"),p=(0,y.dU)("gray.700","gray.100"),b=(0,y.dU)("gray.500","gray.400");return r.createElement(r.Fragment,null,r.createElement(T.a,{as:"aside",position:{base:"fixed",md:"relative"},left:{base:0,md:"auto"},top:{base:0,md:"auto"},bottom:{base:0,md:"auto"},w:["100%","100%","250px"],bg:m,borderRightWidth:"1px",borderColor:g,transform:{base:u?"translateX(0)":"translateX(-100%)",md:"translateX(0)"},transition:"transform 0.3s ease",zIndex:20,display:"flex",flexDirection:"column",overflowY:"auto",height:{md:"100%"}},r.createElement(x.s,{p:4,justify:"space-between",align:"center",borderBottomWidth:"1px",borderColor:g},r.createElement(L.D,{as:"h2",size:"md",color:p},"Navigation"),r.createElement(qt.J,{display:{base:"block",md:"none"},onClick:d})),r.createElement(ue.T,{as:"nav",spacing:6,align:"stretch",flex:"1",p:4,overflowY:"auto"},r.createElement(T.a,null,r.createElement(L.D,{as:"h3",size:"sm",mb:2,color:b,fontWeight:"medium"},"Overview"),r.createElement(ue.T,{spacing:1,align:"stretch"},r.createElement(Ft,{icon:"dashboard",label:"Dashboard",isActive:"dashboard"===t,onClick:()=>{n("dashboard"),window.innerWidth<768&&d()}}),r.createElement(Ft,{icon:"broadcast-tower",label:"Primary Source",isActive:"active-source"===t,onClick:()=>{n("active-source"),window.innerWidth<768&&d()}}),r.createElement(Ft,{icon:"headphones",label:"Now Listening",isActive:"now-listening"===t,onClick:()=>{n("now-listening"),window.innerWidth<768&&d()}}),r.createElement(Ft,{icon:"chart-bar",label:"Stats",isActive:"stats"===t,onClick:()=>{n("stats"),window.innerWidth<768&&d()}}))),r.createElement(Pt.c,null),r.createElement(T.a,null,r.createElement(L.D,{as:"h3",size:"sm",mb:2,color:b,fontWeight:"medium"},"Resources"),r.createElement(ue.T,{spacing:1,align:"stretch"},r.createElement(Ft,{icon:"microphone",label:"Sources",isActive:"sources"===t,badge:a.length,onClick:()=>{n("sources"),window.innerWidth<768&&d()}}),r.createElement(Ft,{icon:"volume-up",label:"Sinks",isActive:"sinks"===t,badge:o.length,onClick:()=>{n("sinks"),window.innerWidth<768&&d()}}),r.createElement(Ft,{icon:"route",label:"Routes",isActive:"routes"===t,badge:l.length,onClick:()=>{n("routes"),window.innerWidth<768&&d()}}))),r.createElement(Pt.c,null),r.createElement(T.a,null,r.createElement(L.D,{as:"h3",size:"sm",mb:2,color:b,fontWeight:"medium"},"Favorites"),r.createElement(ue.T,{spacing:1,align:"stretch"},r.createElement(Ft,{icon:"star",label:"Starred Items",isActive:"favorites"===t,badge:i.length+s.length+c.length,onClick:()=>{n("favorites"),window.innerWidth<768&&d()}}))))),u&&r.createElement(T.a,{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.600",zIndex:10,display:{base:"block",md:"none"},onClick:d}))};var jt=n(3842),Jt=n(8151),Ht=n(931),Gt=n(1835),Yt=n(6226),Kt=n(9821);const Qt=e=>{let{sortConfig:t,onSort:n,options:a,label:o="Sort by"}=e;const l=(0,y.dU)("white","gray.800"),i=(0,y.dU)("gray.200","gray.600"),s=(0,y.dU)("white","gray.800"),c=(0,y.dU)("gray.200","gray.600"),u=(0,y.dU)("gray.100","gray.700"),d=(0,y.dU)("blue.50","blue.900"),m=(0,y.dU)("blue.600","blue.200"),g=(0,y.dU)("gray.600","gray.300"),p=(0,y.dU)("gray.800","gray.100"),b=a.find((e=>e.key===t.key));return r.createElement(xe.W,{closeOnSelect:!0},r.createElement(we.I,{as:_.$,rightIcon:r.createElement(ne.I,{as:Gt.D,color:p}),bg:l,borderColor:i,borderWidth:"1px",_hover:{bg:u},_active:{bg:u},size:"md",width:"100%"},r.createElement(x.s,{alignItems:"center",justifyContent:"space-between"},r.createElement(I.E,{fontSize:"sm",color:g,mr:2},o,":"),r.createElement(x.s,{alignItems:"center"},r.createElement(I.E,{fontWeight:"medium",mr:1,color:p},b?b.label:"Name"),"asc"===t.direction?r.createElement(ne.I,{as:Yt.K,boxSize:3,color:p}):r.createElement(ne.I,{as:Kt.Z,boxSize:3,color:p})))),r.createElement(Ce.c,{bg:s,borderColor:c,minWidth:"200px"},a.map((e=>r.createElement(ve.D,{key:e.key,onClick:()=>n(e.key),bg:e.key===t.key?d:"transparent",color:e.key===t.key?m:p,_hover:{bg:u}},r.createElement(x.s,{alignItems:"center",width:"100%"},r.createElement(I.E,{flex:"1",color:e.key===t.key?m:p},e.label),e.key===t.key&&r.createElement(ne.I,{as:"asc"===t.direction?Yt.K:Kt.Z,color:m,ml:2,boxSize:3})))))))},Xt=e=>{let{value:t,onChange:n}=e;const[a,o]=(0,r.useState)(t),[l,i]=(0,r.useState)(!1),s=(0,r.useRef)(null),c=(0,y.dU)("gray.100","gray.700"),u=(0,y.dU)("blue.500","blue.300"),d=(0,y.dU)("white","gray.200"),m=(0,y.dU)("gray.700","gray.200");(0,r.useEffect)((()=>{o(t)}),[t]);const g=(0,r.useCallback)((e=>{s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{n(e)}),300)}),[n]),p=e=>{const t=Math.abs(e);return`${Math.floor(t/60)}:${Math.round(t%60).toString().padStart(2,"0")}`};return r.createElement(T.a,{width:"100%",maxWidth:"300px"},r.createElement(x.s,{direction:"column",width:"100%"},r.createElement(V.Ap,{id:"timeshift-slider","aria-label":"Timeshift slider",min:-300,max:0,step:.1,value:-a,onChange:e=>{const t=-e;o(t),g(t)},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},r.createElement(V.hB,{bg:c},r.createElement(V.hJ,{bg:u})),r.createElement(te.m,{hasArrow:!0,bg:"blue.500",color:"white",placement:"top",isOpen:l,label:`-${p(a)}`},r.createElement(V.OQ,{bg:d}))),r.createElement(I.E,{mt:2,fontSize:"sm",color:m,alignSelf:"flex-end"},"-",p(a))))},Zt=e=>{let{viewMode:t,onChange:n}=e;const a=(0,y.dU)("white","gray.800"),o=(0,y.dU)("gray.200","gray.600"),l=(0,y.dU)("blue.500","blue.400"),i="white",s=(0,y.dU)("gray.600","gray.400");return r.createElement(bt.e,{size:"sm",isAttached:!0,variant:"outline"},r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.x7F}),onClick:()=>n("grid"),bg:"grid"===t?l:a,color:"grid"===t?i:s,borderColor:o,_hover:{bg:"grid"===t?l:(0,y.dU)("gray.100","gray.700")},"aria-label":"Grid view",title:"Grid view"},"Grid"),r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.svy}),onClick:()=>n("list"),bg:"list"===t?l:a,color:"list"===t?i:s,borderColor:o,_hover:{bg:"list"===t?l:(0,y.dU)("gray.100","gray.700")},"aria-label":"List view",title:"List view"},"List"))},en=e=>{let{currentCategory:t,viewMode:n,setViewMode:a,sortConfig:o,onSort:l}=e;const i=(0,y.dU)("white","gray.800"),s=(0,y.dU)("gray.200","gray.700"),c=["sources","sinks","routes"].includes(t),u=["sources","sinks","routes"].includes(t),d=[{key:"name",label:"Name"},{key:"enabled",label:"Status"},..."routes"!==t?[{key:"active",label:"Active"}]:[],{key:"favorite",label:"Favorite"}];return r.createElement(x.s,{p:4,bg:i,borderBottomWidth:"1px",borderColor:s,justify:"space-between",align:"center",flexWrap:["wrap","nowrap"]},r.createElement(x.s,{align:"center"},r.createElement(jt.Q,{separator:"/",mb:[2,0]},r.createElement(Jt.J,null,r.createElement(Ht.w,null,"ScreamRouter")),r.createElement(Jt.J,{isCurrentPage:!0},r.createElement(Ht.w,{fontWeight:"semibold"},(e=>{switch(e){case"dashboard":return"Dashboard";case"active-source":return"Primary Source";case"now-listening":return"Now Listening";case"sources":return"Sources";case"sinks":return"Sinks";case"routes":return"Routes";case"favorites":return"Favorites";default:return"ScreamRouter"}})(t)))),u&&r.createElement(Se.z,{spacing:2,ml:4},r.createElement(_.$,{size:"sm",colorScheme:"blue",leftIcon:r.createElement("i",{className:"fas fa-plus"}),onClick:()=>{switch(t){case"sources":Ue("sources");break;case"sinks":Ue("sinks");break;case"routes":Ue("routes")}}},"Add ","sources"===t?"Source":"sinks"===t?"Sink":"Route"),("sources"===t||"sinks"===t)&&r.createElement(_.$,{size:"sm",colorScheme:"purple",leftIcon:r.createElement("i",{className:"fas fa-object-group"}),onClick:()=>{switch(t){case"sources":Ue("group-source");break;case"sinks":Ue("group-sink")}}},"Add ","sources"===t?"Source":"Sink"," Group"))),c&&r.createElement(Se.z,{spacing:4,width:["100%","auto"]},r.createElement(Zt,{viewMode:n,onChange:a}),r.createElement(Qt,{sortConfig:o,onSort:l,options:d,label:"Sort by"})))};var tn=n(2862),nn=n(946),rn=n(9370),an=n(3391),on=n(9824),ln=n(9151);const sn=e=>{let{item:t,type:n,isStarred:a,isActive:o,onStar:l,onActivate:i,onEdit:s,onEqualizer:c,onVnc:u,onListen:d,onVisualize:m,onUpdateVolume:g,onUpdateTimeshift:p,routes:b=[],allSources:h=[],allSinks:f=[],navigate:E,onToggleActiveSource:k,onControlSource:v,navigateToDetails:S}=e;const w=e=>"sources"===n,C=e=>"sinks"===n,z=e=>"routes"===n,$=w()?b.filter((e=>e.source===t.name&&e.enabled)).map((e=>e.name)):C()?b.filter((e=>e.sink===t.name&&e.enabled)).map((e=>e.name)):[],A=w()?b.filter((e=>e.source===t.name&&!e.enabled)).map((e=>e.name)):C()?b.filter((e=>e.sink===t.name&&!e.enabled)).map((e=>e.name)):[],N=(()=>{const e=[];return w()?h.forEach((n=>{n.is_group&&n.group_members&&n.group_members.includes(t.name)&&e.push({name:n.name,type:"sources"})})):C()&&f.forEach((n=>{n.is_group&&n.group_members&&n.group_members.includes(t.name)&&e.push({name:n.name,type:"sinks"})})),e})(),M=(0,y.dU)("white","gray.800"),U=(0,y.dU)("gray.800","white"),P=(0,y.dU)("gray.600","gray.300"),D=(0,y.dU)("yellow.400","yellow.500");return r.createElement(T.a,{id:`${n.slice(0,-1)}-${t.name}`,borderWidth:"1px",borderRadius:"lg",overflow:"hidden",bg:M,boxShadow:"md",transition:"all 0.2s",position:"relative",pr:2},r.createElement(x.s,{p:5,justify:"space-between",align:"center",borderColor:"transparent"},r.createElement(L.D,{as:"h3",size:"md",color:U,cursor:E?"pointer":"default",_hover:E?{color:(0,y.dU)("blue.600","blue.300")}:{},onClick:S||(()=>{E&&(w()?E("sources",t.name):C()?E("sinks",t.name):z()&&E("routes",t.name))})},t.name),r.createElement(Se.z,null,r.createElement(R.K,{"aria-label":a?"Remove from favorites":"Add to favorites",title:a?"Remove from favorites":"Add to favorites",icon:r.createElement(tn.G,{color:a?D:"gray.400"}),onClick:l,variant:"ghost",size:"sm"}),w()&&r.createElement(R.K,{"aria-label":o?"Unmark as Primary Source":"Mark as Primary Source",title:o?"Unmark as Primary Source":"Mark as Primary Source",icon:r.createElement(T.a,{as:W.Uhg,color:o?"cyan.500":"gray.400",transition:"all 0.2s"}),onClick:e=>{e.stopPropagation(),k&&k()},variant:"ghost",size:"sm"}),r.createElement(r.Fragment,null,c&&r.createElement(R.K,{"aria-label":"Equalizer",title:"Open Equalizer",icon:r.createElement(T.a,{as:W.QCN,transform:"rotate(90deg)"}),onClick:c,variant:"ghost",size:"sm"}),r.createElement(R.K,{"aria-label":"Edit",title:"Edit",icon:r.createElement(zt.Z,null),onClick:()=>{s?s():w()?Me("sources",t):C()?Me("sinks",t):z()&&Me("routes",t)},variant:"ghost",size:"sm"})))),r.createElement(T.a,{px:5,pt:2},r.createElement(x.s,{mb:2,justify:"flex-start",flexWrap:"wrap",gap:1},w()&&r.createElement(Wt.E,{colorScheme:"green",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none"},"Source"),C()&&r.createElement(Wt.E,{colorScheme:"blue",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none"},"Sink"),z()&&r.createElement(Wt.E,{colorScheme:"red",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none"},"Route"),r.createElement(Wt.E,{colorScheme:t.enabled?"green":"red",px:2,py:1,borderRadius:"full",cursor:"pointer",userSelect:"none",_hover:{opacity:.8},onClick:i,title:t.enabled?"Click to disable":"Click to enable"},t.enabled?"Enabled":"Disabled"),C()&&d&&r.createElement(Wt.E,{colorScheme:o?"purple":"gray",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none",cursor:"pointer",_hover:{opacity:.8},onClick:d,title:o?"Click to stop listening":"Click to listen"},o?"Listening":"Not Listening"),w()&&t.vnc_ip&&u&&r.createElement(Wt.E,{colorScheme:"purple",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none",cursor:"pointer",_hover:{opacity:.8},onClick:u,title:"Open VNC"},"VNC")),(w()||C()||z())&&r.createElement(T.a,{mt:3,mb:3},r.createElement(x.s,{mb:1,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-volume-up",mr:2}),r.createElement(I.E,{fontWeight:"medium"},"Volume:")),r.createElement(Ot,{value:z()?t.volume||100:t.volume,onChange:e=>g&&g(e)}))),r.createElement(x.s,{justify:"flex-start",wrap:"wrap",width:"100%",justifyContent:"center",gap:2,mb:3,minH:"45px"},w()&&t.vnc_ip&&r.createElement(r.Fragment,null,v&&r.createElement(Se.z,{spacing:1,ml:2},r.createElement(R.K,{"aria-label":"Previous Track",icon:r.createElement(W.ttb,null),size:"sm",colorScheme:"purple",variant:"outline",onClick:e=>{e.stopPropagation(),v("prevtrack")}}),r.createElement(R.K,{"aria-label":"Play/Pause",icon:r.createElement(W.gSK,null),size:"sm",colorScheme:"purple",variant:"outline",onClick:e=>{e.stopPropagation(),v("play")}}),r.createElement(R.K,{"aria-label":"Next Track",icon:r.createElement(W.FH8,null),size:"sm",colorScheme:"purple",variant:"outline",onClick:e=>{e.stopPropagation(),v("nexttrack")}}))),C()&&m&&r.createElement(_.$,{leftIcon:r.createElement(T.a,{as:"i",className:"fas fa-chart-bar"}),colorScheme:"cyan",variant:"outline",size:"sm",onClick:m,"aria-label":"Visualize",title:"Visualize"},"Visualize")),r.createElement(nn.n,{allowMultiple:!0,defaultIndex:[],mt:2},r.createElement(rn.A,{border:"none"},r.createElement("h2",null,r.createElement(an.J,{px:4,py:2,_hover:{bg:(0,y.dU)("blue.50","gray.700")},borderRadius:"md",color:(0,y.dU)("gray.700","gray.200")},r.createElement(T.a,{flex:"1",textAlign:"left",fontWeight:"medium"},"Timeshift"),r.createElement(on.Q,{color:(0,y.dU)("blue.500","blue.300")}))),r.createElement(ln.v,{pb:4,px:5,bg:(0,y.dU)("gray.50","gray.800")},(w()||C()||z())&&r.createElement(T.a,{mb:4},r.createElement(x.s,{mb:1,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-clock",mr:2}),r.createElement(I.E,{fontWeight:"medium"},"Timeshift:")),r.createElement(Xt,{value:(w()||C(),t.timeshift||0),onChange:e=>p&&p(e)})),C()&&m&&r.createElement(T.a,{mb:4},r.createElement(_.$,{leftIcon:r.createElement(T.a,{as:"i",className:"fas fa-chart-bar"}),colorScheme:"cyan",variant:"outline",size:"sm",onClick:m,"aria-label":"Visualize",title:"Visualize"},"Visualize")))),r.createElement(rn.A,{border:"none"},r.createElement("h2",null,r.createElement(an.J,{px:4,py:2,_hover:{bg:(0,y.dU)("blue.50","gray.700")},borderRadius:"md",color:(0,y.dU)("gray.700","gray.200")},r.createElement(T.a,{flex:"1",textAlign:"left",fontWeight:"medium"},z()?"Related Items":"Related Routes"),r.createElement(on.Q,{color:(0,y.dU)("blue.500","blue.300")}))),r.createElement(ln.v,{pb:4,px:5,bg:(0,y.dU)("gray.50","gray.800")},z()&&r.createElement(T.a,{fontSize:"sm"},r.createElement(x.s,{mb:2,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-microphone",mr:2}),r.createElement(I.E,{fontWeight:"medium",mr:1},"From:"),r.createElement(I.E,{color:P},t.source)),r.createElement(x.s,{mb:3,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-volume-up",mr:2}),r.createElement(I.E,{fontWeight:"medium",mr:1},"To:"),r.createElement(I.E,{color:P},t.sink)),r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Connection Links:"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1,mb:3},r.createElement(Wt.E,{colorScheme:"green",cursor:E?"pointer":"default",_hover:E?{bg:"green.500"}:{},onClick:e=>{e.stopPropagation(),E&&E("sources",t.source)},borderRadius:"full",px:2,py:1,userSelect:"none"},"Source: ",t.source,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))),r.createElement(Wt.E,{colorScheme:"blue",cursor:E?"pointer":"default",_hover:E?{bg:"blue.500"}:{},onClick:e=>{e.stopPropagation(),E&&E("sinks",t.sink)},borderRadius:"full",px:2,py:1,userSelect:"none"},"Sink: ",t.sink,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))),(w()||C())&&r.createElement(T.a,{fontSize:"sm"},(w()||C())&&t.is_group&&t.group_members&&t.group_members.length>0&&r.createElement(T.a,{mb:2},r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Group Members (",t.group_members.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},t.group_members.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"purple",cursor:E?"pointer":"default",_hover:E?{bg:"purple.500"}:{},onClick:t=>{t.stopPropagation(),E&&E(w()?"sources":"sinks",e)},borderRadius:"full",px:2,py:1,userSelect:"none"},e,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))),(w()||C())&&!t.is_group&&N.length>0&&r.createElement(T.a,{mb:2},r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Member of Groups (",N.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},N.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"sources"===e.type?"green":"blue",cursor:E?"pointer":"default",_hover:E?{bg:"sources"===e.type?"green.500":"blue.500"}:{},onClick:t=>{t.stopPropagation(),E&&E("sources"===e.type?"sources":"sinks",e.name)},borderRadius:"full",px:2,py:1,userSelect:"none"},e.name,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))),$.length>0&&r.createElement(T.a,{mb:2},r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Active Routes (",$.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},$.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"green",cursor:E?"pointer":"default",_hover:E?{bg:"green.500"}:{},onClick:t=>{t.stopPropagation(),E&&E("routes",e)},borderRadius:"full",px:2,py:1,userSelect:"none"},e,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))),A.length>0&&r.createElement(T.a,null,r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Disabled Routes (",A.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},A.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"red",variant:"outline",cursor:E?"pointer":"default",_hover:E?{bg:"red.100"}:{},onClick:t=>{t.stopPropagation(),E&&E("routes",e)},borderRadius:"full",px:2,py:1,userSelect:"none"},e,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))))))))},cn=e=>{let{title:t,icon:n,subtitle:a,status:o,isPositive:l=!0,children:i,onClick:s}=e;const c=(0,y.dU)("white","gray.800"),u=(0,y.dU)("gray.200","gray.700"),d=(0,y.dU)("gray.50","gray.700"),m=(0,y.dU)("gray.800","white"),g=(0,y.dU)("gray.600","gray.400");return r.createElement(T.a,{p:4,borderWidth:"1px",borderRadius:"lg",borderColor:u,bg:c,boxShadow:"sm",transition:"all 0.2s",_hover:s?{boxShadow:"md",bg:d}:{},onClick:s,role:s?"button":void 0,tabIndex:s?0:void 0,cursor:s?"pointer":"default"},r.createElement(x.s,{justify:"space-between",align:"center",mb:a?2:0},r.createElement(x.s,{align:"center"},r.createElement(T.a,{as:"i",className:`fas fa-${n}`,fontSize:"xl",color:m,mr:2,"aria-hidden":"true"}),r.createElement(L.D,{as:"h3",size:"md",color:m},t)),o&&r.createElement(Wt.E,{colorScheme:l?"green":"red",px:2,py:1,borderRadius:"full"},o)),a&&r.createElement(I.E,{color:g,fontSize:"sm",mb:i?4:0},a),i&&r.createElement(T.a,{mt:2},i))},un=e=>{let{sources:t,sinks:n,routes:a,starredSources:o,starredSinks:l,starredRoutes:i,contextActiveSource:s,listeningToSink:c,setCurrentCategory:u,handleStar:d,handleToggleSource:m,handleToggleSink:g,handleToggleRoute:p,handleOpenSourceEqualizer:b,handleOpenSinkEqualizer:h,handleOpenRouteEqualizer:f,handleOpenVnc:E,handleOpenVisualizer:k,handleUpdateSourceVolume:v,handleUpdateSinkVolume:S,handleUpdateSourceTimeshift:w,handleUpdateSinkTimeshift:C,handleUpdateRouteVolume:z,handleUpdateRouteTimeshift:$,handleControlSource:R,actions:A}=e;const N=t.find((e=>e.name===s)),M=(0,y.dU)("white","gray.800"),U=(0,y.dU)("gray.200","gray.700"),P=(0,y.dU)("gray.700","white"),W="blue";return r.createElement(T.a,null,r.createElement(ct.r,{columns:{base:1,md:3},spacing:4,mb:6},r.createElement(cn,{title:"Primary Source",icon:"broadcast-tower",status:N?"Active":"None",isPositive:!!N,onClick:()=>u("active-source")},N&&r.createElement(T.a,null,r.createElement(I.E,{fontWeight:"bold",mb:1},N.name),r.createElement(I.E,null,"Volume: ",N.volume,"%"),void 0!==N.timeshift&&r.createElement(I.E,null,"Timeshift: ",N.timeshift,"ms"))),r.createElement(cn,{title:"Now Listening",icon:"headphones",status:c?"Active":"None",isPositive:!!c,onClick:()=>u("now-listening")},c&&r.createElement(T.a,null,r.createElement(I.E,{fontWeight:"bold",mb:1},c.name),void 0!==c.volume&&r.createElement(I.E,null,"Volume: ",c.volume,"%"))),r.createElement(cn,{title:"System Status",icon:"server",status:"Online",isPositive:!0},r.createElement(T.a,null,r.createElement(I.E,null,"Primary Sources: ",t.filter((e=>e.enabled)).length),r.createElement(I.E,null,"Active Sinks: ",n.filter((e=>e.enabled)).length),r.createElement(I.E,null,"Active Routes: ",a.filter((e=>e.enabled)).length)))),N&&r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:U,bg:M},r.createElement(x.s,{justify:"space-between",align:"center",mb:4},r.createElement(x.s,{align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-broadcast-tower",mr:2}),r.createElement(L.D,{as:"h3",size:"md",color:P},"Primary Source: ",N.name)),r.createElement(_.$,{size:"sm",onClick:()=>u("active-source"),colorScheme:W,variant:"outline"},"View Details")),r.createElement(sn,{key:`primary-source-${N.name}`,item:N,type:"sources",isStarred:o.includes(N.name),isActive:!0,onStar:()=>d("sources",N.name),onActivate:()=>m(N.name),onEqualizer:()=>b(N.name),onVnc:N.vnc_ip?()=>E(N.name):void 0,onUpdateVolume:e=>v(N.name,e),onUpdateTimeshift:e=>w(N.name,e),onControlSource:N.vnc_ip?e=>R&&R(N.name,e):void 0,onToggleActiveSource:()=>m(N.name),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}})),r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:U,bg:M},r.createElement(x.s,{justify:"space-between",align:"center",mb:4},r.createElement(x.s,{align:"center"},r.createElement(ne.I,{as:tn.G,mr:2,color:"yellow.400"}),r.createElement(L.D,{as:"h3",size:"md",color:P},"Favorites")),r.createElement(_.$,{size:"sm",onClick:()=>u("favorites"),colorScheme:W,variant:"outline"},"View All")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},o.slice(0,3).map((e=>{const o=t.find((t=>t.name===e));return o?r.createElement(sn,{key:`source-${o.name}`,item:o,type:"sources",isStarred:!0,isActive:s===o.name,onStar:()=>d("sources",o.name),onActivate:()=>m(o.name),onEqualizer:()=>b(o.name),onVnc:o.vnc_ip?()=>E(o.name):void 0,onUpdateVolume:e=>v(o.name,e),onUpdateTimeshift:e=>w(o.name,e),onControlSource:o.vnc_ip?e=>R&&R(o.name,e):void 0,onToggleActiveSource:()=>m(o.name),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}}):null})),l.slice(0,3).map((e=>{const o=n.find((t=>t.name===e));return o?r.createElement(sn,{key:`sink-${o.name}`,item:o,type:"sinks",isStarred:!0,isActive:c?.name===o.name,onStar:()=>d("sinks",o.name),onActivate:()=>g(o.name),onEqualizer:()=>h(o.name),onListen:()=>{c?.name===o.name?A.listenToSink(null):A.listenToSink(o)},onVisualize:()=>k?k(o):{},onUpdateVolume:e=>S(o.name,e),onUpdateTimeshift:e=>C(o.name,e),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}}):null})),i.slice(0,3).map((e=>{const o=a.find((t=>t.name===e));return o?r.createElement(sn,{key:`route-${o.name}`,item:o,type:"routes",isStarred:!0,isActive:o.enabled,onStar:()=>d("routes",o.name),onActivate:()=>p(o.name),onEqualizer:()=>f(o.name),onUpdateVolume:e=>z(o.name,e),onUpdateTimeshift:e=>$(o.name,e),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}}):null})))),r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:U,bg:M},r.createElement(x.s,{justify:"space-between",align:"center",mb:4},r.createElement(x.s,{align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-broadcast-tower",mr:2}),r.createElement(L.D,{as:"h3",size:"md",color:P},"Primary Sources")),r.createElement(_.$,{size:"sm",onClick:()=>u("sources"),colorScheme:W,variant:"outline"},"View All")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},t.filter((e=>e.enabled)).slice(0,10).map((e=>r.createElement(sn,{key:`active-source-${e.name}`,item:e,type:"sources",isStarred:o.includes(e.name),isActive:s===e.name,onStar:()=>d("sources",e.name),onActivate:()=>m(e.name),onEqualizer:()=>b(e.name),onVnc:e.vnc_ip?()=>E(e.name):void 0,onUpdateVolume:t=>v(e.name,t),onUpdateTimeshift:t=>w(e.name,t),onControlSource:e.vnc_ip?t=>R&&R(e.name,t):void 0,onToggleActiveSource:()=>m(e.name),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}}))))),r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:U,bg:M},r.createElement(x.s,{justify:"space-between",align:"center",mb:4},r.createElement(x.s,{align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-volume-up",mr:2}),r.createElement(L.D,{as:"h3",size:"md",color:P},"Active Sinks")),r.createElement(_.$,{size:"sm",onClick:()=>u("sinks"),colorScheme:W,variant:"outline"},"View All")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},n.filter((e=>e.enabled)).slice(0,10).map((e=>r.createElement(sn,{key:`active-sink-${e.name}`,item:e,type:"sinks",isStarred:l.includes(e.name),isActive:c?.name===e.name,onStar:()=>d("sinks",e.name),onActivate:()=>g(e.name),onEqualizer:()=>h(e.name),onListen:()=>{c?.name===e.name?A.listenToSink(null):A.listenToSink(e)},onVisualize:()=>k?k(e):{},onUpdateVolume:t=>S(e.name,t),onUpdateTimeshift:t=>C(e.name,t),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}}))))),r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:U,bg:M},r.createElement(x.s,{justify:"space-between",align:"center",mb:4},r.createElement(x.s,{align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-route",mr:2}),r.createElement(L.D,{as:"h3",size:"md",color:P},"Active Routes")),r.createElement(_.$,{size:"sm",onClick:()=>u("routes"),colorScheme:W,variant:"outline"},"View All")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},a.filter((e=>e.enabled)).slice(0,10).map((e=>r.createElement(sn,{key:`active-route-${e.name}`,item:e,type:"routes",isStarred:i.includes(e.name),isActive:e.enabled,onStar:()=>d("routes",e.name),onActivate:()=>p(e.name),onEqualizer:()=>f(e.name),onUpdateVolume:t=>z(e.name,t),onUpdateTimeshift:t=>$(e.name,t),routes:a,allSources:t,allSinks:n,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),u("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),u("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),u("sink"),console.log(`Navigating to sink detail: ${t}`))}}))))))},dn=e=>{let{icon:t,title:n,message:a,actionText:o,onAction:l}=e;const i=(0,y.dU)("gray.50","gray.700"),s=(0,y.dU)("gray.200","gray.600"),c=(0,y.dU)("blue.500","blue.300");return r.createElement(T.a,{p:8,borderWidth:"1px",borderRadius:"lg",borderColor:s,bg:i,textAlign:"center",width:"100%",maxWidth:"500px",mx:"auto",my:8},r.createElement(ue.T,{spacing:4},r.createElement(T.a,{fontSize:"4xl",color:c},r.createElement("i",{className:`fas fa-${t}`})),r.createElement(L.D,{as:"h3",size:"lg"},n),r.createElement(I.E,{color:(0,y.dU)("gray.600","gray.300")},a),o&&l&&r.createElement(_.$,{colorScheme:"blue",onClick:l,mt:2},o)))},mn=e=>{let{sources:t,sinks:n,routes:a,starredSources:o,contextActiveSource:l,setCurrentCategory:i,handleStar:s,handleToggleSource:c,handleToggleRoute:u,handleOpenSourceEqualizer:d,handleOpenVnc:m,handleUpdateSourceVolume:g,handleUpdateSourceTimeshift:p,handleUpdateRouteVolume:b,handleUpdateRouteTimeshift:h,handleControlSource:f}=e;const E=t.find((e=>e.name===l)),k=(0,y.dU)("gray.700","white");return E?r.createElement(T.a,null,r.createElement(T.a,{mb:6},r.createElement(L.D,{as:"h2",size:"lg",color:k,mb:4},"Primary Source"),r.createElement(sn,{key:`primary-source-${E.name}`,item:E,type:"sources",isStarred:o.includes(E.name),isActive:!0,onStar:()=>s("sources",E.name),onActivate:()=>c(E.name),onEqualizer:()=>d(E.name),onVnc:E.vnc_ip?()=>m(E.name):void 0,onUpdateVolume:e=>g(E.name,e),onUpdateTimeshift:e=>p(E.name,e),onControlSource:E.vnc_ip&&f?e=>f(E.name,e):void 0,onToggleActiveSource:()=>c(E.name),routes:a,allSources:t,allSinks:n,navigateToDetails:void 0,navigate:(e,t)=>{"routes"===e?(i("routes"),console.log(`Navigating to route: ${t}`)):"sources"===e||"group-source"===e?(i("sources"),console.log(`Navigating to source: ${t}`)):"sinks"!==e&&"group-sink"!==e||(i("sinks"),console.log(`Navigating to sink: ${t}`))}})),r.createElement(T.a,{mb:6},r.createElement(x.s,{align:"center",justify:"space-between",mb:4},r.createElement(x.s,{align:"center"},r.createElement(ne.I,{as:W.$Fg,mr:2,color:k}),r.createElement(L.D,{as:"h3",size:"md",color:k},"Connected Routes")),r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.OiG}),colorScheme:"blue",size:"sm",onClick:()=>Pe("source",E.name)},"Add Route")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},a.filter((e=>e.source===E.name)).map((e=>r.createElement(sn,{key:`source-route-${e.name}`,item:e,type:"routes",isStarred:o.includes(e.name),isActive:e.enabled,onStar:()=>s("routes",e.name),onActivate:()=>u(e.name),onEqualizer:()=>d(e.name),onUpdateVolume:t=>b(e.name,t),onUpdateTimeshift:t=>h(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentRouteName",e.name),i("route")},navigate:(e,t)=>{"routes"===e?(i("routes"),console.log(`Navigating to route: ${t}`)):"sources"===e||"group-source"===e?(i("sources"),console.log(`Navigating to source: ${t}`)):"sinks"!==e&&"group-sink"!==e||(i("sinks"),console.log(`Navigating to sink: ${t}`))}})))))):r.createElement(dn,{icon:"broadcast-tower",title:"No Primary Source",message:"Select a source to make it active",actionText:"View Sources",onAction:()=>i("sources")})},gn=e=>{let{routes:t,starredSinks:n,listeningToSink:a,setCurrentCategory:o,handleStar:l,handleToggleSink:i,handleToggleRoute:s,handleOpenSinkEqualizer:c,handleOpenVisualizer:u,handleUpdateRouteVolume:d,handleUpdateRouteTimeshift:m,actions:g}=e;const p=(0,y.dU)("white","gray.800"),b=(0,y.dU)("gray.200","gray.700"),h=(0,y.dU)("gray.700","white"),f=(0,y.dU)("gray.600","gray.400"),E=(0,y.dU)("gray.800","white"),k=(0,y.dU)("gray.200","gray.600"),v=(0,y.dU)("blue.50","blue.900"),S=(0,y.dU)("blue.600","blue.200"),w=(0,y.dU)("yellow.400","yellow.300");return a?r.createElement(T.a,null,r.createElement(T.a,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:b,bg:p,mb:6,boxShadow:"sm"},r.createElement(x.s,{justify:"space-between",align:"center",mb:4},r.createElement(L.D,{as:"h2",size:"lg",color:h},a.name),r.createElement(_.$,{variant:"ghost",onClick:()=>l("sinks",a.name),"aria-label":n.includes(a.name)?"Unstar":"Star",color:n.includes(a.name)?w:"gray.400",_hover:{bg:"transparent"}},r.createElement(ne.I,{as:tn.G,boxSize:5}))),r.createElement(Pt.c,{mb:4}),r.createElement(ct.r,{columns:{base:1,md:2},spacing:4,mb:6},r.createElement(x.s,{direction:"column"},r.createElement(I.E,{fontWeight:"bold",color:f,mb:1},"Status"),r.createElement(Wt.E,{colorScheme:a.enabled?"green":"red",alignSelf:"flex-start",px:2,py:1,borderRadius:"full"},a.enabled?"Enabled":"Disabled")),a.ip&&r.createElement(x.s,{direction:"column"},r.createElement(I.E,{fontWeight:"bold",color:f,mb:1},"IP Address"),r.createElement(I.E,{color:E},a.ip)),a.port&&r.createElement(x.s,{direction:"column"},r.createElement(I.E,{fontWeight:"bold",color:f,mb:1},"Port"),r.createElement(I.E,{color:E},a.port)),void 0!==a.volume&&r.createElement(x.s,{direction:"column"},r.createElement(I.E,{fontWeight:"bold",color:f,mb:1},"Volume"),r.createElement(I.E,{color:E},a.volume,"%"))),r.createElement(x.s,{wrap:"wrap",gap:3},r.createElement(_.$,{colorScheme:a.enabled?"red":"green",onClick:()=>i(a.name),size:"md",mr:2},a.enabled?"Disable":"Enable"),r.createElement(_.$,{leftIcon:r.createElement("i",{className:"fas fa-headphones-alt"}),colorScheme:"teal",onClick:()=>g.listenToSink(null),size:"md"},"Stop Listening"),r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.QCN}),onClick:()=>c(a.name),bg:v,color:S,_hover:{bg:k},size:"md"},"Equalizer"),u&&r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.v$b}),onClick:()=>u(a),bg:v,color:S,_hover:{bg:k},size:"md"},"Visualizer"))),r.createElement(T.a,{mb:6},r.createElement(x.s,{align:"center",justify:"space-between",mb:4},r.createElement(x.s,{align:"center"},r.createElement(ne.I,{as:W.$Fg,mr:2,color:h}),r.createElement(L.D,{as:"h3",size:"md",color:h},"Connected Routes")),r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.OiG}),colorScheme:"blue",size:"sm",onClick:()=>Pe("sink",a.name)},"Add Route")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},t.filter((e=>e.sink===a.name)).map((e=>r.createElement(sn,{key:`sink-route-${e.name}`,item:e,type:"routes",isStarred:!1,isActive:e.enabled,onStar:()=>l("routes",e.name),onActivate:()=>s(e.name),onUpdateVolume:t=>d(e.name,t),onUpdateTimeshift:t=>m(e.name,t),routes:t})))))):r.createElement(dn,{icon:"headphones",title:"Not Listening to Any Sink",message:"Select a sink to listen to",actionText:"View Sinks",onAction:()=>o("sinks")})},pn=e=>{let{item:t,type:n,isStarred:a,isActive:o,onStar:l,onActivate:i,onEdit:s,onEqualizer:c,onVnc:u,onListen:d,onVisualize:m,onUpdateVolume:g,onUpdateTimeshift:p,routes:b=[],allSources:h=[],allSinks:f=[],navigate:E,onToggleActiveSource:k,onControlSource:v,navigateToDetails:S}=e;const[w,C]=(0,r.useState)(!1),z=e=>"sources"===n,$=e=>"sinks"===n,A=e=>"routes"===n,N=z()?b.filter((e=>e.source===t.name&&e.enabled)).map((e=>e.name)):$()?b.filter((e=>e.sink===t.name&&e.enabled)).map((e=>e.name)):[],M=z()?b.filter((e=>e.source===t.name&&!e.enabled)).map((e=>e.name)):$()?b.filter((e=>e.sink===t.name&&!e.enabled)).map((e=>e.name)):[],U=(()=>{const e=[];return z()?h.forEach((n=>{n.is_group&&n.group_members&&n.group_members.includes(t.name)&&e.push({name:n.name,type:"sources"})})):$()&&f.forEach((n=>{n.is_group&&n.group_members&&n.group_members.includes(t.name)&&e.push({name:n.name,type:"sinks"})})),e})(),P=(0,y.dU)("white","gray.800"),D=(0,y.dU)("gray.800","white"),L=(0,y.dU)("gray.600","gray.300"),O=(0,y.dU)("yellow.400","yellow.500");return r.createElement(T.a,{id:`${n.slice(0,-1)}-${t.name}`,className:`resource-list-item ${o?"active":""} ${w?"expanded":""}`,borderWidth:"1px",borderRadius:"md",mb:2,overflow:"hidden",bg:P,_hover:{boxShadow:"sm"},display:"flex",flexDirection:"column",width:"100%",position:"relative"},r.createElement(x.s,{p:3,alignItems:"center",justifyContent:"space-between",borderBottomWidth:w?"1px":"0",borderColor:"transparent",width:"100%",cursor:"pointer",onClick:e=>{e.stopPropagation(),C(!w)}},r.createElement(x.s,{alignItems:"center",flex:"1"},r.createElement(R.K,{"aria-label":a?"Remove from favorites":"Add to favorites",icon:r.createElement(tn.G,{color:a?O:"gray.300"}),size:"sm",variant:"ghost",mr:2,onClick:e=>{e.stopPropagation(),l()}}),z()&&r.createElement(R.K,{"aria-label":o?"Unmark as Primary Source":"Mark as Primary Source",title:o?"Unmark as Primary Source":"Mark as Primary Source",icon:r.createElement(T.a,{as:W.Uhg,color:o?"cyan.500":"gray.400",transition:"all 0.2s"}),onClick:e=>{e.stopPropagation(),k&&k()},variant:"ghost",size:"sm",mr:2}),c&&r.createElement(R.K,{"aria-label":"Equalizer",title:"Open Equalizer",icon:r.createElement(T.a,{as:W.QCN,transform:"rotate(90deg)"}),onClick:e=>{e.stopPropagation(),c()},variant:"ghost",size:"sm",mr:2}),s&&r.createElement(R.K,{"aria-label":"Edit",title:"Edit",icon:r.createElement(zt.Z,null),onClick:e=>{e.stopPropagation(),s?s():z()?Me("sources",t):$()?Me("sinks",t):A()&&Me("routes",t)},variant:"ghost",size:"sm",mr:2}),r.createElement(T.a,{onClick:e=>{e.target.closest("button")||(S?S():E&&(z()?E("sources",t.name):$()?E("sinks",t.name):A()&&E("routes",t.name)))}},r.createElement(I.E,{fontWeight:"bold",mr:3,color:D},t.name)),r.createElement(Se.z,{spacing:1,mr:3},(()=>{const e=[];return z()?e.push(r.createElement(Wt.E,{key:"type",colorScheme:"green",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none"},"Source")):$()?e.push(r.createElement(Wt.E,{key:"type",colorScheme:"blue",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none"},"Sink")):A()&&e.push(r.createElement(Wt.E,{key:"type",colorScheme:"red",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none"},"Route")),e})(),r.createElement(Wt.E,{colorScheme:t.enabled?"green":"red",px:2,py:1,borderRadius:"full",cursor:"pointer",userSelect:"none",_hover:{opacity:.8},onClick:e=>{e.stopPropagation(),i()},title:t.enabled?"Click to disable":"Click to enable"},t.enabled?"Enabled":"Disabled"),$()&&d&&r.createElement(Wt.E,{colorScheme:o?"purple":"gray",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none",cursor:"pointer",_hover:{opacity:.8},onClick:e=>{e.stopPropagation(),d()},title:o?"Click to stop listening":"Click to listen"},o?"Listening":"Not Listening"),z()&&t.vnc_ip&&u&&r.createElement(Wt.E,{colorScheme:"purple",mr:1,borderRadius:"full",px:2,py:1,userSelect:"none",cursor:"pointer",_hover:{opacity:.8},onClick:e=>{e.stopPropagation(),u()},title:"Open VNC"},"VNC"))),r.createElement(x.s,null,r.createElement(R.K,{"aria-label":w?"Collapse":"Expand",icon:w?r.createElement(re.M,null):r.createElement(Gt.D,null),size:"sm",variant:"ghost"}))),r.createElement(dt.S,{in:w,animateOpacity:!0,style:{width:"100%"}},r.createElement(T.a,{p:4,width:"100%"},(z()||$()||A())&&r.createElement(T.a,{mt:3,mb:3},r.createElement(x.s,{mb:1,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-volume-up",mr:2}),r.createElement(I.E,{fontWeight:"medium"},"Volume:")),r.createElement(Se.z,{spacing:3,ml:2},r.createElement(Ot,{value:A()?t.volume||100:t.volume,onChange:e=>g&&g(e)}),z()&&t.vnc_ip&&r.createElement(r.Fragment,null,v&&r.createElement(r.Fragment,null,r.createElement(R.K,{"aria-label":"Previous Track",icon:r.createElement(W.ttb,null),size:"sm",colorScheme:"purple",variant:"outline",onClick:e=>{e.stopPropagation(),v("prevtrack")},ml:5,mt:-5}),r.createElement(R.K,{"aria-label":"Play/Pause",icon:r.createElement(W.gSK,null),size:"sm",colorScheme:"purple",variant:"outline",onClick:e=>{e.stopPropagation(),v("play")},mt:-5}),r.createElement(R.K,{"aria-label":"Next Track",icon:r.createElement(W.FH8,null),size:"sm",colorScheme:"purple",variant:"outline",onClick:e=>{e.stopPropagation(),v("nexttrack")},mt:-5}))))),r.createElement(x.s,{justify:"flex-start",wrap:"wrap",width:"100%",justifyContent:"center",gap:2,mb:3},$()&&m&&r.createElement(_.$,{leftIcon:r.createElement(T.a,{as:"i",className:"fas fa-chart-bar"}),colorScheme:"cyan",variant:"outline",size:"sm",onClick:m,"aria-label":"Visualize",title:"Visualize"},"Visualize")),r.createElement(nn.n,{allowMultiple:!0,defaultIndex:[],mt:2},r.createElement(rn.A,{border:"none"},r.createElement("h2",null,r.createElement(an.J,{px:4,py:2,_hover:{bg:(0,y.dU)("blue.50","gray.700")},borderRadius:"md",color:(0,y.dU)("gray.700","gray.200")},r.createElement(T.a,{flex:"1",textAlign:"left",fontWeight:"medium"},"Timeshift"),r.createElement(on.Q,{color:(0,y.dU)("blue.500","blue.300")}))),r.createElement(ln.v,{pb:4,px:5,bg:(0,y.dU)("gray.50","gray.800")},(z()||$()||A())&&r.createElement(T.a,{mb:4},r.createElement(x.s,{mb:1,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-clock",mr:2}),r.createElement(I.E,{fontWeight:"medium"},"Timeshift:")),r.createElement(Xt,{value:(z()||$(),t.timeshift||0),onChange:e=>p&&p(e)})),$()&&m&&r.createElement(T.a,{mb:4},r.createElement(_.$,{leftIcon:r.createElement(T.a,{as:"i",className:"fas fa-chart-bar"}),colorScheme:"cyan",variant:"outline",size:"sm",onClick:m,"aria-label":"Visualize",title:"Visualize"},"Visualize")))),r.createElement(rn.A,{border:"none"},r.createElement("h2",null,r.createElement(an.J,{px:4,py:2,_hover:{bg:(0,y.dU)("blue.50","gray.700")},borderRadius:"md",color:(0,y.dU)("gray.700","gray.200")},r.createElement(T.a,{flex:"1",textAlign:"left",fontWeight:"medium"},A()?"Related Items":"Related Routes"),r.createElement(on.Q,{color:(0,y.dU)("blue.500","blue.300")}))),r.createElement(ln.v,{pb:4,px:5,bg:(0,y.dU)("gray.50","gray.800")},A()&&r.createElement(T.a,{fontSize:"sm"},r.createElement(x.s,{mb:2,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-microphone",mr:2}),r.createElement(I.E,{fontWeight:"medium",mr:1},"From:"),r.createElement(I.E,{color:L},t.source)),r.createElement(x.s,{mb:3,align:"center"},r.createElement(T.a,{as:"i",className:"fas fa-volume-up",mr:2}),r.createElement(I.E,{fontWeight:"medium",mr:1},"To:"),r.createElement(I.E,{color:L},t.sink)),r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Connection Links:"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1,mb:3},r.createElement(Wt.E,{colorScheme:"green",cursor:E?"pointer":"default",_hover:E?{bg:"green.500"}:{},onClick:e=>{e.stopPropagation(),E&&E("sources",t.source)},borderRadius:"full",px:2,py:1,userSelect:"none"},"Source: ",t.source,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))),r.createElement(Wt.E,{colorScheme:"blue",cursor:E?"pointer":"default",_hover:E?{bg:"blue.500"}:{},onClick:e=>{e.stopPropagation(),E&&E("sinks",t.sink)},borderRadius:"full",px:2,py:1,userSelect:"none"},"Sink: ",t.sink,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))),(z()||$())&&r.createElement(T.a,{fontSize:"sm"},(z()||$())&&t.is_group&&t.group_members&&t.group_members.length>0&&r.createElement(T.a,{mb:2},r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Group Members (",t.group_members.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},t.group_members.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"purple",cursor:E?"pointer":"default",_hover:E?{bg:"purple.500"}:{},onClick:t=>{t.stopPropagation(),E&&E(z()?"sources":"sinks",e)},borderRadius:"full",px:2,py:1,userSelect:"none"},e,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))),(z()||$())&&!t.is_group&&U.length>0&&r.createElement(T.a,{mb:2},r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Member of Groups (",U.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},U.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"sources"===e.type?"green":"blue",cursor:E?"pointer":"default",_hover:E?{bg:"sources"===e.type?"green.500":"blue.500"}:{},onClick:t=>{t.stopPropagation(),E&&E("sources"===e.type?"sources":"sinks",e.name)},borderRadius:"full",px:2,py:1,userSelect:"none"},e.name,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))),N.length>0&&r.createElement(T.a,{mb:2},r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Active Routes (",N.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},N.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"green",cursor:E?"pointer":"default",_hover:E?{bg:"green.500"}:{},onClick:t=>{t.stopPropagation(),E&&E("routes",e)},borderRadius:"full",px:2,py:1,userSelect:"none"},e,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))),M.length>0&&r.createElement(T.a,null,r.createElement(I.E,{fontWeight:"semibold",fontSize:"xs",color:(0,y.dU)("gray.600","gray.400")},"Disabled Routes (",M.length,"):"),r.createElement(x.s,{flexWrap:"wrap",gap:1,mt:1},M.map(((e,t)=>r.createElement(Wt.E,{key:t,colorScheme:"red",variant:"outline",cursor:E?"pointer":"default",_hover:E?{bg:"red.100"}:{},onClick:t=>{t.stopPropagation(),E&&E("routes",e)},borderRadius:"full",px:2,py:1,userSelect:"none"},e,E&&r.createElement(T.a,{as:"span",ml:1},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))))))),$()&&r.createElement(ue.T,{spacing:4,align:"stretch",width:"100%"},(t.ip||t.port||t.sample_rate||t.bit_depth)&&r.createElement(T.a,null,r.createElement(I.E,{fontWeight:"semibold",mb:2},"Technical Details"),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:2},t.ip&&r.createElement(I.E,{fontSize:"sm"},r.createElement("i",{className:"fas fa-network-wired"})," IP: ",t.ip),t.port&&r.createElement(I.E,{fontSize:"sm"},r.createElement("i",{className:"fas fa-plug"})," Port: ",t.port),t.sample_rate&&r.createElement(I.E,{fontSize:"sm"},r.createElement("i",{className:"fas fa-wave-square"})," Sample Rate: ",t.sample_rate,"Hz"),t.bit_depth&&r.createElement(I.E,{fontSize:"sm"},r.createElement("i",{className:"fas fa-microchip"})," Bit Depth: ",t.bit_depth,"-bit"))),!t.is_group&&U.length>0&&r.createElement(T.a,null,r.createElement(I.E,{fontWeight:"semibold",mb:2},"Member of Groups"),r.createElement(ue.T,{align:"stretch",spacing:1,width:"100%"},U.map(((e,t)=>r.createElement(T.a,{key:t,p:2,borderWidth:"1px",borderRadius:"md",cursor:E?"pointer":"default",_hover:E?{bg:(0,y.dU)("gray.100","gray.700")}:{},onClick:t=>{t.stopPropagation(),E&&E("sources"===e.type?"sources":"sinks",e.name)},bg:(0,y.dU)("sources"===e.type?"green.50":"blue.50","sources"===e.type?"green.900":"blue.900"),borderColor:(0,y.dU)("sources"===e.type?"green.200":"blue.200","sources"===e.type?"green.700":"blue.700")},r.createElement(I.E,{fontSize:"sm"},e.name,E&&r.createElement(T.a,{as:"span",ml:1,color:(0,y.dU)("blue.500","blue.300")},r.createElement("i",{className:"fas fa-external-link-alt",style:{fontSize:"0.7em"}}))))))))))))},bn=e=>{let{sources:t,starredSources:n,contextActiveSource:a,viewMode:o,sortConfig:l,handleStar:i,handleToggleSource:s,handleOpenSourceEqualizer:c,handleOpenVnc:u,handleUpdateSourceVolume:d,handleUpdateSourceTimeshift:m,actions:g,routes:p,handleControlSource:b}=e;const h=((e,t,n,r)=>[...e].sort(((e,a)=>{if("favorite"===t.key){const r=n.includes(e.name),o=n.includes(a.name);return"asc"===t.direction?r===o?0:r?-1:1:r===o?0:r?1:-1}if("active"===t.key){const n=r===e.name,o=r===a.name;return"asc"===t.direction?n===o?0:n?-1:1:n===o?0:n?1:-1}const o=e[t.key],l=a[t.key];return void 0===o||void 0===l?0:"string"==typeof o&&"string"==typeof l?"asc"===t.direction?o.localeCompare(l):l.localeCompare(o):o<l?"asc"===t.direction?-1:1:o>l?"asc"===t.direction?1:-1:0})))(t,l,n,a),f=(0,y.dU)("white","gray.800");return r.createElement(T.a,null,"grid"===o?r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},h.map((e=>r.createElement(sn,{key:`source-${e.name}`,item:e,type:"sources",isStarred:n.includes(e.name),isActive:a===e.name,onStar:()=>i("sources",e.name),onActivate:()=>s(e.name),onEqualizer:()=>c(e.name),onVnc:e.vnc_ip?()=>u(e.name):void 0,onUpdateVolume:t=>d(e.name,t),onUpdateTimeshift:t=>m(e.name,t),onEdit:()=>g.editItem(e.is_group?"group-source":"sources",e),routes:p,allSources:t,navigate:g.navigate,onToggleActiveSource:()=>g.toggleActiveSource(e.name),onControlSource:e.vnc_ip&&b?t=>b(e.name,t):void 0})))):r.createElement(ue.T,{spacing:2,align:"stretch",bg:f,borderRadius:"md"},h.map((e=>r.createElement(pn,{key:`source-${e.name}`,item:e,type:"sources",isStarred:n.includes(e.name),isActive:a===e.name,onStar:()=>i("sources",e.name),onActivate:()=>s(e.name),onEqualizer:()=>c(e.name),onVnc:e.vnc_ip?()=>u(e.name):void 0,onUpdateVolume:t=>d(e.name,t),onUpdateTimeshift:t=>m(e.name,t),onEdit:()=>g.editItem(e.is_group?"group-source":"sources",e),routes:p,allSources:t,navigate:g.navigate,onToggleActiveSource:()=>g.toggleActiveSource(e.name),onControlSource:e.vnc_ip&&b?t=>b(e.name,t):void 0})))))},hn=e=>{let{sinks:t,starredSinks:n,listeningToSink:a,viewMode:o,sortConfig:l,handleStar:i,handleToggleSink:s,handleOpenSinkEqualizer:c,handleUpdateSinkVolume:u,handleUpdateSinkTimeshift:d,handleOpenVisualizer:m,actions:g,routes:p}=e;const b=((e,t,n,r)=>[...e].sort(((e,a)=>{if("favorite"===t.key){const r=n.includes(e.name),o=n.includes(a.name);return"asc"===t.direction?r===o?0:r?-1:1:r===o?0:r?1:-1}if("active"===t.key){const n=r?.name===e.name,o=r?.name===a.name;return"asc"===t.direction?n===o?0:n?-1:1:n===o?0:n?1:-1}const o=e[t.key],l=a[t.key];return void 0===o||void 0===l?0:"string"==typeof o&&"string"==typeof l?"asc"===t.direction?o.localeCompare(l):l.localeCompare(o):o<l?"asc"===t.direction?-1:1:o>l?"asc"===t.direction?1:-1:0})))(t,l,n,a),h=(0,y.dU)("white","gray.800");return r.createElement(T.a,null,"grid"===o?r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},b.map((e=>r.createElement(sn,{key:`sink-${e.name}`,item:e,type:"sinks",isStarred:n.includes(e.name),isActive:a?.name===e.name,onStar:()=>i("sinks",e.name),onActivate:()=>s(e.name),onEqualizer:()=>c(e.name),onUpdateVolume:t=>u(e.name,t),onUpdateTimeshift:t=>d(e.name,t),onEdit:()=>g.editItem(e.is_group?"group-sink":"sinks",e),onListen:()=>{a?.name===e.name?g.listenToSink(null):g.listenToSink(e)},onVisualize:()=>m?m(e):void 0,routes:p,allSinks:t,navigate:g.navigate})))):r.createElement(ue.T,{spacing:2,align:"stretch",bg:h,borderRadius:"md"},b.map((e=>r.createElement(pn,{key:`sink-${e.name}`,item:e,type:"sinks",isStarred:n.includes(e.name),isActive:a?.name===e.name,onStar:()=>i("sinks",e.name),onActivate:()=>s(e.name),onEqualizer:()=>c(e.name),onUpdateVolume:t=>u(e.name,t),onUpdateTimeshift:t=>d(e.name,t),onEdit:()=>g.editItem(e.is_group?"group-sink":"sinks",e),onListen:()=>{a?.name===e.name?g.listenToSink(null):g.listenToSink(e)},onVisualize:()=>m?m(e):void 0,routes:p,allSinks:t,navigate:g.navigate})))))},fn=e=>{let{routes:t,starredRoutes:n,viewMode:a,sortConfig:o,handleStar:l,handleToggleRoute:i,handleOpenRouteEqualizer:s,handleUpdateRouteVolume:c,handleUpdateRouteTimeshift:u,actions:d}=e;const m=((e,t,n)=>[...e].sort(((e,r)=>{if("favorite"===t.key){const a=n.includes(e.name),o=n.includes(r.name);return"asc"===t.direction?a===o?0:a?-1:1:a===o?0:a?1:-1}const a=e[t.key],o=r[t.key];return void 0===a||void 0===o?0:"string"==typeof a&&"string"==typeof o?"asc"===t.direction?a.localeCompare(o):o.localeCompare(a):a<o?"asc"===t.direction?-1:1:a>o?"asc"===t.direction?1:-1:0})))(t,o,n),g=(0,y.dU)("white","gray.800");return r.createElement(T.a,null,"grid"===a?r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},m.map((e=>r.createElement(sn,{key:`route-${e.name}`,item:e,type:"routes",isStarred:n.includes(e.name),isActive:e.enabled,onStar:()=>l("routes",e.name),onActivate:()=>i(e.name),onEqualizer:()=>s(e.name),onUpdateVolume:t=>c(e.name,t),onUpdateTimeshift:t=>u(e.name,t),onEdit:()=>d.editItem("routes",e),routes:t,navigate:d.navigate})))):r.createElement(ue.T,{spacing:2,align:"stretch",bg:g,borderRadius:"md"},m.map((e=>r.createElement(pn,{key:`route-${e.name}`,item:e,type:"routes",isStarred:n.includes(e.name),isActive:e.enabled,onStar:()=>l("routes",e.name),onActivate:()=>i(e.name),onEqualizer:()=>s(e.name),onUpdateVolume:t=>c(e.name,t),onUpdateTimeshift:t=>u(e.name,t),onEdit:()=>d.editItem("routes",e),routes:t,navigate:d.navigate})))))},En=e=>{let{sources:t,sinks:n,routes:a,starredSources:o,starredSinks:l,starredRoutes:i,contextActiveSource:s,listeningToSink:c,viewMode:u,handleStar:d,handleToggleSource:m,handleToggleSink:g,handleToggleRoute:p,handleOpenSourceEqualizer:b,handleOpenSinkEqualizer:h,handleOpenRouteEqualizer:f,handleOpenVnc:E,handleUpdateSourceVolume:k,handleUpdateSinkVolume:v,handleUpdateSourceTimeshift:S,handleUpdateSinkTimeshift:w,handleUpdateRouteVolume:C,handleUpdateRouteTimeshift:z,handleControlSource:$,setCurrentCategory:R,sortConfig:_,actions:I,handleOpenVisualizer:A}=e;const N=t.filter((e=>o.includes(e.name))),M=n.filter((e=>l.includes(e.name))),U=a.filter((e=>i.includes(e.name)));if(0===N.length&&0===M.length&&0===U.length)return r.createElement(dn,{icon:"star",title:"No Favorites",message:"Star items to add them to your favorites"});const P=(0,y.dU)("white","gray.800"),D=(0,y.dU)("gray.200","gray.700"),O=(0,y.dU)("gray.700","white"),V=(0,y.dU)("white","gray.800");return r.createElement(T.a,null,N.length>0&&r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:D,bg:P},r.createElement(x.s,{align:"center",mb:4},r.createElement(ne.I,{as:W.i0t,mr:2,color:O}),r.createElement(L.D,{as:"h3",size:"md",color:O},"Favorite Sources")),r.createElement(T.a,null,"grid"===u?r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},N.map((e=>r.createElement(sn,{key:`favorite-source-${e.name}`,item:e,type:"sources",isStarred:!0,isActive:s===e.name,onStar:()=>d("sources",e.name),onActivate:()=>m(e.name),onEqualizer:()=>b(e.name),onVnc:e.vnc_ip?()=>E(e.name):void 0,onUpdateVolume:t=>k(e.name,t),onUpdateTimeshift:t=>S(e.name,t),onControlSource:e.vnc_ip?t=>$?$(e.name,t):{}:void 0,onToggleActiveSource:()=>m(e.name),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentSourceName",e.name),window.location.hash="#/source"},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),window.location.hash="#/route"):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),window.location.hash="#/source"):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),window.location.hash="#/sink")}})))):r.createElement(ue.T,{spacing:2,align:"stretch",bg:V,borderRadius:"md"},N.map((e=>r.createElement(pn,{key:`favorite-source-${e.name}`,item:e,type:"sources",isStarred:!0,isActive:s===e.name,onStar:()=>d("sources",e.name),onActivate:()=>m(e.name),onEqualizer:()=>b(e.name),onVnc:e.vnc_ip?()=>E(e.name):void 0,onUpdateVolume:t=>k(e.name,t),onUpdateTimeshift:t=>S(e.name,t),onControlSource:e.vnc_ip?t=>$?$(e.name,t):{}:void 0,onToggleActiveSource:()=>m(e.name),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentSourceName",e.name),window.location.hash="#/source"},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),window.location.hash="#/route"):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),window.location.hash="#/source"):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),window.location.hash="#/sink")}})))))),M.length>0&&r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:D,bg:P},r.createElement(x.s,{align:"center",mb:4},r.createElement(ne.I,{as:W.pPd,mr:2,color:O}),r.createElement(L.D,{as:"h3",size:"md",color:O},"Favorite Sinks")),r.createElement(T.a,null,"grid"===u?r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},M.map((e=>r.createElement(sn,{key:`favorite-sink-${e.name}`,item:e,type:"sinks",isStarred:!0,isActive:c?.name===e.name,onStar:()=>d("sinks",e.name),onActivate:()=>g(e.name),onEqualizer:()=>h(e.name),onListen:()=>g(e.name),onVisualize:()=>h(e.name),onUpdateVolume:t=>v(e.name,t),onUpdateTimeshift:t=>w(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentSinkName",e.name),window.location.hash="#/sink"},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),window.location.hash="#/route"):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),window.location.hash="#/source"):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),window.location.hash="#/sink")}})))):r.createElement(ue.T,{spacing:2,align:"stretch",bg:V,borderRadius:"md"},M.map((e=>r.createElement(pn,{key:`favorite-sink-${e.name}`,item:e,type:"sinks",isStarred:!0,isActive:c?.name===e.name,onStar:()=>d("sinks",e.name),onActivate:()=>g(e.name),onEqualizer:()=>h(e.name),onListen:()=>g(e.name),onVisualize:()=>h(e.name),onUpdateVolume:t=>v(e.name,t),onUpdateTimeshift:t=>w(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentSinkName",e.name),window.location.hash="#/sink"},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),window.location.hash="#/route"):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),window.location.hash="#/source"):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),window.location.hash="#/sink")}})))))),U.length>0&&r.createElement(T.a,{mb:6,p:4,borderWidth:"1px",borderRadius:"lg",borderColor:D,bg:P},r.createElement(x.s,{align:"center",mb:4},r.createElement(ne.I,{as:W.$Fg,mr:2,color:O}),r.createElement(L.D,{as:"h3",size:"md",color:O},"Favorite Routes")),r.createElement(T.a,null,"grid"===u?r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},U.map((e=>r.createElement(sn,{key:`favorite-route-${e.name}`,item:e,type:"routes",isStarred:!0,isActive:e.enabled,onStar:()=>d("routes",e.name),onActivate:()=>p(e.name),onEqualizer:()=>f(e.name),onUpdateVolume:t=>C(e.name,t),onUpdateTimeshift:t=>z(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentRouteName",e.name),window.location.hash="#/route"},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),window.location.hash="#/route"):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),window.location.hash="#/source"):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),window.location.hash="#/sink")}})))):r.createElement(ue.T,{spacing:2,align:"stretch",bg:V,borderRadius:"md"},U.map((e=>r.createElement(pn,{key:`favorite-route-${e.name}`,item:e,type:"routes",isStarred:!0,isActive:e.enabled,onStar:()=>d("routes",e.name),onActivate:()=>p(e.name),onEqualizer:()=>f(e.name),onUpdateVolume:t=>C(e.name,t),onUpdateTimeshift:t=>z(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentRouteName",e.name),window.location.hash="#/route"},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),window.location.hash="#/route"):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),window.location.hash="#/source"):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),window.location.hash="#/sink")}})))))))},kn=e=>{let{sources:t,sinks:n,routes:a,starredSources:o,contextActiveSource:l,setCurrentCategory:i,handleStar:s,handleToggleSource:c,handleToggleRoute:u,handleOpenSourceEqualizer:d,handleOpenVnc:m,handleUpdateSourceVolume:g,handleUpdateSourceTimeshift:p,handleUpdateRouteVolume:b,handleUpdateRouteTimeshift:h,handleControlSource:f}=e;const[E,k]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=localStorage.getItem("currentSourceName");e&&k(e)}),[]);const v=t.find((e=>e.name===E)),S=(0,y.dU)("gray.700","white");return v?r.createElement(T.a,null,r.createElement(T.a,{mb:6},r.createElement(L.D,{as:"h2",size:"lg",color:S,mb:4},"Source: ",v.name),r.createElement(sn,{key:`source-${v.name}`,item:v,type:"sources",isStarred:o.includes(v.name),isActive:l===v.name,onStar:()=>s("sources",v.name),onActivate:()=>c(v.name),onEqualizer:()=>d(v.name),onVnc:v.vnc_ip?()=>m(v.name):void 0,onUpdateVolume:e=>g(v.name,e),onUpdateTimeshift:e=>p(v.name,e),onControlSource:v.vnc_ip&&f?e=>f(v.name,e):void 0,onToggleActiveSource:()=>c(v.name),routes:a,allSources:t,allSinks:n,navigateToDetails:void 0,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),i("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),i("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),i("sink"),console.log(`Navigating to sink detail: ${t}`))}})),r.createElement(T.a,{mb:6},r.createElement(x.s,{align:"center",justify:"space-between",mb:4},r.createElement(x.s,{align:"center"},r.createElement(ne.I,{as:W.$Fg,mr:2,color:S}),r.createElement(L.D,{as:"h3",size:"md",color:S},"Connected Routes")),r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.OiG}),colorScheme:"blue",size:"sm",onClick:()=>Pe("source",v.name)},"Add Route")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},a.filter((e=>e.source===v.name)).map((e=>r.createElement(sn,{key:`source-route-${e.name}`,item:e,type:"routes",isStarred:o.includes(e.name),isActive:e.enabled,onStar:()=>s("routes",e.name),onActivate:()=>u(e.name),onEqualizer:()=>d(e.name),onUpdateVolume:t=>b(e.name,t),onUpdateTimeshift:t=>h(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentRouteName",e.name),i("route")},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),i("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),i("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),i("sink"),console.log(`Navigating to sink detail: ${t}`))}})))))):r.createElement(dn,{icon:"microphone",title:"Source Not Found",message:"The requested source could not be found",actionText:"View All Sources",onAction:()=>i("sources")})},vn=e=>{let{sources:t,sinks:n,routes:a,starredSinks:o,listeningToSink:l,setCurrentCategory:i,handleStar:s,handleToggleSink:c,handleToggleRoute:u,handleOpenSinkEqualizer:d,handleUpdateSinkVolume:m,handleUpdateSinkTimeshift:g,handleUpdateRouteVolume:p,handleUpdateRouteTimeshift:b,actions:h}=e;const[f,E]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=localStorage.getItem("currentSinkName");e&&E(e)}),[]);const k=n.find((e=>e.name===f)),v=(0,y.dU)("gray.700","white");return k?r.createElement(T.a,null,r.createElement(T.a,{mb:6},r.createElement(L.D,{as:"h2",size:"lg",color:v,mb:4},"Sink: ",k.name),r.createElement(sn,{key:`sink-${k.name}`,item:k,type:"sinks",isStarred:o?.includes(k.name)||!1,isActive:l?.name===k.name,onStar:()=>s("sinks",k.name),onActivate:()=>c(k.name),onEqualizer:()=>d(k.name),onListen:()=>{l?.name===k.name?h.listenToSink(null):h.listenToSink(k)},onUpdateVolume:e=>m(k.name,e),onUpdateTimeshift:e=>g(k.name,e),routes:a,allSources:t,allSinks:n,navigateToDetails:void 0,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),i("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),i("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),i("sink"),console.log(`Navigating to sink detail: ${t}`))}})),r.createElement(T.a,{mb:6},r.createElement(x.s,{align:"center",justify:"space-between",mb:4},r.createElement(x.s,{align:"center"},r.createElement(ne.I,{as:W.$Fg,mr:2,color:v}),r.createElement(L.D,{as:"h3",size:"md",color:v},"Connected Routes")),r.createElement(_.$,{leftIcon:r.createElement(ne.I,{as:W.OiG}),colorScheme:"blue",size:"sm",onClick:()=>Pe("sink",k.name)},"Add Route")),r.createElement(ct.r,{columns:{base:1,md:2,lg:3,"2xl":4},spacing:4},a.filter((e=>e.sink===k.name)).map((e=>r.createElement(sn,{key:`sink-route-${e.name}`,item:e,type:"routes",isStarred:o?.includes(e.name)||!1,isActive:e.enabled,onStar:()=>s("routes",e.name),onActivate:()=>u(e.name),onEqualizer:()=>d(e.name),onUpdateVolume:t=>p(e.name,t),onUpdateTimeshift:t=>b(e.name,t),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentRouteName",e.name),i("route")},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),i("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),i("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),i("sink"),console.log(`Navigating to sink detail: ${t}`))}})))))):r.createElement(dn,{icon:"volume-up",title:"Sink Not Found",message:"The requested sink could not be found",actionText:"View All Sinks",onAction:()=>i("sinks")})},Sn=e=>{let{sources:t,sinks:n,routes:a,starredRoutes:o,setCurrentCategory:l,handleStar:i,handleToggleRoute:s,handleToggleSource:c,handleToggleSink:u,handleOpenRouteEqualizer:d,handleOpenSourceEqualizer:m,handleOpenSinkEqualizer:g,handleUpdateRouteVolume:p,handleUpdateRouteTimeshift:b,handleUpdateSourceVolume:h,handleUpdateSourceTimeshift:f,handleUpdateSinkVolume:E,handleUpdateSinkTimeshift:k,handleControlSource:v}=e;const[S,w]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=localStorage.getItem("currentRouteName");e&&w(e)}),[]);const C=a.find((e=>e.name===S)),z=(0,y.dU)("gray.700","white");if(!C)return r.createElement(dn,{icon:"route",title:"Route Not Found",message:"The requested route could not be found",actionText:"View All Routes",onAction:()=>l("routes")});const $=t.find((e=>e.name===C.source)),R=n.find((e=>e.name===C.sink));return r.createElement(T.a,null,r.createElement(T.a,{mb:6},r.createElement(L.D,{as:"h2",size:"lg",color:z,mb:4},"Route: ",C.name),r.createElement(sn,{key:`route-${C.name}`,item:C,type:"routes",isStarred:o?.includes(C.name)||!1,isActive:C.enabled,onStar:()=>i("routes",C.name),onActivate:()=>s(C.name),onEqualizer:()=>d(C.name),onUpdateVolume:e=>p(C.name,e),onUpdateTimeshift:e=>b(C.name,e),routes:a,allSources:t,allSinks:n,navigateToDetails:void 0,navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),l("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),l("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),l("sink"),console.log(`Navigating to sink detail: ${t}`))}})),$&&r.createElement(T.a,{mb:6},r.createElement(x.s,{align:"center",mb:4},r.createElement(ne.I,{as:W.i0t,mr:2,color:z}),r.createElement(L.D,{as:"h3",size:"md",color:z},"Source")),r.createElement(ct.r,{columns:{base:1,md:1,lg:1},spacing:4},r.createElement(sn,{key:`route-source-${$.name}`,item:$,type:"sources",isStarred:o?.includes($.name)||!1,isActive:$.enabled,onStar:()=>i("sources",$.name),onActivate:()=>c($.name),onEqualizer:()=>m($.name),onUpdateVolume:e=>h($.name,e),onUpdateTimeshift:e=>f($.name,e),onControlSource:$.vnc_ip&&v?e=>v($.name,e):void 0,onToggleActiveSource:()=>c($.name),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentSourceName",$.name),l("source")},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),l("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),l("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),l("sink"),console.log(`Navigating to sink detail: ${t}`))}}))),R&&r.createElement(T.a,{mb:6},r.createElement(x.s,{align:"center",mb:4},r.createElement(ne.I,{as:W.pPd,mr:2,color:z}),r.createElement(L.D,{as:"h3",size:"md",color:z},"Sink")),r.createElement(ct.r,{columns:{base:1,md:1,lg:1},spacing:4},r.createElement(sn,{key:`route-sink-${R.name}`,item:R,type:"sinks",isStarred:o?.includes(R.name)||!1,isActive:R.enabled,onStar:()=>i("sinks",R.name),onActivate:()=>u(R.name),onEqualizer:()=>g(R.name),onUpdateVolume:e=>E(R.name,e),onUpdateTimeshift:e=>k(R.name,e),routes:a,allSources:t,allSinks:n,navigateToDetails:()=>{localStorage.setItem("currentSinkName",R.name),l("sink")},navigate:(e,t)=>{"routes"===e?(localStorage.setItem("currentRouteName",t),l("route"),console.log(`Navigating to route detail: ${t}`)):"sources"===e||"group-source"===e?(localStorage.setItem("currentSourceName",t),l("source"),console.log(`Navigating to source detail: ${t}`)):"sinks"!==e&&"group-sink"!==e||(localStorage.setItem("currentSinkName",t),l("sink"),console.log(`Navigating to sink detail: ${t}`))}}))))},yn=e=>{let{currentCategory:t,viewMode:n,setViewMode:a,onSort:o,sortConfig:l,isDarkMode:i,actions:s,...c}=e;const u=(0,r.useRef)(null);return r.createElement("div",{className:"content-panel"},r.createElement(en,{currentCategory:t,viewMode:n,setViewMode:a,sortConfig:l,onSort:o,isDarkMode:i}),r.createElement("div",{className:"content-body",ref:u},(()=>{const e={...c,viewMode:n,sortConfig:l,isDarkMode:i,actions:s};switch(t){case"dashboard":default:return r.createElement(un,e);case"active-source":return r.createElement(mn,e);case"now-listening":return r.createElement(gn,e);case"sources":return r.createElement(bn,e);case"sinks":return r.createElement(hn,e);case"routes":return r.createElement(fn,e);case"favorites":return r.createElement(En,e);case"source":return r.createElement(kn,e);case"sink":return r.createElement(vn,e);case"route":return r.createElement(Sn,e);case"stats":return r.createElement(mt,null)}})()))};var xn=n(5072),wn=n.n(xn),Cn=n(7825),zn=n.n(Cn),Tn=n(7659),$n=n.n(Tn),Rn=n(5056),_n=n.n(Rn),In=n(540),An=n.n(In),Nn=n(1113),Mn=n.n(Nn),Un=n(6656),Pn={};Pn.styleTagTransform=Mn(),Pn.setAttributes=_n(),Pn.insert=$n().bind(null,"head"),Pn.domAPI=zn(),Pn.insertStyleElement=An(),wn()(Un.A,Pn),Un.A&&Un.A.locals&&Un.A.locals;const Wn=()=>{const{sources:e,sinks:t,routes:n,activeSource:a,listeningToSink:o,onListenToSink:l,onVisualizeSink:i,onToggleActiveSource:s,controlSource:c}=E(),[u,d]=(0,r.useState)((()=>localStorage.getItem("fullMenuCurrentCategory")||"dashboard")),[m,g]=(0,r.useState)((()=>localStorage.getItem("fullMenuViewMode")||"grid")),[p,b]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[k,v]=(0,r.useState)([]),[S,x]=(0,r.useState)({key:"name",direction:"asc"}),[w,C]=(0,r.useState)(null),{colorMode:z}=(0,y.G6)(),[T,$]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("starredSources")||"[]"),t=JSON.parse(localStorage.getItem("starredSinks")||"[]"),n=JSON.parse(localStorage.getItem("starredRoutes")||"[]");b(e),f(t),v(n)}),[]),(0,r.useEffect)((()=>{localStorage.setItem("fullMenuCurrentCategory",u)}),[u]),(0,r.useEffect)((()=>{localStorage.setItem("fullMenuViewMode",m)}),[m]),(0,r.useEffect)((()=>{document.body.classList.toggle("dark-mode","dark"===z)}),[z]);const R=()=>{$((e=>!e))},_=(0,r.useMemo)((()=>({...xt((()=>Promise.resolve()),C,((e,t)=>{"sources"===e?b(t):"sinks"===e?f(t):"routes"===e&&v(t)}),((e,t,n)=>{e&&t&&n&&Ne(`/site/equalizer?type=${t}&name=${encodeURIComponent(n.name)}`)}),(()=>{}),(()=>{}),((e,t)=>{e&&t&&t.vnc_ip&&t.vnc_port&&Ne(`/site/vnc?ip=${t.vnc_ip}&port=${t.vnc_port}`)}),(e=>{const t=e(a);null!==t?s(t):a&&s(a)}),l,i,0,(()=>{})),navigate:async(e,t)=>{switch(e){case"sources":case"group-source":d("source"),localStorage.setItem("currentSourceName",t);break;case"sinks":case"group-sink":d("sink"),localStorage.setItem("currentSinkName",t);break;case"routes":d("route"),localStorage.setItem("currentRouteName",t)}}})),[l,i,s,a]),I="dark"===z;return r.createElement("div",{className:"full-menu "+(I?"dark-mode":"")},w&&r.createElement("div",{className:"error-message"},w),r.createElement(Vt,{isDarkMode:I,sources:e,sinks:t,routes:n,navigate:_.navigate,toggleSidebar:R,activeSource:a,controlSource:c,updateVolume:_.updateVolume}),r.createElement("div",{className:"main-content"},r.createElement(Bt,{currentCategory:u,setCurrentCategory:d,sources:e,sinks:t,routes:n,starredSources:p,starredSinks:h,starredRoutes:k,sidebarOpen:T,toggleSidebar:R,openDesktopMenu:()=>{window.open("/site/desktopmenu","_blank")},isDarkMode:I}),r.createElement(yn,{currentCategory:u,viewMode:m,setViewMode:g,sortConfig:S,onSort:e=>{x((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})))},isDarkMode:I,sources:e,sinks:t,routes:n,starredSources:p,starredSinks:h,starredRoutes:k,contextActiveSource:a,listeningToSink:o,setCurrentCategory:d,handleStar:(e,t)=>{"sources"===e?b((e=>{const n=e.includes(t)?e.filter((e=>e!==t)):[...e,t];return localStorage.setItem("starredSources",JSON.stringify(n)),n})):"sinks"===e?f((e=>{const n=e.includes(t)?e.filter((e=>e!==t)):[...e,t];return localStorage.setItem("starredSinks",JSON.stringify(n)),n})):"routes"===e&&v((e=>{const n=e.includes(t)?e.filter((e=>e!==t)):[...e,t];return localStorage.setItem("starredRoutes",JSON.stringify(n)),n}))},handleToggleSource:t=>{e.find((e=>e.name===t))&&_.toggleEnabled("sources",t)},handleToggleSink:e=>{t.find((t=>t.name===e))&&_.toggleEnabled("sinks",e)},handleToggleRoute:e=>{n.find((t=>t.name===e))&&_.toggleEnabled("routes",e)},handleOpenSourceEqualizer:t=>{const n=e.find((e=>e.name===t));n&&_.showEqualizer(!0,"sources",n)},handleOpenSinkEqualizer:e=>{const n=t.find((t=>t.name===e));n&&_.showEqualizer(!0,"sinks",n)},handleOpenRouteEqualizer:e=>{const t=n.find((t=>t.name===e));t&&_.showEqualizer(!0,"routes",t)},handleOpenVnc:t=>{const n=e.find((e=>e.name===t));n&&_.showVNC(!0,n)},handleUpdateSourceVolume:(e,t)=>{_.updateVolume("sources",e,t)},handleUpdateSinkVolume:(e,t)=>{_.updateVolume("sinks",e,t)},handleUpdateSourceTimeshift:(e,t)=>{_.updateTimeshift("sources",e,t)},handleUpdateSinkTimeshift:(e,t)=>{_.updateTimeshift("sinks",e,t)},handleUpdateRouteVolume:(e,t)=>{_.updateVolume("routes",e,t)},handleUpdateRouteTimeshift:(e,t)=>{_.updateTimeshift("routes",e,t)},handleOpenVisualizer:e=>{e&&(Ne(`/site/visualizer?ip=${e.ip}`,800,600),i(e))},handleControlSource:(e,t)=>{c(e,t)},actions:_})))};const Dn=async e=>{console.error("App context is not set")};window.previousSongOnPrimarySource=async()=>{await Dn()},window.playPauseOnPrimarySource=async()=>{await Dn()},window.nextSongOnPrimarySource=async()=>{await Dn()},window.DesktopMenuShow=(e,t,n)=>{console.log(`Got RGB: ${e} ${t} ${n}`),console.log("DesktopMenuShow called - this is the original implementation"),window.dispatchEvent(new Event("resize"))},window.DesktopMenuHide=()=>{const e=document.querySelectorAll('[role="menu"]');e.length>0?(document.body.click(),document.querySelectorAll('[aria-expanded="true"]').forEach((e=>{e instanceof HTMLElement&&e.click()})),console.log(`DesktopMenuHide: Closed ${e.length} open context menu(s)`)):console.log("DesktopMenuHide: No open context menus detected");const t=document.querySelectorAll('[role="alertdialog"]');return t.length>0&&(t.forEach((e=>{const t=e.querySelector('button[aria-label="Cancel"]')||e.querySelector("button:not([data-destructive])");t instanceof HTMLElement&&t.click()})),console.log(`DesktopMenuHide: Closed ${t.length} open dialog(s)`)),!0};const Ln=()=>{const{setColorMode:e}=(0,y.G6)(),t=()=>{const t=localStorage.getItem("chakra-ui-color-mode");if(t)if("system"===t){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;e(t?"dark":"light"),console.log(`Color mode set to ${t?"dark":"light"} based on system preference`)}else e(t),console.log(`Color mode set to ${t} from localStorage`)};return(0,r.useEffect)((()=>{t();const e=e=>{"chakra-ui-color-mode"===e.key&&(console.log("chakra-ui-color-mode changed in localStorage:",e.newValue),t())};window.addEventListener("storage",e);const n=window.DesktopMenuShow;return window.DesktopMenuShow=(e,n,r,a)=>{console.log(`Got RGB from GlobalFunctionsComponent: ${e} ${n} ${r} ${a}`),t(),((e,t,n,r)=>{_e.setCurrentColor({r:e,g:t,b:n,a:r})})(e,n,r,a)},()=>{window.removeEventListener("storage",e),window.DesktopMenuShow=n}}),[e]),null},On=e=>{let{stream:t,sinkId:n,onPlaybackError:a}=e;const o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{(async()=>{if(o.current&&t){o.current.srcObject!==t&&(o.current.srcObject=t);try{await o.current.play()}catch(e){console.error("Audio play failed, triggering onPlaybackError:",e),a(n,e)}}})()}),[t,n,a]),r.createElement("audio",{ref:o,autoPlay:!0,controls:!0,muted:!1,style:{display:"none"}})},Vn=()=>{const{audioStreams:e,playbackError:t}=(()=>{const e=(0,r.useContext)(v);if(void 0===e)throw new Error("useWebRTC must be used within a WebRTCProvider");return e})(),n=(e,t)=>{console.error(`Playback error for sink ${e}:`,t)};return r.createElement("div",null,Array.from(e.entries()).map((e=>{let[t,a]=e;return r.createElement(On,{key:t,sinkId:t,stream:a,onPlaybackError:n})})))};var qn=n(1626),Fn={};Fn.styleTagTransform=Mn(),Fn.setAttributes=_n(),Fn.insert=$n().bind(null,"head"),Fn.domAPI=zn(),Fn.insertStyleElement=An(),wn()(qn.A,Fn),qn.A&&qn.A.locals&&qn.A.locals;var Bn=n(2343),jn={};jn.styleTagTransform=Mn(),jn.setAttributes=_n(),jn.insert=$n().bind(null,"head"),jn.domAPI=zn(),jn.insertStyleElement=An(),wn()(Bn.A,jn),Bn.A&&Bn.A.locals&&Bn.A.locals;const Jn=()=>{const[e]=(0,i.ok)(),{sources:t,sinks:n,routes:a}=E(),o=e.get("type"),l=e.get("name");let s=null;return o&&l&&("sources"===o||"group-source"===o?s=t.find((e=>e.name===l))||null:"sinks"===o||"group-sink"===o?s=n.find((e=>e.name===l))||null:"routes"===o&&(s=a.find((e=>e.name===l))||null)),s?r.createElement(Y,{item:s,type:o,onClose:()=>window.close(),onDataChange:()=>{}}):r.createElement("div",null,"Item not found")},Hn=()=>{const[e]=(0,i.ok)(),{sources:t}=E(),n=e.get("ip"),a=e.get("port"),o=t.find((e=>e.vnc_ip===n&&e.vnc_port===Number(a)));return o?r.createElement($,{source:o,onClose:()=>window.close()}):r.createElement("div",null,"Source not found")},Gn=()=>{const[e]=(0,i.ok)(),t=e.get("ip");return t?r.createElement(D,{ip:t}):r.createElement("div",null,"IP not provided")},Yn=()=>{const e=(0,s.g)().ip;return e?r.createElement(K,{ip:e}):r.createElement("div",null,"IP not provided")},Kn=()=>{const{showEqualizerModal:e,selectedItem:t,selectedItemType:n,setShowEqualizerModal:a,setSelectedItem:o,fetchSources:l,fetchSinks:c,fetchRoutes:u}=E();return r.createElement(i.Kd,{basename:"/site"}," ",r.createElement(Ln,null),r.createElement(s.BV,null," ",r.createElement(s.qh,{path:"/desktopmenu",element:r.createElement(Ie,null,r.createElement(yt,null))})," ",r.createElement(s.qh,{path:"/",element:r.createElement(Wn,null)})," ",r.createElement(s.qh,{path:"/equalizer",element:r.createElement(Jn,null)})," ",r.createElement(s.qh,{path:"/vnc",element:r.createElement(Hn,null)})," ",r.createElement(s.qh,{path:"/visualizer",element:r.createElement(Gn,null)})," ",r.createElement(s.qh,{path:"/transcribe/:ip",element:r.createElement(Yn,null)})," ",r.createElement(s.qh,{path:"/add-source",element:r.createElement(le,null)})," ",r.createElement(s.qh,{path:"/edit-source",element:r.createElement(le,null)})," ",r.createElement(s.qh,{path:"/add-sink",element:r.createElement(ie,null)})," ",r.createElement(s.qh,{path:"/edit-sink",element:r.createElement(ie,null)})," ",r.createElement(s.qh,{path:"/add-route",element:r.createElement(se,null)})," ",r.createElement(s.qh,{path:"/edit-route",element:r.createElement(se,null)})," ",r.createElement(s.qh,{path:"/add-group",element:r.createElement(de,null)})," ",r.createElement(s.qh,{path:"/edit-group",element:r.createElement(de,null)})," ",r.createElement(s.qh,{path:"/processes/:ip",element:r.createElement(Xe,null)})," ",r.createElement(s.qh,{path:"/speaker-layout-standalone",element:r.createElement(rt,null)})," ",r.createElement(s.qh,{path:"/listen/:sinkName",element:r.createElement(pt,null)})," ",r.createElement(s.qh,{path:"/stats",element:r.createElement(mt,null)})," "),e&&t&&n&&r.createElement(Y,{item:t,type:n,onClose:()=>{a(!1),o(null)},onDataChange:()=>{"sources"===n&&l(),"sinks"===n&&c(),"routes"===n&&u()}}),r.createElement(Vn,null)," ")},Qn=()=>r.createElement(o.s,{theme:l}," ",r.createElement(f,null," ",r.createElement(S,null,r.createElement(Kn,null)," "))),Xn=document.getElementById("root");var Zn;Xn&&(0,a.H)(Xn).render(r.createElement(r.StrictMode,null,r.createElement(o.s,{theme:l},r.createElement(Qn,null)))),Zn&&Zn instanceof Function&&n.e(364).then(n.bind(n,364)).then((e=>{let{getCLS:t,getFID:n,getFCP:r,getLCP:a,getTTFB:o}=e;t(Zn),n(Zn),r(Zn),a(Zn),o(Zn)}))}},l={};function i(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=o,e=[],i.O=(t,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(l=!1,a<o&&(o=a));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);i.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,i.d(a,o),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+".07f898e2066bda2556a1.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="screamrouter-react:",i.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var l,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.setAttribute("data-webpack",a+n),l.src=e),r[e]=[t];var m=(t,n)=>{l.onerror=l.onload=null,clearTimeout(g);var a=r[e];if(delete r[e],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),s&&document.head.appendChild(l)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/site/",(()=>{i.b=document.baseURI||self.location.href;var e={792:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=i.p+i.u(t),l=new Error;i.l(o,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,r[1](l)}}),"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,o=n[0],l=n[1],s=n[2],c=0;if(o.some((t=>0!==e[t]))){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(s)var u=s(i)}for(t&&t(n);c<o.length;c++)a=o[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},n=self.webpackChunkscreamrouter_react=self.webpackChunkscreamrouter_react||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0;var s=i.O(void 0,[870],(()=>i(8983)));s=i.O(s)})();